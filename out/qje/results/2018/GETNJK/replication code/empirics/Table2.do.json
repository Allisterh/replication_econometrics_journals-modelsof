[
  {
    "id": "comment",
    "value": "// This file produces Table 2 in Beraja-Hurst-Fuster-Vavra. //",
    "line": 2,
    "column": 1
  },
  {
    "id": "comment",
    "value": "//////////////////////////////////////////////////////////////\n",
    "line": 3,
    "column": 1
  },
  {
    "id": "comment",
    "value": "////////////////////////////////////////////////////////////////////\n///// Build dataset",
    "line": 4,
    "column": 1
  },
  {
    "id": "comment",
    "value": "////////////////////////////////////////////////////////////////////\n",
    "line": 5,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "cd",
      "line": 6,
      "column": 1
    },
    "weight": [
      {
        "id": "identifier",
        "value": "DIRECTORY",
        "line": 6,
        "column": 5
      },
      {
        "id": "]",
        "value": "]",
        "line": 6,
        "column": 14
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Monthly average 30-year fixed mortgage rate:",
    "line": 8,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "freduse",
      "line": 9,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MORTG",
        "line": 9,
        "column": 9
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 9,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 10,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "datem",
        "line": 10,
        "column": 3
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "mofd",
        "line": 10,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "daten",
        "line": 10,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "format",
      "line": 11,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "datem",
        "line": 11,
        "column": 8
      },
      {
        "id": "%",
        "value": "%",
        "line": 11,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "tm",
        "line": 11,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 12,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "datem",
        "line": 12,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "MORTG",
        "line": 12,
        "column": 12
      },
      {
        "id": "*",
        "value": "*",
        "line": 12,
        "column": 17
      }
    ]
  },
  {
    "id": "comment",
    "value": "// HMDA data on monthly originations (by application month):",
    "line": 14,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 15,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "datem",
        "line": 15,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "datem_app",
        "line": 15,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 16,
      "column": 1
    },
    "varlist": [
      {
        "id": "number",
        "value": "1",
        "line": 16,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 16,
        "column": 8
      },
      {
        "id": "number",
        "value": "1",
        "line": 16,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "datem_app",
        "line": 16,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 16,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 16,
        "column": 27
      },
      {
        "id": "/",
        "value": "/",
        "line": 16,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "hmda_origbyappmonth_1990to2016.dta",
        "line": 16,
        "column": 32
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "nogen",
        "line": 16,
        "column": 69
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 17,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "datem_app",
        "line": 17,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "datem",
        "line": 17,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 19,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "refi_HI_loanvol",
        "line": 19,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "refi_HI_loanvol",
        "line": 19,
        "column": 27
      },
      {
        "id": "*",
        "value": "*",
        "line": 19,
        "column": 42
      },
      {
        "id": "number",
        "value": "1000",
        "line": 19,
        "column": 43
      }
    ]
  },
  {
    "id": "comment",
    "value": "/* This requires access to the Fed-internal HMDA version, via RADAR.\nPull as follows:\nSELECT year,agency_code,respondent_id,action_date,application_date,loan_amount,loan_purpose,loan_type,msa_md,property_type,state_code \nFROM chmda.view_lar_chmda WHERE (view_ lar_chmda.year BETWEEN 1990 AND 2016 AND view_lar_chmda.action_type =1)\nand then:\ndrop if agency_code==\"8\" // PMI\ndrop if state_code ==\"72\" // Puerto Rico\ndrop if property_type==3 // multifamily\ndrop if loan_purpose<1 | loan_purpose>3 // 4 is multifamily pre 2004; <1 are errors\ng x = regexm(application_date , \"/\")\ng appdate = date(application_date, \"MDY\", 2050) if x==1\nreplace appdate = date(application_date, \"YMD\") if x==0\nformat appdate %td\ng datem_app = mofd(appdate)\nformat datem_app %tm\ndrop if datem_app<m(1990m1)|datem_app>m(2016m12)\n \nrename loan_amount loanamt\ngen refiamt = loanamt \nreplace refiamt = 0 if loan_purp==1 \ng refi_code = refiamt<. & refiamt>0\ng loan_code = loanamt<. & loanamt>0\ncollapse (sum) total_loanvol=loanamt refi_HI_loanvol = refiamt ///\n\t (sum) count_loans=loan_code count_refi_HI = refi_code ///\n\t , by(datem_app) fast\t \nsave data/hmda_origbyappmonth_1990to2016.dta, replace\n*/",
    "line": 21,
    "column": 1
  },
  {
    "id": "comment",
    "value": "// Flow of Funds data on amount of mortgages outstanding",
    "line": 24,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 25,
      "column": 1
    },
    "varlist": [
      {
        "id": "number",
        "value": "1",
        "line": 25,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 25,
        "column": 8
      },
      {
        "id": "number",
        "value": "1",
        "line": 25,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "datem",
        "line": 25,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 25,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 25,
        "column": 23
      },
      {
        "id": "/",
        "value": "/",
        "line": 25,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "outstanding_FoF.dta",
        "line": 25,
        "column": 28
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "nogen",
        "line": 25,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "keep",
        "line": 25,
        "column": 55
      },
      {
        "id": "number",
        "value": "1",
        "line": 25,
        "column": 60
      },
      {
        "id": "number",
        "value": "3",
        "line": 25,
        "column": 62
      }
    ]
  },
  {
    "id": "comment",
    "value": "/* This comes from Haver (but can also be downloaded directly from Flow of Funds website); interpolated between quarterly data points:\nimport haver ol15hom5@ffunds, clear\n\ng datem = mofd(dofq(time))\nformat datem %tm\nreplace datem = datem + 2 // end of quarter\ntsset datem\ntsfill\nipolate ol15 datem, generate(x)\nreplace ol15 = x if ol15==.\nrename ol15 mtg_out_FF\nkeep datem mtg_out_FF\nsave data/outstanding_FoF.dta, replace\n*/",
    "line": 27,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 29,
      "column": 1
    },
    "varlist": [
      {
        "id": "number",
        "value": "1",
        "line": 29,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 29,
        "column": 8
      },
      {
        "id": "number",
        "value": "1",
        "line": 29,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "datem",
        "line": 29,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 29,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 29,
        "column": 23
      },
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "hpsd_real.tmp",
        "line": 29,
        "column": 28
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "nogen",
        "line": 29,
        "column": 43
      },
      {
        "id": "identifier",
        "value": "keep",
        "line": 29,
        "column": 49
      },
      {
        "id": "number",
        "value": "1",
        "line": 29,
        "column": 54
      },
      {
        "id": "number",
        "value": "3",
        "line": 29,
        "column": 56
      }
    ]
  },
  {
    "id": "comment",
    "value": "/*\nfreduse CPIAUCSL, clear\ng month = mofd(daten)\nformat month %tm\nrename CPI cpi\nkeep cpi month\nsave cpi_monthly.dta, replace\n\nuse \"SMcl.dta\", replace // same proprietary state-level CoreLogic HPI file as in Fig. 7\ncap rename cl cl_SM\nkeep cl_SM state month\nmerge m:1 month using cpi_monthly.dta\nreplace cl_SM=cl_SM/cpi\nreplace cl_SM=log(cl_SM)\nrename cl_SM loghp\nkeep loghp month state\n\ngen date = dofm(month)\ngen year=year(date)\ndrop date\n\nrename state statename\nmerge m:1 state using data/statenametostate, nogen\nmerge m:1 state year using data/statepopulation_annual\nkeep if _merge==3\ndrop _merge\n\negen s=group(state)\ntsset s month\ngen hpgrowth=loghp-l12.loghp\nreplace hpgrowth=hpgrowth*100\n\ncollapse (mean) mean_hp=hpgrowth (sd) sd_hp=hpgrowth [aweight=pop], by(month)\n\nuse data/hp_sd_monthly.dta, clear \nrename month datem\nrenvars *hp, postfix(_real)\nsave data/hpsd_real.tmp, replace\n*/",
    "line": 30,
    "column": 1
  },
  {
    "id": "comment",
    "value": "// see above",
    "line": 32,
    "column": 67
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 32,
      "column": 1
    },
    "varlist": [
      {
        "id": "number",
        "value": "1",
        "line": 32,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 32,
        "column": 8
      },
      {
        "id": "number",
        "value": "1",
        "line": 32,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "datem",
        "line": 32,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 32,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 32,
        "column": 23
      },
      {
        "id": "/",
        "value": "/",
        "line": 32,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "WAC_agencies_embs.dta",
        "line": 32,
        "column": 28
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "nogen",
        "line": 32,
        "column": 51
      },
      {
        "id": "identifier",
        "value": "keep",
        "line": 32,
        "column": 57
      },
      {
        "id": "number",
        "value": "1",
        "line": 32,
        "column": 62
      },
      {
        "id": "number",
        "value": "3",
        "line": 32,
        "column": 64
      }
    ]
  },
  {
    "id": "comment",
    "value": "/* This is based on data from eMBS, available via RADAR:\nimport delimited embs062682_5921518293442.csv, clear // the full view_aggrhist_embs from RADAR\nkeep if aggrlvl ==3 // at the agency level (FHL, FNM, GNM)\nkeep if colltype ==\"LOAN\"\ng datem = mofd(date(substr(effdt,1,10),\"YMD\"))\nformat datem %tm\nbr datem avgwac  rpb if agency ==\"FHL\" // 1994m5 and 1997m1 are misreported for FHL\nencode agency, gen(agnr)\nxtset agnr datem\nforeach x in avgwac rpb {\nreplace `x'=. if (datem==m(1994m5) | datem==m(1997m1)) & agency ==\"FHL\"\nipolate `x' datem , generate(aa) by(agnr)\nreplace `x'=aa if `x'==.\ndrop aa\n}\ncollapse avgwac [aw=rpb], by(datem) // weighted average of market\nsave data/WAC_agencies_embs.dta, replace\n*/",
    "line": 33,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 35,
      "column": 1
    },
    "varlist": [
      {
        "id": "number",
        "value": "1",
        "line": 35,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 35,
        "column": 8
      },
      {
        "id": "number",
        "value": "1",
        "line": 35,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "datem",
        "line": 35,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 35,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 35,
        "column": 23
      },
      {
        "id": "/",
        "value": "/",
        "line": 35,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "ramey.tmp",
        "line": 35,
        "column": 28
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "nogen",
        "line": 35,
        "column": 39
      },
      {
        "id": "identifier",
        "value": "keep",
        "line": 35,
        "column": 45
      },
      {
        "id": "number",
        "value": "1",
        "line": 35,
        "column": 50
      },
      {
        "id": "number",
        "value": "3",
        "line": 35,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "keepusing",
        "line": 35,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "ff4_tc",
        "line": 35,
        "column": 65
      }
    ]
  },
  {
    "id": "comment",
    "value": "/* import excel data/raw/Ramey_Monetarydat.xlsx, sheet(\"Monthly\") firstrow clear // comes from http://econweb.ucsd.edu/~vramey/research/Ramey_HOM_monetary.zip\ngen datem= m(1959m1) + _n-1\nformat datem %tm\norder datem\nrenvars *, l\nkeep datem rr* *tc ff4_vr\nsave data/ramey.tmp, replace\n*/",
    "line": 36,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 39,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "year",
        "line": 39,
        "column": 3
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "year",
        "line": 39,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "dofm",
        "line": 39,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "datem",
        "line": 39,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "tsset",
      "line": 41,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "datem",
        "line": 41,
        "column": 7
      }
    ]
  },
  {
    "id": "comment",
    "value": "// monthly refi propensity, in percent",
    "line": 43,
    "column": 55
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 43,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "refiprop",
        "line": 43,
        "column": 3
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "refi_HI_loanvol",
        "line": 43,
        "column": 14
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 30
      },
      {
        "id": "number",
        "value": "10",
        "line": 43,
        "column": 31
      },
      {
        "id": "^",
        "value": "^",
        "line": 43,
        "column": 33
      },
      {
        "id": "number",
        "value": "9",
        "line": 43,
        "column": 34
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "l.mtg_out_FF",
        "line": 43,
        "column": 36
      },
      {
        "id": "*",
        "value": "*",
        "line": 43,
        "column": 49
      },
      {
        "id": "number",
        "value": "100",
        "line": 43,
        "column": 51
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "label",
      "line": 44,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "var",
        "line": 44,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "refiprop",
        "line": 44,
        "column": 11
      },
      {
        "id": "string",
        "value": "\"Monthly Refi Propensity vs. Oustanding (%)\"",
        "line": 44,
        "column": 20
      }
    ]
  },
  {
    "id": "comment",
    "value": "////////////////////////////////////////////////////////////////////\n///// Analysis",
    "line": 47,
    "column": 1
  },
  {
    "id": "comment",
    "value": "////////////////////////////////////////////////////////////////////\n",
    "line": 48,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "program",
      "line": 50,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "drop",
        "line": 50,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "_all",
        "line": 50,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "program",
      "line": 51,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "add_stats",
        "line": 51,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "estadd",
      "line": 52,
      "column": 10
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "capture",
          "line": 52,
          "column": 2
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "scalar",
        "line": 52,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "r2_a",
        "line": 52,
        "column": 24
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "r2_a",
        "line": 52,
        "column": 29
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "sum",
      "line": 53,
      "column": 6
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "qui",
          "line": 53,
          "column": 2
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "mdy",
        "line": 53,
        "column": 10
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "e",
        "line": 53,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "sample",
        "line": 53,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 54,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "min_max_mdy",
        "line": 54,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "year",
        "line": 54,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "r",
        "line": 54,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "min",
        "line": 54,
        "column": 29
      },
      {
        "id": "*",
        "value": "*",
        "line": 54,
        "column": 34
      },
      {
        "id": "number",
        "value": "100",
        "line": 54,
        "column": 35
      },
      {
        "id": "+",
        "value": "+",
        "line": 54,
        "column": 39
      },
      {
        "id": "identifier",
        "value": "month",
        "line": 54,
        "column": 41
      },
      {
        "id": "identifier",
        "value": "r",
        "line": 54,
        "column": 47
      },
      {
        "id": "identifier",
        "value": "min",
        "line": 54,
        "column": 49
      },
      {
        "id": "+",
        "value": "+",
        "line": 54,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 55,
        "column": 4
      },
      {
        "id": "identifier",
        "value": "r",
        "line": 55,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "max",
        "line": 55,
        "column": 11
      },
      {
        "id": "/",
        "value": "/",
        "line": 55,
        "column": 16
      },
      {
        "id": "number",
        "value": "10000",
        "line": 55,
        "column": 17
      },
      {
        "id": "+",
        "value": "+",
        "line": 55,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "month",
        "line": 55,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "r",
        "line": 55,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "max",
        "line": 55,
        "column": 33
      },
      {
        "id": "/",
        "value": "/",
        "line": 55,
        "column": 39
      },
      {
        "id": "number",
        "value": "1000000",
        "line": 55,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "estadd",
      "line": 57,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "scalar",
        "line": 57,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "min_max_mdy",
        "line": 57,
        "column": 17
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`min_max_mdy'",
        "line": 57,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "estadd",
      "line": 58,
      "column": 6
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "cap",
          "line": 58,
          "column": 2
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "scalar",
        "line": 58,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "NWlags",
        "line": 58,
        "column": 21
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`e(lag)'",
        "line": 58,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "estadd",
      "line": 59,
      "column": 6
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "cap",
          "line": 59,
          "column": 2
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "scalar",
        "line": 59,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "NWlags",
        "line": 59,
        "column": 21
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`e(bw)'",
        "line": 59,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "end",
      "line": 61,
      "column": 1
    }
  },
  {
    "id": "comment",
    "value": "// refinance incentive on outstanding stock",
    "line": 63,
    "column": 28
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 63,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "inc_wac",
        "line": 63,
        "column": 3
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "avgwac",
        "line": 63,
        "column": 13
      },
      {
        "id": "-",
        "value": "-",
        "line": 63,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "MORTG",
        "line": 63,
        "column": 22
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "label",
      "line": 64,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "var",
        "line": 64,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "inc_wac",
        "line": 64,
        "column": 11
      },
      {
        "id": "string",
        "value": "\"Rate incentive vs Agency MBS WAC\"",
        "line": 64,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "tsset",
      "line": 66,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "datem",
        "line": 66,
        "column": 7
      }
    ]
  },
  {
    "id": "comment",
    "value": "// the 12-month past average",
    "line": 68,
    "column": 47
  },
  {
    "command": {
      "id": "identifier",
      "value": "tssmooth",
      "line": 68,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ma",
        "line": 68,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "ff4_cum",
        "line": 68,
        "column": 13
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ff4_tc",
        "line": 68,
        "column": 23
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "window",
        "line": 68,
        "column": 32
      },
      {
        "id": "number",
        "value": "11",
        "line": 68,
        "column": 39
      },
      {
        "id": "number",
        "value": "1",
        "line": 68,
        "column": 42
      },
      {
        "id": "number",
        "value": "0",
        "line": 68,
        "column": 44
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 69,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ff4_cum",
        "line": 69,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "12",
        "line": 69,
        "column": 19
      },
      {
        "id": "*",
        "value": "*",
        "line": 69,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "ff4_cum",
        "line": 69,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 70,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ff4_cum",
        "line": 70,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": ".",
        "line": 70,
        "column": 19
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "ff4_tc",
        "line": 70,
        "column": 24
      },
      {
        "id": "==",
        "value": "==",
        "line": 70,
        "column": 30
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 70,
        "column": 32
      }
    ]
  },
  {
    "id": "comment",
    "value": "// need to have at least 12 obs",
    "line": 71,
    "column": 40
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 71,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ff4_cum",
        "line": 71,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": ".",
        "line": 71,
        "column": 19
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "datem",
        "line": 71,
        "column": 24
      },
      {
        "id": "<",
        "value": "<",
        "line": 71,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "m",
        "line": 71,
        "column": 30
      },
      {
        "id": "number",
        "value": "1991m1",
        "line": 71,
        "column": 32
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Table:",
    "line": 73,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 74,
      "column": 1
    },
    "=": [
      {
        "id": "identifier",
        "value": "m",
        "line": 74,
        "column": 17
      },
      {
        "id": "number",
        "value": "2012m6",
        "line": 74,
        "column": 19
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "datem",
        "line": 74,
        "column": 9
      },
      {
        "id": "<",
        "value": "<",
        "line": 74,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 75,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mdy",
        "line": 75,
        "column": 3
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "dofm",
        "line": 75,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "datem",
        "line": 75,
        "column": 12
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "eststo",
      "line": 77,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 77,
        "column": 8
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 79,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "sd_hp_mean",
        "line": 79,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "mean",
        "line": 79,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "sd_hp_real",
        "line": 79,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "m",
        "line": 79,
        "column": 46
      },
      {
        "id": "number",
        "value": "1991m1",
        "line": 79,
        "column": 48
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "datem",
        "line": 79,
        "column": 39
      },
      {
        "id": ">",
        "value": ">",
        "line": 79,
        "column": 44
      }
    ]
  },
  {
    "id": "comment",
    "value": "// demean for interaction",
    "line": 80,
    "column": 42
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 80,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "sd_hp_norm",
        "line": 80,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "sd_hp_real",
        "line": 80,
        "column": 18
      },
      {
        "id": "-",
        "value": "-",
        "line": 80,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "sd_hp_mean",
        "line": 80,
        "column": 31
      }
    ]
  },
  {
    "id": "comment",
    "value": "// incentive variable for table",
    "line": 82,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 83,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Xinc",
        "line": 83,
        "column": 3
      }
    ],
    "=": [
      {
        "id": "-",
        "value": "-",
        "line": 83,
        "column": 10
      },
      {
        "id": "number",
        "value": "1",
        "line": 83,
        "column": 11
      },
      {
        "id": "*",
        "value": "*",
        "line": 83,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "inc_wac",
        "line": 83,
        "column": 13
      }
    ]
  },
  {
    "id": "comment",
    "value": "// bw(5) rob small is the same as newey...lag(4); see https://www.stata.com/statalist/archive/2012-09/msg00439.html",
    "line": 85,
    "column": 39
  },
  {
    "command": {
      "id": "identifier",
      "value": "ivreg2",
      "line": 85,
      "column": 1
    },
    "meta": {
      "predictors": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "refiprop",
        "line": 85,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "Xinc",
        "line": 85,
        "column": 17
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "bw",
        "line": 85,
        "column": 23
      },
      {
        "id": "number",
        "value": "5",
        "line": 85,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "rob",
        "line": 85,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "small",
        "line": 85,
        "column": 33
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "add_stats",
      "line": 86,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "eststo",
      "line": 87,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "reg",
      "line": 89,
      "column": 5
    },
    "meta": {
      "predictors": 2
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "qui",
          "line": 89,
          "column": 1
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "refiprop",
        "line": 89,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "c.Xinc##c.l.mean_hp_real",
        "line": 89,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "c.Xinc##c.sd_hp_norm",
        "line": 89,
        "column": 43
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "scalar",
      "line": 90,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "r2_a",
        "line": 90,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`e(r2_a)'",
        "line": 90,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "ivreg2",
      "line": 91,
      "column": 1
    },
    "meta": {
      "predictors": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "refiprop",
        "line": 91,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "c.Xinc##c.l.mean_hp_real",
        "line": 91,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "c.Xinc##c.sd_hp_norm",
        "line": 91,
        "column": 42
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "bw",
        "line": 91,
        "column": 65
      },
      {
        "id": "number",
        "value": "5",
        "line": 91,
        "column": 68
      },
      {
        "id": "identifier",
        "value": "rob",
        "line": 91,
        "column": 71
      },
      {
        "id": "identifier",
        "value": "small",
        "line": 91,
        "column": 75
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "add_stats",
      "line": 92,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "eststo",
      "line": 93,
      "column": 1
    }
  },
  {
    "id": "comment",
    "value": "// changes:",
    "line": 95,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 96,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Xinc",
        "line": 96,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "s12.MORTG",
        "line": 96,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "ivreg2",
      "line": 98,
      "column": 1
    },
    "meta": {
      "predictors": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s12.refiprop",
        "line": 98,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "Xinc",
        "line": 98,
        "column": 22
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "kernel",
        "line": 98,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "tru",
        "line": 98,
        "column": 37
      },
      {
        "id": "identifier",
        "value": "bw",
        "line": 98,
        "column": 42
      },
      {
        "id": "number",
        "value": "12",
        "line": 98,
        "column": 45
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "add_stats",
      "line": 99,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "eststo",
      "line": 100,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "ivreg2",
      "line": 102,
      "column": 1
    },
    "meta": {
      "predictors": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s12.refiprop",
        "line": 102,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "c.Xinc##c.l.mean_hp_real",
        "line": 102,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "c.Xinc##c.sd_hp_norm",
        "line": 102,
        "column": 48
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "kernel",
        "line": 102,
        "column": 72
      },
      {
        "id": "identifier",
        "value": "tru",
        "line": 102,
        "column": 79
      },
      {
        "id": "identifier",
        "value": "bw",
        "line": 102,
        "column": 84
      },
      {
        "id": "number",
        "value": "12",
        "line": 102,
        "column": 87
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "add_stats",
      "line": 103,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "eststo",
      "line": 104,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "sum",
      "line": 105,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Xinc",
        "line": 105,
        "column": 5
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "e",
        "line": 105,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "sample",
        "line": 105,
        "column": 15
      }
    ]
  },
  {
    "id": "comment",
    "value": "// G-K shocks:",
    "line": 108,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 109,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Xinc",
        "line": 109,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ff4_cum",
        "line": 109,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "ivreg2",
      "line": 110,
      "column": 1
    },
    "meta": {
      "predictors": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s12.refiprop",
        "line": 110,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "Xinc",
        "line": 110,
        "column": 23
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "kernel",
        "line": 110,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "tru",
        "line": 110,
        "column": 38
      },
      {
        "id": "identifier",
        "value": "bw",
        "line": 110,
        "column": 43
      },
      {
        "id": "number",
        "value": "12",
        "line": 110,
        "column": 46
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "add_stats",
      "line": 111,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "eststo",
      "line": 112,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "ivreg2",
      "line": 114,
      "column": 1
    },
    "meta": {
      "predictors": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s12.refiprop",
        "line": 114,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "c.Xinc##c.l.mean_hp_real",
        "line": 114,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "c.Xinc##c.sd_hp_norm",
        "line": 114,
        "column": 47
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "kernel",
        "line": 114,
        "column": 71
      },
      {
        "id": "identifier",
        "value": "tru",
        "line": 114,
        "column": 78
      },
      {
        "id": "identifier",
        "value": "bw",
        "line": 114,
        "column": 83
      },
      {
        "id": "number",
        "value": "12",
        "line": 114,
        "column": 86
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "add_stats",
      "line": 115,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "eststo",
      "line": 116,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "sum",
      "line": 117,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Xinc",
        "line": 117,
        "column": 5
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "e",
        "line": 117,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "sample",
        "line": 117,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "esttab",
      "line": 119,
      "column": 1
    },
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 119,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "compress",
        "line": 119,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "b",
        "line": 119,
        "column": 27
      },
      {
        "id": "number",
        "value": "3",
        "line": 119,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "se",
        "line": 119,
        "column": 32
      },
      {
        "id": "number",
        "value": "3",
        "line": 119,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "starl",
        "line": 119,
        "column": 38
      },
      {
        "id": "*",
        "value": "*",
        "line": 119,
        "column": 44
      },
      {
        "id": "number",
        "value": "0.1",
        "line": 119,
        "column": 46
      },
      {
        "id": "*",
        "value": "*",
        "line": 119,
        "column": 50
      },
      {
        "id": "*",
        "value": "*",
        "line": 119,
        "column": 51
      },
      {
        "id": "number",
        "value": "0.05",
        "line": 119,
        "column": 53
      },
      {
        "id": "*",
        "value": "*",
        "line": 119,
        "column": 58
      },
      {
        "id": "*",
        "value": "*",
        "line": 119,
        "column": 59
      },
      {
        "id": "*",
        "value": "*",
        "line": 119,
        "column": 60
      },
      {
        "id": "number",
        "value": "0.01",
        "line": 119,
        "column": 62
      },
      {
        "id": "identifier",
        "value": "stats",
        "line": 119,
        "column": 68
      },
      {
        "id": "identifier",
        "value": "r2_a",
        "line": 119,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "N",
        "line": 119,
        "column": 79
      },
      {
        "id": "identifier",
        "value": "min_max_mdy",
        "line": 119,
        "column": 81
      },
      {
        "id": "identifier",
        "value": "NWlags",
        "line": 119,
        "column": 93
      },
      {
        "id": ",",
        "value": ",",
        "line": 119,
        "column": 99
      },
      {
        "id": "identifier",
        "value": "fmt",
        "line": 119,
        "column": 101
      },
      {
        "id": "number",
        "value": "2",
        "line": 119,
        "column": 105
      },
      {
        "id": "number",
        "value": "0",
        "line": 119,
        "column": 107
      },
      {
        "id": "number",
        "value": "6",
        "line": 119,
        "column": 109
      },
      {
        "id": "number",
        "value": "0",
        "line": 119,
        "column": 111
      },
      {
        "id": "identifier",
        "value": "labels",
        "line": 120,
        "column": 1
      },
      {
        "id": "string",
        "value": "\"Adj. R2\"",
        "line": 120,
        "column": 8
      },
      {
        "id": "string",
        "value": "\"Obs.\"",
        "line": 120,
        "column": 18
      },
      {
        "id": "string",
        "value": "\"Dates\"",
        "line": 120,
        "column": 25
      },
      {
        "id": "string",
        "value": "\"Kernel BW\"",
        "line": 120,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "coeflabels",
        "line": 120,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "_cons",
        "line": 120,
        "column": 60
      },
      {
        "id": "identifier",
        "value": "Constant",
        "line": 120,
        "column": 66
      },
      {
        "id": "identifier",
        "value": "Xinc",
        "line": 120,
        "column": 75
      },
      {
        "id": "string",
        "value": "\"Interest rate\"",
        "line": 120,
        "column": 80
      },
      {
        "id": "identifier",
        "value": "L.mean_hp_real",
        "line": 121,
        "column": 1
      },
      {
        "id": "string",
        "value": "\"HPA\"",
        "line": 121,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "c.Xinc#cL.mean_hp_real",
        "line": 121,
        "column": 22
      },
      {
        "id": "string",
        "value": "\"Int. Rate $\\times$ HPA\"",
        "line": 121,
        "column": 45
      },
      {
        "id": "identifier",
        "value": "sd_hp_norm",
        "line": 121,
        "column": 70
      },
      {
        "id": "string",
        "value": "\"SD(HPA)\"",
        "line": 121,
        "column": 81
      },
      {
        "id": "identifier",
        "value": "c.Xinc#c.sd_hp_norm",
        "line": 121,
        "column": 91
      },
      {
        "id": "string",
        "value": "\"Int. Rate $\\times$ SD(HPA)\"",
        "line": 121,
        "column": 111
      }
    ]
  }
]