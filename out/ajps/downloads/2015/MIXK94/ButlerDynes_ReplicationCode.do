*******************************************************  PROJECT:  "How Politicians Discount the Opinions of Constituents with Whom They Disagree", American Journal of Political Science**  AUTHORS: Daniel M. Butler, Adam M. Dynes**  DESCRIPTION: Stata code (Do File) to replicate figures and tables in paper and the appendices**  DATE: 3 April 2015*****************************************************	clear all	set more off	******************************************************* INTRO: New Mexico Replication		use "ButlerDynes_NMReplication.dta", clear	**Figure 1: Results by Partisanship from Butler and Nickerson (2011)		gen type = 1 if party=="R" & treatment==0		replace type = 3 if party=="R" & treatment==1						replace type = 6 if party=="D" & treatment==0		replace type = 8 if party=="D" & treatment==1			bysort type: egen ave_outcome=mean(sb24)		#delimit;			twoway (bar ave_out type, fcolor(black) lcolor(black)), ytitle("Percent Voting in Favor of Tax Rebate in" "Butler and Nickerson (2011) New Mexico Study") legend(off) 			graphregion(fcolor(white) lcolor(white) ifcolor(white) ilcolor(white)) xtitle(" " "Results by Party and Treatment Group") ylabel (0(.25)1) 			xlabel(1 "Republicans" 1 "Not Informed" 3 "Republicans" 3 "Informed" 6 "Democrats" 6 "Not Informed" 8 "Democrats" 8 "Informed", alternate);		#delimit cr				graph export "figure1.png", height(3000) replace		graph export "figure1.eps",  replace		******************************************************* STUDY 1: State Legislators	use "ButlerDynes_StateLegislators.dta", clear	** Label variables		label var tenure "Years in Office"		label var tenure_sq "Years in Office Squared"		label var pop10K "Population (10K)"		label var squire "Legislative Professionalism (Squire)"		replace traveltime=traveltime/60		label var traveltime "Travel Time (Hours)"			replace length_session=length_session/100		label var length_session "Session Length (100 days)"		label var staff_percapita "Staff per Legislator"		label var republican "Republican Legislator"		label var democrat "Democratic Legislator"		label var independent "Independent Legislator"		label var latino "Latino Legislator"		label var black "Black Legislator"		label var tr_latino "Latino Alias"		label var tr_black "Black Alias"	** Drop value recorded for respondents who saw a question but did not respond			replace cuttaxes=. if cuttaxes==-99		replace  frominterestgroup=. if frominterestgroup==-99 		replace  understands=. if understands==-99 		replace  strongposition=. if strongposition==-99 		** Uses the Legislator's own position to identify who got treatment letters that differed from their own opinion		gen pro_taxcuts=1 if cuttaxes==1 | cuttaxes==2 			replace pro_taxcuts=0 if cuttaxes==3 			replace pro_taxcuts=-1 if cuttaxes==4 | cuttaxes==5		gen neutral=0			replace neutral=1 if cuttaxes==3		gen shared_position=0 if pro_taxcut!=. 			replace shared_position=1 if pro_taxcu==1 & tr_suptaxcuts==1 | pro_taxcu==-1 & tr_suptaxcuts==0						label var shared_position "Shared Position"				**Results for Supplementary Materials*		** Table A1 in Supplementary Appendix			foreach iv in upper republican black latino female{								display "Percent of All Respondents who are `iv'"				tab `iv'								display "Percent of Self-Identified Legislators who are `iv'"				tab `iv' if isleg==1			}		*Limit the Sample to Legislators who had a position on the issue (because we cannot code the 'shared/opposed' treatment for legislators who are neutral				keep if isleg==1			drop if neutral==1								** Table A7. The Effect of Opinion Agreement and Race on Letter Ratings among White State Legislators					** Generate interactions for regression to calculate differences				gen tr_minority=tr_black+tr_latino				gen minority_match=tr_minority*shared_pos				gen black_match = tr_black*shared_pos				gen latino_match=tr_latino*shared_pos								label var tr_minority "Treatment: Minority Alias"				label var minority_match "Shared Position*Minority"				label var black_match "Shared Position*Black"				label var black_match "Shared Position*Latino"									reg frominterestgroup shared_pos tr_minority minority_match if neutral!=1 & minority==0				outreg2 using tableA07, dec(3) word se ctitle(Form Letter) label replace 						foreach dv in  strongposition understands{				reg `dv' shared_pos tr_minority minority_match if neutral!=1 & minority==0				outreg2 using tableA07, dec(3) word se ctitle(`dv') label append 				}					** Table A9. The Effect of Opinion Agreement on Letter Ratings by State Legislator Partisanship (restricted to Democrats and Republicans)			foreach dv in frominterestgroup strongposition understands{				bysort party: reg `dv' shared_pos if neutral!=1 & independent!=1				}							** Generate interactions for regression to calculate differences					gen rep_match=republican*shared_pos				label var rep_match "Shared Position*Republican"						reg frominterestgroup shared_pos republican rep_match if neutral!=1 & independent!=1 				outreg2 using tableA09, dec(3) word se ctitle(Form Letter) label replace 			foreach dv in  strongposition understands{				reg `dv' shared_pos republican rep_match if neutral!=1 & independent!=1 				outreg2 using tableA09, dec(3) word se ctitle(`dv') label append 				}						** Table A11. The Effect of Opinion Agreement on Letter Ratings – Legislators (OLS Regressions)			xi: reg frominterestgroup shared_pos democrat independent latino black tenure pop10K staff_percapita traveltime_dist length_session tr_latino tr_black				outreg2 using tableA11, dec(3) word se ctitle(Form Letter OLS) label replace 			xi: reg strongposition shared_pos democrat independent latino black tenure pop10K staff_percapita traveltime_dist length_session tr_latino tr_black				outreg2 using tableA11, dec(3) word se ctitle(Strong Position OLS) label append 			xi: reg understands shared_pos democrat independent latino black tenure  pop10K staff_percapita traveltime_dist length_session tr_latino tr_black				outreg2 using tableA11, dec(3) word se ctitle(Understand OLS) label append 		** Table A11. The Effect of Opinion Agreement on Letter Ratings – Legislators (Probit Regressions)			xi: probit frominterestgroup shared_pos democrat independent latino black tenure pop10K staff_percapita traveltime_dist length_session tr_latino tr_black				outreg2 using tableA11, dec(3) word se ctitle(Form Letter Probit) label append 			xi: probit strongposition shared_pos democrat independent latino black tenure pop10K staff_percapita traveltime_dist length_session tr_latino tr_black				outreg2 using tableA11, dec(3) word se ctitle(Strong Position Probit) label append 			xi: probit understands shared_pos democrat independent latino black tenure pop10K staff_percapita traveltime_dist length_session tr_latino tr_black				outreg2 using tableA11, dec(3) word se ctitle(Understand Probit) label append 	** Table A4. The Effect of Opinion Agreement on Letter Ratings among State Legislators. Saved results are used to create Figure 2.				**NOTE: the regsave command can be downloaded by running the following command: ssc install regsave		reg frominterestgroup shared_pos if neutral!=1			regsave shared_position using figure_legislators.dta, ci addlabel(group, 1, outcome, Form Letter) replace			outreg2 using tableA04, dec(3) word se ctitle(Form Letter) label replace 		reg strongposition shared_pos if neutral!=1			regsave shared_position using figure_legislators.dta, ci addlabel(group, 3, outcome, Strong Position) append			outreg2 using tableA04, dec(3) word se ctitle(Strong Position) label append		reg understands shared_pos if neutral!=1			regsave shared_position using figure_legislators.dta, ci addlabel(group, 5, outcome, Complexity) append			outreg2 using tableA04, dec(3) word se ctitle(Understand) label append 	** Figure 2. The Effect of Opinion Agreement on Letter Ratings among State Legislators				use "figure_legislators.dta", clear		expand 2		bysort group: gen aa=_n		gen ci_graph=ci_lower if aa==1			replace ci_graph=ci_upper if aa==2					#delimit;		twoway 			(line group ci_graph if group==5, lcolor(black)) (line group ci_graph if group==3, lcolor(black)) 			(line group ci_graph if group==1, lcolor(black)) (scatter group coef , mcolor(black) msize(medsmall)), 			text(1.75 .035 `""This letter was likely a form letter sent by an interest group.""') 			text(3.75 -.002 `""The writer likely holds this position strongly.""')  			text(5.75 .002 `""The writer likely understands the complexities of this issue.""')			xline(0, lcolor(gs7) lpattern(dot)) graphregion(fcolor(white) lcolor(white) ifcolor(white) ilcolor(white)) legend(off)			ysc(r(6)) ylabel(none, nogrid) ytitle("") xlabel(,nogrid)			xtitle("Difference In Propotion of Respondents who Agreed with" "Statement Across Vignette Conditions" "(Shared Position - Opposed Position)") ;		#delimit cr;							graph export "figure2.png", height(3000) replace		graph export "figure2.eps",  replace******************************************************* STUDY 2: Elected Local Policymakers			use "ButlerDynes_CityOfficials.dta", clear	** Clean up Variables		foreach dv in com_rate_1 com_rate_2 com_rate_3 com_rate_4{						** Drop value recorded for respondents who saw a question but did not respond				replace `dv'=. if `dv'==-99						replace `dv'=0 if `dv'==2			}		rename com_rate_1 form_letter		rename com_rate_2 understand_complex 		rename com_rate_3 strong_position		rename com_rate_4 facts				** Drop value recorded for respondents who saw a question but did not respond			replace npat_econ_29=. if npat_econ_29==-99			replace npat_econ_12=. if npat_econ_12==-99						replace letter_subject="consolidate_911" if issue911==1		replace letter_subject="vouchers_plain" if issuevouchers==1	**Control Variables		gen republican=0 if party!=.			replace republican=1 if party==1		gen democrat=0 if party!=.			replace democrat=1 if party==2		rename position_2 mayor			replace mayor=. if mayor==-99					replace income=. if income==-99 | income==10		gen inc_100K=0 if income!=. 			replace inc_100K=1 if income==8 | income==9				replace education=. if education==-99		gen ba_degree=0 if education!=.			replace ba_degree=1 if education>=5 & education<=7				gen female=0  if gender==1			replace female=1 if gender==2			gen white=0			replace white=1 if race==1			replace white=. if race==-99		replace libcon=. if libcon==-99		egen oppose=rowmax(com_j911_o com_e911_o com_a911_o com_m911_o)		egen support=rowmax(com_j911_s com_e911_s com_a911_s com_m911_s)			replace oppose=0 if support==1			replace support=0 if oppose==1			replace com_party=. if com_party==-99		gen know_party=0 if letter_subject=="vouchers_plain"		replace know_party=1 if letter_subject=="vouchers_party"		gen interaction=know_party*match				keep if party==1 | party==2		** Label variables			label var match_position "Shared Position"		label var republican "Republican Official"		label var know_party "Party Info Revealed"		label var mayor "Mayor"		label var female "Female"		label var white "White"		label var inc_100K "Income>=$100K"		label var ba_degree "College Degree"			**Results: Officials' Positions on Vouchers and Conslidating 911 Services		bysort party: summ npat_econ_29 npat_econ_12	**Table A3. City Officials’ Inferences about Writer’s Partisanship Based on Position		 tab com_party support if issue911==1, col chi2	**Results: Bivariate, no controls					foreach dv in form_letter strong_position understand_complex facts{			bysort letter_subject: reg `dv' match			}		foreach dv in form_letter strong_position understand_complex facts{			reg `dv' know_party match interaction			}			** Table A8. The Effect of Opinion Agreement and Race on Letter Ratings among City Officials		gen tr_minority=0			replace tr_minority=1 if constituent=="Jamal Washington" | constituent=="Jose Lopez"			gen minority_match=tr_minority*match			label var tr_minority "Minority Alias"			label var minority_match "Shared Position*Minority"				reg form_letter match tr_minority minority_match if letter_subject=="consolidate_911"			outreg2 using tableA08panelA, dec(3) word se ctitle(form_letter) label replace 				foreach dv in strong_position understand_complex facts{			reg `dv' match tr_minority minority_match if letter_subject=="consolidate_911"			outreg2 using tableA08panelA, dec(3) word se ctitle(`dv') label append 			}						reg form_letter match tr_minority minority_match if letter_subject=="vouchers_plain"			outreg2 using tableA08panelB, dec(3) word se ctitle(form_letter) label replace 				foreach dv in strong_position understand_complex facts {			reg `dv' match tr_minority minority_match if letter_subject=="vouchers_plain"			outreg2 using tableA08panelB, dec(3) word se ctitle(`dv') label append 			}					reg form_letter match tr_minority minority_match if letter_subject=="vouchers_party"			outreg2 using tableA08panelC, dec(3) word se ctitle(form_letter) label replace 				foreach dv in strong_position understand_complex facts {			reg `dv' match tr_minority minority_match if letter_subject=="vouchers_party"			outreg2 using tableA08panelC, dec(3) word se ctitle(`dv') label append 			}			** Table A10. The Effect of Opinion Agreement on Letter Ratings among City Officials		gen rep_match=republican*match		label var rep_match "Shared Position*Republican"				reg form_letter match republican rep_match if letter_subject=="consolidate_911"			outreg2 using tableA10panelA, dec(3) word se ctitle(form_letter) label replace 				foreach dv in strong_position understand_complex facts{			reg `dv' match republican rep_match  if letter_subject=="consolidate_911"			outreg2 using tableA10panelA, dec(3) word se ctitle(`dv') label append 			}						reg form_letter match republican  rep_match  if letter_subject=="vouchers_plain"			outreg2 using tableA10panelB, dec(3) word se ctitle(form_letter) label replace 				foreach dv in strong_position understand_complex facts {			reg `dv' match republican  rep_match  if letter_subject=="vouchers_plain"			outreg2 using tableA10panelB, dec(3) word se ctitle(`dv') label append 			}							reg form_letter match republican  rep_match  if letter_subject=="vouchers_party"			outreg2 using tableA10panelC, dec(3) word se ctitle(Form Letter) label replace 				foreach dv in strong_position understand_complex facts {			reg `dv' match republican  rep_match  if letter_subject=="vouchers_party"			outreg2 using tableA10panelC, dec(3) word se ctitle(`dv') label append 			}	** Table A5. Partisanship, Opinion Agreement, and Letter Ratings among Municipal Officials. Saved results are used to create Figure 4.				reg form_letter match if letter_subject=="consolidate_911"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 3, outcome, Form Letter, treatment, Consolidate 911) replace			outreg2 using tableA05panelA, dec(3) word se ctitle(form_letter) label replace		reg strong_position match if letter_subject=="consolidate_911"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 7, outcome, Form Letter, treatment, Consolidate 911) append			outreg2 using tableA05panelA, dec(3) word se ctitle(strong_position) label append		reg understand_complex match if letter_subject=="consolidate_911"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 15, outcome, Form Letter, treatment, Consolidate 911) append			outreg2 using tableA05panelA, dec(3) word se ctitle(understand_complex) label append		reg facts match if letter_subject=="consolidate_911"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 11, outcome, Form Letter, treatment, Consolidate 911) append			outreg2 using tableA05panelA, dec(3) word se ctitle(facts) label append					reg form_letter match if letter_subject=="vouchers_plain"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 2, outcome, Form Letter, treatment, Vouchers Plain) append			outreg2 using tableA05panelB, dec(3) word se ctitle(form_letter) label replace		reg strong_position match if letter_subject=="vouchers_plain"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 6, outcome, Form Letter, treatment, Vouchers Plain) append			outreg2 using tableA05panelB, dec(3) word se ctitle(strong_position) label append		reg understand_complex match if letter_subject=="vouchers_plain"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 14, outcome, Form Letter, treatment, Vouchers Plain) append			outreg2 using tableA05panelB, dec(3) word se ctitle(understand_complex) label append		reg facts match if letter_subject=="vouchers_plain"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 10, outcome, Form Letter, treatment, Vouchers Plain) append			outreg2 using tableA05panelB, dec(3) word se ctitle(facts) label append					reg form_letter match if letter_subject=="vouchers_party"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 1, outcome, Form Letter, treatment, Vouchers Party) append			outreg2 using tableA05panelC, dec(3) word se ctitle(form_letter) label replace		reg strong_position match if letter_subject=="vouchers_party"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 5, outcome, Form Letter, treatment, Vouchers Party) append			outreg2 using tableA05panelC, dec(3) word se ctitle(strong_position) label append		reg understand_complex match if letter_subject=="vouchers_party"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 13, outcome, Form Letter, treatment, Vouchers Party) append			outreg2 using tableA05panelC, dec(3) word se ctitle(understand_complex) label append		reg facts match if letter_subject=="vouchers_party"			regsave match_position using figure_cityofficials.dta, ci addlabel(group, 9, outcome, Form Letter, treatment, Vouchers Party) append			outreg2 using tableA05panelC, dec(3) word se ctitle(facts) label append			** Table A12. The Effect of Opinion Agreement on Letter Ratings – Municipal Officials, Issue = The Consolidation of 911 Services	** Table A13. The Effect of Opinion Agreement on Letter Ratings – Municipal Officials, Issue = School Vouchers, No Additional Information Provided	** Table A14. The Effect of Opinion Agreement on Letter Ratings – Municipal Officials, Issue = School Vouchers, Partisanship and Turnout Information Provided		**NOTE: these regressions use multiple imputation command to fill in the randomly missing values in the data set, as described in the section “Robustness Checks for Study 2 (Municipal Official Sample)” in the Appendix. The multiple imputation command fills in the missing values using random draws from a distribution. Thus, each time the analysis is run, the coefficients will vary slightly since. To prevent this, we specify the random number seed that Stata uses when running the multiple imputation command. (See line 398.) Please note, however, that the seed function used by the random-number functions was changed with Stata 12 such that users running earlier versions will get slightly different results even when specifying the same value of the random-number seed. The results presented in the Appendix were estimated using Stata 13.		** NOTE: In order to replicate the file, you need to open STATA and run it.  Close STATA completely and open it again in order to replicate the tables A12-A14 in the appendix. If you run the code twice without closing and re-opening Stata in between, the results will be different on the second run.		keep constituent_name form_letter strong_position understand_comp facts match republican mayor female white inc_100K ba_degree libcon prog_amb occupation letter_subject				keep if match!=.			gen const_black=0				replace const_black=1 if constituent_name=="Jamal Washington"			gen const_latino=0				replace const_latino=1 if constituent_name=="Jose Lopez"					label var const_latino "Latino Alias"					label var const_black "Black Alias"							mi set mlong			mi register imputed female inc_100K ba_degree			mi impute mvn female inc_100K ba_degree  =  republican mayor white , add(5)  force rseed(1221)		foreach let_issue in consolidate_911 vouchers_plain vouchers_party{					if "`let_issue'"=="consolidate_911" {				local table "tableA12"			}						else if "`let_issue'"=="vouchers_plain" {				local table "tableA13"			}						else if "`let_issue'"=="vouchers_party" {				local table "tableA14"			}			mi estimate, post: regress form_letter match republican mayor female white inc_100K ba_degree const_latino const_black if letter_subject=="`let_issue'"				outreg2 using `table', dec(3) word se ctitle(form_letter OLS) label replace 			mi estimate, post: logit form_letter match republican mayor female white inc_100K ba_degree const_latino const_black if letter_subject=="`let_issue'"				outreg2 using `table', dec(3) word se ctitle(form_letter Logit) label append 		}		foreach let_issue in consolidate_911 vouchers_plain vouchers_party{			foreach dv in strong_position understand_complex facts {							if "`let_issue'"=="consolidate_911" {					local table "tableA12"				}								else if "`let_issue'"=="vouchers_plain" {					local table "tableA13"				}								else if "`let_issue'"=="vouchers_party" {					local table "tableA14"				}							mi estimate, post: regress `dv' match republican mayor female white inc_100K ba_degree const_latino const_black if letter_subject=="`let_issue'"					outreg2 using `table', dec(3) word se ctitle(`dv' OLS) label append 				mi estimate, post: logit `dv' match republican mayor female white inc_100K ba_degree const_latino const_black if letter_subject=="`let_issue'"					outreg2 using `table', dec(3) word se ctitle(`dv' Logit) label append 			}		}		** Figure 4. Disagreement Discounting Among City Officials				use "figure_cityofficials.dta", clear		expand 2		bysort group: gen aa=_n		gen ci_graph=ci_lower if aa==1			replace ci_graph=ci_upper if aa==2						#delimit;			twoway 				(line group ci_graph if group==1, lcolor(black)) (line group ci_graph if group==2, lcolor(black)) 				(line group ci_graph if group==3, lcolor(black)) (line group ci_graph if group==5, lcolor(black)) 				(line group ci_graph if group==6, lcolor(black)) (line group ci_graph if group==7, lcolor(black)) 				(line group ci_graph if group==9, lcolor(black)) (line group ci_graph if group==10, lcolor(black)) 				(line group ci_graph if group==11, lcolor(black)) (line group ci_graph if group==13, lcolor(black)) 				(line group ci_graph if group==14, lcolor(black)) (line group ci_graph if group==15, lcolor(black)) 				(scatter group coef , mcolor(black) msize(medsmall)), 				xline(0, lcolor(gs7) lpattern(dot))				graphregion(fcolor(white) lcolor(white) ifcolor(white) ilcolor(white)) legend(off)				text(3.75 -.014 `""This letter was likely a form letter sent by an interest group.""') 				text(7.75 -.01 `""The writer likely holds this position strongly.""')  				text(11.75 -.014 `""The writer likely based his opinions on facts.""')				text(15.75 -.014 `""The writer likely understands the complexities of this issue.""')				ysc(r(16)) ylabel(none) ytitle("") 				xlabel(-.3(.15).3,nogrid)				ylabel(15 "911 Consolidation" 14 "Vouchers - Plain" 13 "Vouchers - Party" 11 "911 Consolidation" 10 "Vouchers - Plain" 9 "Vouchers - Party" 7 "911 Consolidation" 6 "Vouchers - Plain" 5 "Vouchers - Party" 3 "911 Consolidation" 2 "Vouchers - Plain" 1 "Vouchers - Party", angle(horizontal) nogrid)				xtitle("Difference In Propotion of Respondents who Agreed with" "Statement Across Vignette Conditions" "(Shared Position - Opposed Position)") ;		#delimit cr;						graph export "figure4.png", height(3000) replace		graph export "figure4.eps",  replace******************************************************* STUDY 3: Voters / Amazon Mechanical Turk Sample		clear all	use "ButlerDynes_MTurkSurvey.dta"		**NOTE: Respondents written responses may be cut off in Stata due to character limits in string variables but their full written responses are retained in the corresponding csv file.				**Generate variables for analysis			**Generate respondents' issue positions			**For variables with "pos_tax_" prefix, 1="Strongly Disagree" and 5="Strongly Agree"			gen pos_cuttax = .			replace pos_cuttax = 1 if pos_tax_1==5 | pos_tax_1==4			replace pos_cuttax = 0 if pos_tax_1==1 | pos_tax_1==2			label var pos_cuttax "1=agrees w/ cutting taxes 0=disagrees"			gen pos_moremonitor = .			replace pos_moremonitor = 1 if pos_tax_4==5 | pos_tax_1==4			replace pos_moremonitor = 0 if pos_tax_4==1 | pos_tax_1==2			label var pos_moremonitor "1=agrees w/ more monitoring of comms 0=disagrees"							gen pos_prounions = .			replace pos_prounions = 1 if pos_tax_2==5 | pos_tax_1==4			replace pos_prounions = 0 if pos_tax_2==1 | pos_tax_1==2			label var pos_prounions "1=agrees w/ recognizing civil unions 0=disagrees"						gen pos_toomuchtv = .			replace pos_toomuchtv = 1 if pos_tax_3==5 | pos_tax_1==4			replace pos_toomuchtv = 0 if pos_tax_3==1 | pos_tax_1==2			label var pos_toomuchtv "1=agrees Americans watch too much tv 0=disagrees"									gen pos_paidattention = .			replace pos_paidattention = 1 if pos_tax_5==5			replace pos_paidattention = 0 if pos_tax_5!=5 			label var pos_paidattention "1=passed attention check 0=failed"		**Generate treatment assignments			gen write_tax=.			replace write_tax=1 if exp_tax==1			replace write_tax=0 if exp_tax==.			label var write_tax "Write: Tax Position"						gen write_monitor=.			replace write_monitor=1 if exp_monit==1			replace write_monitor=0 if exp_monit==.			label var write_monitor "Write: Privacy Position"						gen write_tv=.			replace write_tv=1 if exp_contro==1			replace write_tv=0 if exp_contro==.				label var write_tv "Write: TV Show"							gen letter_cuttax=.			replace letter_cuttax=1 if ltr_atx_m==1  //atx = anti-taxes, or pro-tax cuts			replace letter_cuttax=0 if ltr_ptx_m==1  //ptx = pro-taxes, or anti-tax cuts			label var letter_cuttax "1=saw pro-tax cut letter 0=saw anti-tax cut"		**Generate outcome variables			**For variables with the "ltr_eval_" prefix, 1="Likely" and 2="Unlikely					gen letter_form=.			replace letter_form=1 if ltr_eval_1==1			replace letter_form=0 if ltr_eval_1==2			label var letter_form "1=likely that this was a form letter 0=unlikely"			gen letter_complex=.			replace letter_complex=1 if ltr_eval_2==1			replace letter_complex=0 if ltr_eval_2==2			label var letter_complex "1=likely writer understands complexity 0=unlikely"			gen letter_strong=.			replace letter_strong=1 if ltr_eval_3==1			replace letter_strong=0 if ltr_eval_3==2			label var letter_strong "1=likely writer holds position strongly 0=unlikely"					**Generate variable indicating agreement			gen agree = .			replace agree = 1 if pos_cuttax==1 & letter_cuttax==1			replace agree = 1 if pos_cuttax==0 & letter_cuttax==0			replace agree = 0 if pos_cuttax==1 & letter_cuttax==0			replace agree = 0 if pos_cuttax==0 & letter_cuttax==1			label var agree "Shared Position"					**Generate interaction variables to estimate difference-in-differences			gen agreeXtax = agree * write_tax			gen agreeXmonitor = agree * write_monitor				label var agreeXtax "Shared Position*Tax" 				label var agreeXmonitor "Shared Position*Privacy" 						**DROP those who failed attention check		drop if pos_paidattention==0		drop pos_paidattention		** Table A6. The Effect of Opinion Agreement and the Writing Treatment Condition on Letter Ratings among U.S. Adults. Saved results are used to create Figure 5				**NOTE: the regsave command can be downloaded by running the following command: ssc install regsave		** Panel A: Defend Tax Positon Writing Condition					reg letter_form agree if write_tax==1				regsave agree using figure_voters.dta, ci addlabel(group, 3, treatment, Tax, outcome, Form Letter) replace				outreg2 using tableA06panelA, dec(3) word se ctitle(Form Letter) label replace 						reg letter_strong agree if write_tax==1				regsave agree using figure_voters.dta, ci addlabel(group, 7, treatment, Tax, outcome, Strong Position) append				outreg2 using tableA06panelA, dec(3) word se ctitle(Strong Position) label append 			reg letter_complex agree if write_tax==1				regsave agree using figure_voters.dta, ci addlabel(group, 11, treatment, Tax, outcome, Complexity) append				outreg2 using tableA06panelA, dec(3) word se ctitle(Understands Complexity) label append					** Panel B: Defend Privacy Positon Writing Condition			reg letter_form agree if write_monitor==1				regsave agree using figure_voters.dta, ci addlabel(group, 2, treatment, Monitor, outcome, Form Letter) append				outreg2 using tableA06panelB, dec(3) word se ctitle(Form Letter) label replace 			reg letter_strong agree if write_monitor==1				regsave agree using figure_voters.dta, ci addlabel(group, 6, treatment, Monitor, outcome, Strong Position) append				outreg2 using tableA06panelB, dec(3) word se ctitle(Strong Position) label append 			reg letter_complex agree if write_monitor==1				regsave agree using figure_voters.dta, ci addlabel(group, 10, treatment, Monitor, outcome, Complexity) append				outreg2 using tableA06panelB, dec(3) word se ctitle(Understands Complexity) label append 		** Panel C: Favorite TV Show Writing Condition					reg letter_form agree if write_tv==1				regsave agree using figure_voters.dta, ci addlabel(group, 1, treatment, TV, outcome, Form Letter) append				outreg2 using tableA06panelC, dec(3) word se ctitle(Form Letter) label replace			reg letter_strong agree if write_tv==1				regsave agree using figure_voters.dta, ci addlabel(group, 5, treatment, TV, outcome, Strong Position) append				outreg2 using tableA06panelC, dec(3) word se ctitle(Strong Position) label append			reg letter_complex agree if write_tv==1				regsave agree using figure_voters.dta, ci addlabel(group, 9, treatment, TV, outcome, Complexity) append				outreg2 using tableA06panelC, dec(3) word se ctitle(Understands Complexity) label append				** Panel D: Pooled results (Defend Privacy Position and Favorite TV Show Writing Conditions)			reg letter_form agree if write_tv==1 | write_monitor==1				outreg2 using tableA06panelD, dec(3) word se ctitle(Form Letter) label replace			reg letter_strong agree if write_tv==1 | write_monitor==1				outreg2 using tableA06panelD, dec(3) word se ctitle(Strong Position) label append 							reg letter_complex agree if write_tv==1 | write_monitor==1				outreg2 using tableA06panelD, dec(3) word se ctitle(Understands Complexity) label append 		** Panel E: Regressions to estimate the difference-in-differences			**NOTE: the coefficient on the interaction term (agreeXtax, labeled as "Shared Position*Tax" in the exported results) provides the estimate of the difference-in-differences displayed in Panel E of Table A6					**Diff-in-Diff of Panel A - Panel B				reg letter_form agree write_tax agreeXtax if write_tax==1 | write_monitor==1					outreg2 using tableA06panelE_A-B, dec(3) word se ctitle(Form Letter) label replace				reg letter_strong agree write_tax agreeXtax if write_tax==1 | write_monitor==1					outreg2 using tableA06panelE_A-B, dec(3) word se ctitle(Strong Position) label append 								reg letter_complex agree write_tax agreeXtax if write_tax==1 | write_monitor==1					outreg2 using tableA06panelE_A-B, dec(3) word se ctitle(Understands Complexity) label append 								**Diff-in-Diff of Panel A - Panel C				reg letter_form agree write_tax agreeXtax if write_tax==1 | write_tv==1					outreg2 using tableA06panelE_A-C, dec(3) word se ctitle(Form Letter) label replace				reg letter_strong agree write_tax agreeXtax if write_tax==1 | write_tv==1					outreg2 using tableA06panelE_A-C, dec(3) word se ctitle(Strong Position) label append 								reg letter_complex agree write_tax agreeXtax if write_tax==1 | write_tv==1					outreg2 using tableA06panelE_A-C, dec(3) word se ctitle(Understands Complexity) label append								**Diff-in-Diff of Panel A - Panel D				reg letter_form agree write_tax agreeXtax 					outreg2 using tableA06panelE_A-D, dec(3) word se ctitle(Form Letter) label replace				reg letter_strong agree write_tax agreeXtax 					outreg2 using tableA06panelE_A-D, dec(3) word se ctitle(Strong Position) label append 								reg letter_complex agree write_tax agreeXtax					outreg2 using tableA06panelE_A-D, dec(3) word se ctitle(Understands Complexity) label append 							**CREATE Figure 5			use "figure_voters.dta", clear			expand 2			bysort group: gen aa=_n			gen ci_graph=ci_lower if aa==1				replace ci_graph=ci_upper if aa==2			#delimit;				twoway 					(line group ci_graph if group==11, lcolor(black)) 					(line group ci_graph if group==10, lcolor(black)) 					(line group ci_graph if group==9, lcolor(black)) 					(line group ci_graph if group==7, lcolor(black)) 					(line group ci_graph if group==6, lcolor(black)) 					(line group ci_graph if group==5, lcolor(black))							(line group ci_graph if group==3, lcolor(black)) 					(line group ci_graph if group==2, lcolor(black)) 					(line group ci_graph if group==1, lcolor(black))							(scatter group coef , mcolor(black) msize(medsmall))					, 					text(3.75 .15 `""This letter was likely a form letter sent by an interest group.""') 					text(7.75 .15 `""The writer likely holds this position strongly.""')  					text(11.75 .15 `""The writer likely understands the complexities of this issue.""')					xline(0, lcolor(gs7) lpattern(dot))					graphregion(fcolor(white) lcolor(white) ifcolor(white) ilcolor(white)) legend(off)					ysc(r(12)) ylabel(11 "Tax" 10 "Privacy" 9 "TV" 7 "Tax" 6 "Privacy" 5 "TV" 3 "Tax" 2 "Privacy" 1 "TV", angle(horizontal)  nogrid) ytitle("") 					xlabel(,nogrid)					xtitle("Difference In Propotion of Respondents who Agreed with" "Statement Across Vignette Conditions" "(Shared Position - Opposed Position)") ;			#delimit cr;				graph export "figure5.png", height(3000) replace				graph export "figure5.eps",  replace								************THE END**************			