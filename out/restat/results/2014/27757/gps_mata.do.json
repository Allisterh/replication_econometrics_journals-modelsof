[
  {
    "id": "comment",
    "value": "* GPS_MATA.DO",
    "line": 1,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*",
    "line": 2,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* GPS Estimation Mata Function ",
    "line": 3,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* (Compiled for execution purposes)",
    "line": 4,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*",
    "line": 5,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Mata function to calculate GPS conditional on covariates (xcvar, xdisc) of variable tvar, ",
    "line": 6,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* plus evaluated (predicted) at all points between tmin and tmax, creating temporary variables (stored in local macros ",
    "line": 7,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* gps_suffix, for actual gps, and gps_suffix_tmin to gps_suffix_tmax for the predicted values of GPS at tmin to tmax)",
    "line": 8,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*",
    "line": 9,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Function written for Flores, Carlos A. and Oscar A. Mitnik (2013). ",
    "line": 10,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* \"Comparing Treatments across Labor Markets: An Assessment of Nonexperimental Multiple-Treatment Strategies\",",
    "line": 11,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Review of Economics and Statistics, December 2013, Vol. 95, No. 5, Pages 1691-1707.",
    "line": 12,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*",
    "line": 13,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Version: March 2011 ",
    "line": 14,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*",
    "line": 15,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* THE DEFAULT FOR GPS ESTIMATION IS A MULTINOMIAL LOGIT\tMODEL",
    "line": 16,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*",
    "line": 17,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Inputs for the function are",
    "line": 18,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* tvar             = treatment variable (for which the GPS is calculated)",
    "line": 19,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* tvar_cat         = categories of treatment var (based on which overlap is determined)",
    "line": 20,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* xvar             = variables used in estimating the GPS model",
    "line": 21,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* gps_suffix       = string with the name of the gps variable",
    "line": 22,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* apply_overlap    = 0 or 1, =0, nothing happens, =1 implies that overlap conditions, as specified by ",
    "line": 23,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t\t\t\t\t\t\t options ovlp_value, ovlp_pooled and ovlp_one_tail are applied",
    "line": 24,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* ovlp_value       = Value that will be used to create overlap variable. If option ovlp_pooled=1, then the comparison",
    "line": 25,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t               is based on the individuals treated at a certain level, vs not treaed at that level. If ovlp_pooled=0, then ",
    "line": 26,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* \t\t\t\t           the comparison is each treament level against each of the others, one-by-one.",
    "line": 27,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t                   When ovlp_value=0, creates one variable for overlap. When ovlp_value>0, creates in addition to the based on 0,",
    "line": 28,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t             one based on the particular percentile requested.",
    "line": 29,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*                  = 0 means that across all the distributions only individuals above the max(min gps) and below",
    "line": 30,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*                    the min(max gps) are considered as \"overlap\"=1 ",
    "line": 31,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*    \t\t             (a variable under macro name gps_suffix_ovlp will be created in this case)",
    "line": 32,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*                    >0 means the same applied on percentiles (gps>max(percentile gps) and gps<min(percentile gps)",
    "line": 33,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t               (in this case, creates an additional variable under macro name gps_suffix_ovlp_p)",
    "line": 34,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t               Percentiles are defined in the [0,1] interval",
    "line": 35,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*                    Example: ovlp_value=0.01 will use the .01 and .99 percentiles to determine cutoff points",
    "line": 36,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* ovlp_pooled\t    =  Define whether overlap will be based ",
    "line": 37,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*                    on treatment-level-by-treatment-level, or based on a treatment vs all other treatments pooled",
    "line": 38,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* \t\t\t\t           0=not pooled, 1=pooled",
    "line": 39,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t             Note, pooled~ \"weak unconfoundedness\"; not pooled ~ \"strong unconfoundedness\"",
    "line": 40,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* ovlp_one_tail    = For the above definitions of overlap only use the lower tails of the distributions instead of the lower and ",
    "line": 41,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t             upper tail",
    "line": 42,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t             0 = two-tails, 1= lower-tail",
    "line": 43,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* touse            = variable that containts 1 for observations that will be used in calculations, 0 o/w",
    "line": 44,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* mprobit          = indicator =0 (default) for estimating GPS with a multinomial logit, =1 for estimating GPS with a multinomial probit",
    "line": 45,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* ologit\t\t\t\t\t = indicator =0 (default) for estimating GPS with a multinomial logit, =1 for estimating GPS with an ordered logit model",
    "line": 46,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* gmm              = indicator =0 (default) for estimating GPS with a multinomial logit, =1 for estimating GPS with a GMM model",
    "line": 47,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* gmm_method\t\t\t = only if glm=1, indicate gmm method. There are four options:",
    "line": 48,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t\t\t\t\t\t\t - mlogit_gmm: for estimating GPS with a standard multinomial logit model but by GMM",
    "line": 49,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t\t\t\t\t\t\t - mlogit_ipt: for estimating mltinomial logit model by GMM and imposing perfect balancing conditions (IPT)",
    "line": 50,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t\t\t\t\t\t\t - logit_ipt:  for estimating GPS by GMM, using a system of binary logit models for each treatment category,",
    "line": 51,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t\t\t\t\t\t\t\t imposing perfect balancing conditions ",
    "line": 52,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t\t\t\t\t\t\t - indiv_logit_ipt: for estimating GPS by GMM, using a series of one-by-one logit models for each treatment category,",
    "line": 53,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*                      imposing perfect balancing conditions",
    "line": 54,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t\t\t\t\t\t   NOTE: estimating with logit_ipt or indiv_logit_ipt should give the same results, but with a large number of treatment",
    "line": 55,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*\t\t\t\t\t\t\t\t\t\t       categories, indiv_logit_ipt may be faster",
    "line": 56,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* glm              = indicator =0 (default) for estimating GPS with a multinomial logit, =1 for estimating GPS with a GLM model",
    "line": 57,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* glm_family\t\t\t = only if glm=1, indicate glm family",
    "line": 58,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* glm_link   \t\t\t = only if glm=1, indicate link",
    "line": 59,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* glm_options      = options for glm estimation\t\t\t ",
    "line": 60,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*",
    "line": 61,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* To run the function, in Stata write: ",
    "line": 62,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* mata: gps(\"tvar\", \"tvar_cat\", \"xvar\", \"gps_suffix\", apply_overlap, ovlp_pooled, ovlp_value, ovlp_one_tail,  \"`touse'\",  mprobit, ologit, gmm, \"gmm_method\", glm, \"glm_family\", \"glm_link\", \"glm_options\")",
    "line": 63,
    "column": 1
  },
  {
    "command": {
      "id": "number",
      "value": "11.1",
      "line": 65,
      "column": 9
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "version",
          "line": 65,
          "column": 1
        }
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mata",
      "line": 66,
      "column": 1
    },
    "varlist": [
      {
        "id": ":",
        "value": ":",
        "line": 66,
        "column": 5
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "void",
      "line": 67,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "function",
        "line": 67,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 67,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "string",
        "line": 67,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "tvar",
        "line": 67,
        "column": 26
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "string",
        "line": 67,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "tvar_cat",
        "line": 67,
        "column": 39
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 47
      },
      {
        "id": "identifier",
        "value": "string",
        "line": 67,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 67,
        "column": 56
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 60
      },
      {
        "id": "identifier",
        "value": "string",
        "line": 67,
        "column": 62
      },
      {
        "id": "identifier",
        "value": "gps_suffix",
        "line": 67,
        "column": 69
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 79
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 67,
        "column": 81
      },
      {
        "id": "identifier",
        "value": "apply_overlap",
        "line": 67,
        "column": 88
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 101
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 67,
        "column": 103
      },
      {
        "id": "identifier",
        "value": "ovlp_pooled",
        "line": 67,
        "column": 110
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 121
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 67,
        "column": 123
      },
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 67,
        "column": 130
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 140
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 67,
        "column": 141
      },
      {
        "id": "identifier",
        "value": "ovlp_one_tail",
        "line": 67,
        "column": 148
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 161
      },
      {
        "id": "|",
        "value": "|",
        "line": 67,
        "column": 163
      },
      {
        "id": "identifier",
        "value": "string",
        "line": 67,
        "column": 165
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 67,
        "column": 172
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 67,
        "column": 179
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 184
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 67,
        "column": 186
      },
      {
        "id": "identifier",
        "value": "mprobit",
        "line": 67,
        "column": 193
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 200
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 67,
        "column": 202
      },
      {
        "id": "identifier",
        "value": "ologit",
        "line": 67,
        "column": 209
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 215
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 67,
        "column": 217
      },
      {
        "id": "identifier",
        "value": "gmm",
        "line": 67,
        "column": 224
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 227
      },
      {
        "id": "identifier",
        "value": "string",
        "line": 67,
        "column": 229
      },
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 67,
        "column": 236
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 246
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 67,
        "column": 248
      },
      {
        "id": "identifier",
        "value": "glm",
        "line": 67,
        "column": 255
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 258
      },
      {
        "id": "identifier",
        "value": "string",
        "line": 67,
        "column": 260
      },
      {
        "id": "identifier",
        "value": "glm_family",
        "line": 67,
        "column": 267
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 277
      },
      {
        "id": "identifier",
        "value": "string",
        "line": 67,
        "column": 279
      },
      {
        "id": "identifier",
        "value": "glm_link",
        "line": 67,
        "column": 286
      },
      {
        "id": ",",
        "value": ",",
        "line": 67,
        "column": 294
      },
      {
        "id": "identifier",
        "value": "string",
        "line": 67,
        "column": 296
      },
      {
        "id": "identifier",
        "value": "glm_options",
        "line": 67,
        "column": 303
      }
    ]
  },
  {
    "command": {
      "id": "{",
      "value": "{",
      "line": 68,
      "column": 1
    }
  },
  {
    "id": "comment",
    "value": "// If `touse' is not defined",
    "line": 69,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 70,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "strlen",
        "line": 70,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 70,
        "column": 13
      },
      {
        "id": "==",
        "value": "==",
        "line": 70,
        "column": 19
      },
      {
        "id": "number",
        "value": "0",
        "line": 70,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "tousest",
        "line": 70,
        "column": 24
      }
    ],
    "=": [
      {
        "id": "string",
        "value": "\"\"",
        "line": 70,
        "column": 32
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 71,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tousest",
        "line": 71,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "string",
        "value": "\" if \"",
        "line": 71,
        "column": 15
      },
      {
        "id": "+",
        "value": "+",
        "line": 71,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 71,
        "column": 24
      },
      {
        "id": "+",
        "value": "+",
        "line": 71,
        "column": 30
      },
      {
        "id": "string",
        "value": "\"==1\"",
        "line": 71,
        "column": 32
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Gets data as views",
    "line": 73,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "t",
      "line": 74,
      "column": 2
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 74,
        "column": 4
      },
      {
        "id": "number",
        "value": "0",
        "line": 74,
        "column": 6
      },
      {
        "id": ",",
        "value": ",",
        "line": 74,
        "column": 7
      },
      {
        "id": "number",
        "value": "0",
        "line": 74,
        "column": 8
      },
      {
        "id": ",",
        "value": ",",
        "line": 74,
        "column": 9
      },
      {
        "id": "number",
        "value": "0",
        "line": 74,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_view",
      "line": 75,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "t",
        "line": 75,
        "column": 10
      },
      {
        "id": ",",
        "value": ",",
        "line": 75,
        "column": 11
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 75,
        "column": 12
      },
      {
        "id": ",",
        "value": ",",
        "line": 75,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "tokens",
        "line": 75,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "tvar",
        "line": 75,
        "column": 21
      },
      {
        "id": ",",
        "value": ",",
        "line": 75,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 75,
        "column": 27
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "t_cat",
      "line": 76,
      "column": 2
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 76,
        "column": 8
      },
      {
        "id": "number",
        "value": "0",
        "line": 76,
        "column": 10
      },
      {
        "id": ",",
        "value": ",",
        "line": 76,
        "column": 11
      },
      {
        "id": "number",
        "value": "0",
        "line": 76,
        "column": 12
      },
      {
        "id": ",",
        "value": ",",
        "line": 76,
        "column": 13
      },
      {
        "id": "number",
        "value": "0",
        "line": 76,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_view",
      "line": 77,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 77,
        "column": 10
      },
      {
        "id": ",",
        "value": ",",
        "line": 77,
        "column": 15
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 77,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 77,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "tokens",
        "line": 77,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "tvar_cat",
        "line": 77,
        "column": 25
      },
      {
        "id": ",",
        "value": ",",
        "line": 77,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 77,
        "column": 35
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Information on the treatment and the sample",
    "line": 79,
    "column": 2
  },
  {
    "id": "comment",
    "value": "// tval is a vector with all the distinct values of t",
    "line": 80,
    "column": 43
  },
  {
    "command": {
      "id": "identifier",
      "value": "ft",
      "line": 80,
      "column": 2
    },
    "=": [
      {
        "id": "identifier",
        "value": "mm_freq",
        "line": 80,
        "column": 5
      },
      {
        "id": "identifier",
        "value": "t",
        "line": 80,
        "column": 13
      },
      {
        "id": ",",
        "value": ",",
        "line": 80,
        "column": 14
      },
      {
        "id": "number",
        "value": "1",
        "line": 80,
        "column": 15
      },
      {
        "id": ",",
        "value": ",",
        "line": 80,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 80,
        "column": 17
      },
      {
        "id": "=",
        "value": "=",
        "line": 80,
        "column": 21
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 80,
        "column": 22
      }
    ]
  },
  {
    "id": "comment",
    "value": "// tnr has the total number of treatments",
    "line": 81,
    "column": 43
  },
  {
    "command": {
      "id": "identifier",
      "value": "tnr",
      "line": 81,
      "column": 2
    },
    "=": [
      {
        "id": "identifier",
        "value": "rows",
        "line": 81,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "ft",
        "line": 81,
        "column": 11
      }
    ]
  },
  {
    "id": "comment",
    "value": "// t_ctval is a vector with all the distinct values of t_cat",
    "line": 82,
    "column": 45
  },
  {
    "command": {
      "id": "identifier",
      "value": "ft_cat",
      "line": 82,
      "column": 2
    },
    "=": [
      {
        "id": "identifier",
        "value": "mm_freq",
        "line": 82,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 82,
        "column": 17
      },
      {
        "id": ",",
        "value": ",",
        "line": 82,
        "column": 22
      },
      {
        "id": "number",
        "value": "1",
        "line": 82,
        "column": 23
      },
      {
        "id": ",",
        "value": ",",
        "line": 82,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "t_catval",
        "line": 82,
        "column": 25
      },
      {
        "id": "=",
        "value": "=",
        "line": 82,
        "column": 33
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 82,
        "column": 34
      }
    ]
  },
  {
    "id": "comment",
    "value": "// t_catnr has the total number of treatment categories",
    "line": 83,
    "column": 43
  },
  {
    "command": {
      "id": "identifier",
      "value": "t_catnr",
      "line": 83,
      "column": 2
    },
    "=": [
      {
        "id": "identifier",
        "value": "rows",
        "line": 83,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "ft_cat",
        "line": 83,
        "column": 15
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Size of the sample",
    "line": 85,
    "column": 47
  },
  {
    "command": {
      "id": "=",
      "value": "=",
      "line": 85,
      "column": 3
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "n",
          "line": 85,
          "column": 2
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "rows",
        "line": 85,
        "column": 4
      },
      {
        "id": "identifier",
        "value": "t",
        "line": 85,
        "column": 9
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Estimate mlogit (default), mprobit or ologit models for GPS (all using maximum likelihood)",
    "line": 87,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 88,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gmm",
        "line": 88,
        "column": 6
      },
      {
        "id": "==",
        "value": "==",
        "line": 88,
        "column": 9
      },
      {
        "id": "number",
        "value": "0",
        "line": 88,
        "column": 11
      },
      {
        "id": "&",
        "value": "&",
        "line": 88,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "glm",
        "line": 88,
        "column": 15
      },
      {
        "id": "==",
        "value": "==",
        "line": 88,
        "column": 18
      },
      {
        "id": "number",
        "value": "0",
        "line": 88,
        "column": 20
      },
      {
        "id": "{",
        "value": "{",
        "line": 88,
        "column": 23
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Estimate GPS with multinomial logit as default (base outcome is the minimum value of the treatment)",
    "line": 89,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// or multinomial probit or ologit if specified",
    "line": 90,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 91,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mprobit",
        "line": 91,
        "column": 7
      },
      {
        "id": "==",
        "value": "==",
        "line": 91,
        "column": 14
      },
      {
        "id": "number",
        "value": "1",
        "line": 91,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "stata",
        "line": 91,
        "column": 19
      },
      {
        "id": "string",
        "value": "\"mprobit \"",
        "line": 91,
        "column": 25
      },
      {
        "id": "+",
        "value": "+",
        "line": 91,
        "column": 36
      },
      {
        "id": "identifier",
        "value": "tvar",
        "line": 91,
        "column": 38
      },
      {
        "id": "+",
        "value": "+",
        "line": 91,
        "column": 43
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 91,
        "column": 45
      },
      {
        "id": "+",
        "value": "+",
        "line": 91,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 91,
        "column": 52
      },
      {
        "id": "+",
        "value": "+",
        "line": 91,
        "column": 58
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 91,
        "column": 60
      },
      {
        "id": "+",
        "value": "+",
        "line": 91,
        "column": 64
      },
      {
        "id": "identifier",
        "value": "tousest",
        "line": 91,
        "column": 66
      },
      {
        "id": "+",
        "value": "+",
        "line": 91,
        "column": 74
      },
      {
        "id": "string",
        "value": "\", baseoutcome(\"",
        "line": 91,
        "column": 76
      },
      {
        "id": "+",
        "value": "+",
        "line": 91,
        "column": 93
      },
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 91,
        "column": 95
      },
      {
        "id": "identifier",
        "value": "min",
        "line": 91,
        "column": 105
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 91,
        "column": 109
      },
      {
        "id": "+",
        "value": "+",
        "line": 91,
        "column": 116
      },
      {
        "id": "string",
        "value": "\") difficult technique(nr bhhh dfp bfgs)\"",
        "line": 91,
        "column": 118
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 92,
      "column": 3
    },
    "if": [
      {
        "id": "identifier",
        "value": "ologit",
        "line": 92,
        "column": 12
      },
      {
        "id": "==",
        "value": "==",
        "line": 92,
        "column": 18
      },
      {
        "id": "number",
        "value": "1",
        "line": 92,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "stata",
        "line": 92,
        "column": 23
      },
      {
        "id": "string",
        "value": "\"ologit \"",
        "line": 92,
        "column": 29
      },
      {
        "id": "+",
        "value": "+",
        "line": 92,
        "column": 39
      },
      {
        "id": "identifier",
        "value": "tvar",
        "line": 92,
        "column": 41
      },
      {
        "id": "+",
        "value": "+",
        "line": 92,
        "column": 46
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 92,
        "column": 48
      },
      {
        "id": "+",
        "value": "+",
        "line": 92,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 92,
        "column": 55
      },
      {
        "id": "+",
        "value": "+",
        "line": 92,
        "column": 61
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 92,
        "column": 63
      },
      {
        "id": "+",
        "value": "+",
        "line": 92,
        "column": 67
      },
      {
        "id": "identifier",
        "value": "tousest",
        "line": 92,
        "column": 69
      },
      {
        "id": "+",
        "value": "+",
        "line": 92,
        "column": 77
      },
      {
        "id": "string",
        "value": "\", difficult technique(nr bhhh dfp bfgs)\"",
        "line": 92,
        "column": 79
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 93,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "stata",
        "line": 93,
        "column": 8
      },
      {
        "id": "string",
        "value": "\"mlogit \"",
        "line": 93,
        "column": 14
      },
      {
        "id": "+",
        "value": "+",
        "line": 93,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "tvar",
        "line": 93,
        "column": 26
      },
      {
        "id": "+",
        "value": "+",
        "line": 93,
        "column": 31
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 93,
        "column": 33
      },
      {
        "id": "+",
        "value": "+",
        "line": 93,
        "column": 37
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 93,
        "column": 40
      },
      {
        "id": "+",
        "value": "+",
        "line": 93,
        "column": 46
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 93,
        "column": 48
      },
      {
        "id": "+",
        "value": "+",
        "line": 93,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "tousest",
        "line": 93,
        "column": 54
      },
      {
        "id": "+",
        "value": "+",
        "line": 93,
        "column": 62
      },
      {
        "id": "string",
        "value": "\", baseoutcome(\"",
        "line": 93,
        "column": 64
      },
      {
        "id": "+",
        "value": "+",
        "line": 93,
        "column": 81
      },
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 93,
        "column": 83
      },
      {
        "id": "identifier",
        "value": "min",
        "line": 93,
        "column": 93
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 93,
        "column": 97
      },
      {
        "id": "+",
        "value": "+",
        "line": 93,
        "column": 104
      },
      {
        "id": "string",
        "value": "\")\"",
        "line": 93,
        "column": 106
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Adds temporary variable names where the gps_t variables will be created",
    "line": 94,
    "column": 48
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx_gps_t",
      "line": 94,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 94,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 94,
        "column": 25
      }
    ]
  },
  {
    "id": "comment",
    "value": "// String with all the names of the gps_t variables to be created",
    "line": 95,
    "column": 48
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_t_list",
      "line": 95,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "invtokens",
        "line": 95,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "idx_gps_t",
        "line": 95,
        "column": 26
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Creates gps_t variables (Pr(treatment=t for each individual))",
    "line": 97,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 98,
      "column": 3
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"predict \"",
        "line": 98,
        "column": 9
      },
      {
        "id": "+",
        "value": "+",
        "line": 98,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "gps_t_list",
        "line": 98,
        "column": 22
      },
      {
        "id": "+",
        "value": "+",
        "line": 98,
        "column": 33
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 98,
        "column": 35
      },
      {
        "id": "+",
        "value": "+",
        "line": 98,
        "column": 39
      },
      {
        "id": "identifier",
        "value": "tousest",
        "line": 98,
        "column": 41
      },
      {
        "id": "+",
        "value": "+",
        "line": 98,
        "column": 49
      },
      {
        "id": "string",
        "value": "\", pr\"",
        "line": 98,
        "column": 51
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Stores name of temporary variables gps_t in macro \"gps_suffix\"_t in Stata",
    "line": 99,
    "column": 48
  },
  {
    "command": {
      "id": "identifier",
      "value": "for",
      "line": 99,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 99,
        "column": 8
      },
      {
        "id": "=",
        "value": "=",
        "line": 99,
        "column": 10
      },
      {
        "id": "number",
        "value": "1",
        "line": 99,
        "column": 11
      },
      {
        "id": ";",
        "value": ";",
        "line": 99,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 99,
        "column": 14
      },
      {
        "id": "<",
        "value": "<",
        "line": 99,
        "column": 16
      },
      {
        "id": "=",
        "value": "=",
        "line": 99,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 99,
        "column": 18
      },
      {
        "id": ";",
        "value": ";",
        "line": 99,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 99,
        "column": 23
      },
      {
        "id": "+",
        "value": "+",
        "line": 99,
        "column": 25
      },
      {
        "id": "+",
        "value": "+",
        "line": 99,
        "column": 26
      },
      {
        "id": "{",
        "value": "{",
        "line": 99,
        "column": 29
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_local",
      "line": 100,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gps_suffix",
        "line": 100,
        "column": 13
      },
      {
        "id": "+",
        "value": "+",
        "line": 100,
        "column": 24
      },
      {
        "id": "string",
        "value": "\"_\"",
        "line": 100,
        "column": 26
      },
      {
        "id": "+",
        "value": "+",
        "line": 100,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 100,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 100,
        "column": 41
      },
      {
        "id": "[",
        "value": "[",
        "line": 100,
        "column": 45
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 100,
        "column": 46
      },
      {
        "id": "]",
        "value": "]",
        "line": 100,
        "column": 48
      },
      {
        "id": ",",
        "value": ",",
        "line": 100,
        "column": 50
      },
      {
        "id": "identifier",
        "value": "idx_gps_t",
        "line": 100,
        "column": 51
      },
      {
        "id": "[",
        "value": "[",
        "line": 100,
        "column": 60
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 100,
        "column": 61
      },
      {
        "id": "]",
        "value": "]",
        "line": 100,
        "column": 63
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Read into matrix gps_t all the variables created by predicting the model in Stata",
    "line": 103,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_t",
      "line": 104,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 104,
        "column": 9
      },
      {
        "id": "number",
        "value": "0",
        "line": 104,
        "column": 11
      },
      {
        "id": ",",
        "value": ",",
        "line": 104,
        "column": 12
      },
      {
        "id": "number",
        "value": "0",
        "line": 104,
        "column": 13
      },
      {
        "id": ",",
        "value": ",",
        "line": 104,
        "column": 14
      },
      {
        "id": "number",
        "value": "0",
        "line": 104,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_view",
      "line": 105,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 105,
        "column": 11
      },
      {
        "id": ",",
        "value": ",",
        "line": 105,
        "column": 16
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 105,
        "column": 17
      },
      {
        "id": ",",
        "value": ",",
        "line": 105,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "idx_gps_t",
        "line": 105,
        "column": 19
      },
      {
        "id": ",",
        "value": ",",
        "line": 105,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 105,
        "column": 29
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Estimate GLM model for GPS",
    "line": 107,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 108,
      "column": 2
    },
    "if": [
      {
        "id": "identifier",
        "value": "glm",
        "line": 108,
        "column": 11
      },
      {
        "id": "==",
        "value": "==",
        "line": 108,
        "column": 14
      },
      {
        "id": "number",
        "value": "1",
        "line": 108,
        "column": 16
      },
      {
        "id": "{",
        "value": "{",
        "line": 108,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 109,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "glm_family",
        "line": 109,
        "column": 7
      },
      {
        "id": "==",
        "value": "==",
        "line": 109,
        "column": 17
      },
      {
        "id": "string",
        "value": "\"gamma\"",
        "line": 109,
        "column": 19
      },
      {
        "id": "{",
        "value": "{",
        "line": 109,
        "column": 28
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Adds a few temporary variable names to create auxiliary variables to estimate GPS",
    "line": 110,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "mu_hat",
      "line": 111,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 111,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "a",
      "line": 112,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 112,
        "column": 8
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "b",
      "line": 113,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 113,
        "column": 8
      }
    ]
  },
  {
    "id": "comment",
    "value": "// GLM model with \"glm_family\" family and \"glm_link\" link",
    "line": 114,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 115,
      "column": 4
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"glm \"",
        "line": 115,
        "column": 10
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "tvar",
        "line": 115,
        "column": 19
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 24
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 115,
        "column": 26
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 115,
        "column": 32
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 37
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 115,
        "column": 39
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "tousest",
        "line": 115,
        "column": 46
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 54
      },
      {
        "id": "string",
        "value": "\", family(\"",
        "line": 115,
        "column": 56
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 68
      },
      {
        "id": "identifier",
        "value": "glm_family",
        "line": 115,
        "column": 70
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 81
      },
      {
        "id": "string",
        "value": "\") link(\"",
        "line": 115,
        "column": 83
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 93
      },
      {
        "id": "identifier",
        "value": "glm_link",
        "line": 115,
        "column": 95
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 104
      },
      {
        "id": "string",
        "value": "\") \"",
        "line": 115,
        "column": 106
      },
      {
        "id": "+",
        "value": "+",
        "line": 115,
        "column": 111
      },
      {
        "id": "identifier",
        "value": "glm_options",
        "line": 115,
        "column": 113
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Predict GPS at different values of treatment variable",
    "line": 116,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// Default is to calculate mu=E(y)=g(xB)",
    "line": 117,
    "column": 54
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 117,
      "column": 4
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"predict \"",
        "line": 117,
        "column": 10
      },
      {
        "id": "+",
        "value": "+",
        "line": 117,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "mu_hat",
        "line": 117,
        "column": 23
      },
      {
        "id": "+",
        "value": "+",
        "line": 117,
        "column": 30
      },
      {
        "id": "string",
        "value": "\" if e(sample)\"",
        "line": 117,
        "column": 32
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 118,
      "column": 4
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"gen \"",
        "line": 118,
        "column": 10
      },
      {
        "id": "+",
        "value": "+",
        "line": 118,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "a",
        "line": 118,
        "column": 19
      },
      {
        "id": "+",
        "value": "+",
        "line": 118,
        "column": 21
      },
      {
        "id": "string",
        "value": "\" = 1/e(phi) if e(sample)\"",
        "line": 118,
        "column": 23
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 119,
      "column": 4
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"gen \"",
        "line": 119,
        "column": 10
      },
      {
        "id": "+",
        "value": "+",
        "line": 119,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "b",
        "line": 119,
        "column": 19
      },
      {
        "id": "+",
        "value": "+",
        "line": 119,
        "column": 21
      },
      {
        "id": "string",
        "value": "\" = \"",
        "line": 119,
        "column": 23
      },
      {
        "id": "+",
        "value": "+",
        "line": 119,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "mu_hat",
        "line": 119,
        "column": 31
      },
      {
        "id": "+",
        "value": "+",
        "line": 119,
        "column": 38
      },
      {
        "id": "string",
        "value": "\"/\"",
        "line": 119,
        "column": 40
      },
      {
        "id": "+",
        "value": "+",
        "line": 119,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "a",
        "line": 119,
        "column": 46
      },
      {
        "id": "+",
        "value": "+",
        "line": 119,
        "column": 48
      },
      {
        "id": "string",
        "value": "\" if e(sample)\"",
        "line": 119,
        "column": 50
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Adds temporary variable names where the gps_t variables will be created",
    "line": 120,
    "column": 49
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx_gps_t",
      "line": 120,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 120,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 120,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "for",
      "line": 121,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 121,
        "column": 9
      },
      {
        "id": "=",
        "value": "=",
        "line": 121,
        "column": 11
      },
      {
        "id": "number",
        "value": "1",
        "line": 121,
        "column": 12
      },
      {
        "id": ";",
        "value": ";",
        "line": 121,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 121,
        "column": 15
      },
      {
        "id": "<",
        "value": "<",
        "line": 121,
        "column": 17
      },
      {
        "id": "=",
        "value": "=",
        "line": 121,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 121,
        "column": 19
      },
      {
        "id": ";",
        "value": ";",
        "line": 121,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 121,
        "column": 24
      },
      {
        "id": "+",
        "value": "+",
        "line": 121,
        "column": 26
      },
      {
        "id": "+",
        "value": "+",
        "line": 121,
        "column": 27
      },
      {
        "id": "{",
        "value": "{",
        "line": 121,
        "column": 30
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Adds temporary variable name where the gps_t variable will be created",
    "line": 122,
    "column": 27
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_t",
      "line": 122,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "idx_gps_t",
        "line": 122,
        "column": 11
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 122,
        "column": 21
      },
      {
        "id": "]",
        "value": "]",
        "line": 122,
        "column": 23
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Creates gps_t variable (Pr(treatment=t for each individual))",
    "line": 123,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 124,
      "column": 5
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"gen \"",
        "line": 124,
        "column": 11
      },
      {
        "id": "+",
        "value": "+",
        "line": 124,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 124,
        "column": 20
      },
      {
        "id": "+",
        "value": "+",
        "line": 124,
        "column": 26
      },
      {
        "id": "string",
        "value": "\" = gammaden(\"",
        "line": 124,
        "column": 28
      },
      {
        "id": "+",
        "value": "+",
        "line": 124,
        "column": 43
      },
      {
        "id": "identifier",
        "value": "a",
        "line": 124,
        "column": 45
      },
      {
        "id": "+",
        "value": "+",
        "line": 124,
        "column": 47
      },
      {
        "id": "string",
        "value": "\",\"",
        "line": 124,
        "column": 49
      },
      {
        "id": "+",
        "value": "+",
        "line": 124,
        "column": 53
      },
      {
        "id": "identifier",
        "value": "b",
        "line": 124,
        "column": 55
      },
      {
        "id": "+",
        "value": "+",
        "line": 124,
        "column": 57
      },
      {
        "id": "string",
        "value": "\",0,\"",
        "line": 124,
        "column": 59
      },
      {
        "id": "+",
        "value": "+",
        "line": 124,
        "column": 65
      },
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 124,
        "column": 67
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 124,
        "column": 77
      },
      {
        "id": "+",
        "value": "+",
        "line": 124,
        "column": 81
      },
      {
        "id": "string",
        "value": "\")\"",
        "line": 124,
        "column": 82
      },
      {
        "id": "+",
        "value": "+",
        "line": 124,
        "column": 86
      },
      {
        "id": "string",
        "value": "\" if e(sample)\"",
        "line": 124,
        "column": 88
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Stores name of temporary variable gps_t in macro \"gps_suffix\"_t in Stata",
    "line": 125,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_local",
      "line": 126,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gps_suffix",
        "line": 126,
        "column": 14
      },
      {
        "id": "+",
        "value": "+",
        "line": 126,
        "column": 25
      },
      {
        "id": "string",
        "value": "\"_\"",
        "line": 126,
        "column": 27
      },
      {
        "id": "+",
        "value": "+",
        "line": 126,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 126,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 126,
        "column": 42
      },
      {
        "id": "[",
        "value": "[",
        "line": 126,
        "column": 46
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 126,
        "column": 47
      },
      {
        "id": "]",
        "value": "]",
        "line": 126,
        "column": 49
      },
      {
        "id": ",",
        "value": ",",
        "line": 126,
        "column": 51
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 126,
        "column": 52
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Read into matrix gps_t all the variables created by predicting the model in Stata",
    "line": 129,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_t",
      "line": 130,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 130,
        "column": 10
      },
      {
        "id": "number",
        "value": "0",
        "line": 130,
        "column": 12
      },
      {
        "id": ",",
        "value": ",",
        "line": 130,
        "column": 13
      },
      {
        "id": "number",
        "value": "0",
        "line": 130,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 130,
        "column": 15
      },
      {
        "id": "number",
        "value": "0",
        "line": 130,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_view",
      "line": 131,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 131,
        "column": 12
      },
      {
        "id": ",",
        "value": ",",
        "line": 131,
        "column": 17
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 131,
        "column": 18
      },
      {
        "id": ",",
        "value": ",",
        "line": 131,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "idx_gps_t",
        "line": 131,
        "column": 20
      },
      {
        "id": ",",
        "value": ",",
        "line": 131,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 131,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 133,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "exit",
        "line": 133,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "_error",
        "line": 133,
        "column": 13
      },
      {
        "id": "string",
        "value": "\"GLM fammily specified not supported\"",
        "line": 133,
        "column": 20
      }
    ]
  },
  {
    "id": "comment",
    "value": "// GMM estimation: either MNL (no perfect balancing), or with extra IPT conditions, or estimate system of logit models, ",
    "line": 135,
    "column": 2
  },
  {
    "id": "comment",
    "value": "// or series of individual logit models",
    "line": 136,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 137,
      "column": 2
    },
    "if": [
      {
        "id": "identifier",
        "value": "gmm",
        "line": 137,
        "column": 11
      },
      {
        "id": "==",
        "value": "==",
        "line": 137,
        "column": 14
      },
      {
        "id": "number",
        "value": "1",
        "line": 137,
        "column": 16
      },
      {
        "id": "{",
        "value": "{",
        "line": 137,
        "column": 19
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Generate temporary variable \"constant\" that will be added to the model",
    "line": 138,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx_constant",
      "line": 139,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_addvar",
        "line": 139,
        "column": 16
      },
      {
        "id": "string",
        "value": "\"double\"",
        "line": 139,
        "column": 26
      },
      {
        "id": ",",
        "value": ",",
        "line": 139,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "name_cons",
        "line": 139,
        "column": 35
      },
      {
        "id": "=",
        "value": "=",
        "line": 139,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 139,
        "column": 45
      },
      {
        "id": "number",
        "value": "1",
        "line": 139,
        "column": 57
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_store",
      "line": 140,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": ".",
        "line": 140,
        "column": 12
      },
      {
        "id": ",",
        "value": ",",
        "line": 140,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "idx_constant",
        "line": 140,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 140,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 140,
        "column": 27
      },
      {
        "id": ",",
        "value": ",",
        "line": 140,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "J",
        "line": 140,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "n",
        "line": 140,
        "column": 35
      },
      {
        "id": ",",
        "value": ",",
        "line": 140,
        "column": 36
      },
      {
        "id": "number",
        "value": "1",
        "line": 140,
        "column": 37
      },
      {
        "id": ",",
        "value": ",",
        "line": 140,
        "column": 38
      },
      {
        "id": "number",
        "value": "1",
        "line": 140,
        "column": 39
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Number of variables in estimation (including constant)",
    "line": 142,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "k",
      "line": 143,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "cols",
        "line": 143,
        "column": 5
      },
      {
        "id": "identifier",
        "value": "tokens",
        "line": 143,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 143,
        "column": 17
      },
      {
        "id": "+",
        "value": "+",
        "line": 143,
        "column": 23
      },
      {
        "id": "number",
        "value": "1",
        "line": 143,
        "column": 24
      }
    ]
  },
  {
    "id": "comment",
    "value": "// For methods mlogit_gmm, mlogit_ipt and logit_ipt use gmm evaluator",
    "line": 145,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 146,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 146,
        "column": 7
      },
      {
        "id": "==",
        "value": "==",
        "line": 146,
        "column": 17
      },
      {
        "id": "string",
        "value": "\"mlogit_gmm\"",
        "line": 146,
        "column": 19
      },
      {
        "id": "|",
        "value": "|",
        "line": 146,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 146,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 146,
        "column": 42
      },
      {
        "id": "string",
        "value": "\"mlogit_ipt\"",
        "line": 146,
        "column": 44
      },
      {
        "id": "|",
        "value": "|",
        "line": 146,
        "column": 56
      },
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 146,
        "column": 57
      },
      {
        "id": "==",
        "value": "==",
        "line": 146,
        "column": 67
      },
      {
        "id": "string",
        "value": "\"logit_ipt\"",
        "line": 146,
        "column": 69
      },
      {
        "id": "{",
        "value": "{",
        "line": 146,
        "column": 82
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Determines number of equations and coefficients for GMM estimation",
    "line": 147,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// For multinomial logit with no IPT constraints",
    "line": 148,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 149,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 149,
        "column": 8
      },
      {
        "id": "==",
        "value": "==",
        "line": 149,
        "column": 18
      },
      {
        "id": "string",
        "value": "\"mlogit_gmm\"",
        "line": 149,
        "column": 21
      },
      {
        "id": "{",
        "value": "{",
        "line": 149,
        "column": 35
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Number of equations is tnr-1 ",
    "line": 150,
    "column": 5
  },
  {
    "id": "comment",
    "value": "// Number of parameters is k*(tnr-1), where k is the number of columns in x_data (includes constant)",
    "line": 151,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "nr_eqs",
      "line": 152,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 152,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 152,
        "column": 25
      },
      {
        "id": "-",
        "value": "-",
        "line": 152,
        "column": 28
      },
      {
        "id": "number",
        "value": "1",
        "line": 152,
        "column": 29
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "nr_pars",
      "line": 153,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 153,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 153,
        "column": 25
      },
      {
        "id": "*",
        "value": "*",
        "line": 153,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 153,
        "column": 28
      },
      {
        "id": "-",
        "value": "-",
        "line": 153,
        "column": 31
      },
      {
        "id": "number",
        "value": "1",
        "line": 153,
        "column": 32
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "winitial",
      "line": 154,
      "column": 5
    },
    "=": [
      {
        "id": "string",
        "value": "\"winitial(identity)\"",
        "line": 154,
        "column": 16
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Because system is overidentified run two-step GMM",
    "line": 156,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "gmm_step",
      "line": 157,
      "column": 5
    },
    "=": [
      {
        "id": "string",
        "value": "\"twostep\"",
        "line": 157,
        "column": 16
      }
    ]
  },
  {
    "id": "comment",
    "value": "// For multinomial logit with IPT constraints",
    "line": 159,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 160,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 160,
        "column": 8
      },
      {
        "id": "==",
        "value": "==",
        "line": 160,
        "column": 18
      },
      {
        "id": "string",
        "value": "\"mlogit_ipt\"",
        "line": 160,
        "column": 21
      },
      {
        "id": "{",
        "value": "{",
        "line": 160,
        "column": 35
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Number of equations is (tnr*2)-1 ",
    "line": 161,
    "column": 5
  },
  {
    "id": "comment",
    "value": "// Number of parameters is k*(tnr-1), where k is the number of columns in x_data (includes constant)",
    "line": 162,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "nr_eqs",
      "line": 163,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 163,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 163,
        "column": 26
      },
      {
        "id": "*",
        "value": "*",
        "line": 163,
        "column": 29
      },
      {
        "id": "number",
        "value": "2",
        "line": 163,
        "column": 30
      },
      {
        "id": "-",
        "value": "-",
        "line": 163,
        "column": 32
      },
      {
        "id": "number",
        "value": "1",
        "line": 163,
        "column": 33
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "nr_pars",
      "line": 164,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 164,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 164,
        "column": 25
      },
      {
        "id": "*",
        "value": "*",
        "line": 164,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 164,
        "column": 28
      },
      {
        "id": "-",
        "value": "-",
        "line": 164,
        "column": 31
      },
      {
        "id": "number",
        "value": "1",
        "line": 164,
        "column": 32
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "winitial",
      "line": 165,
      "column": 5
    },
    "=": [
      {
        "id": "string",
        "value": "\"winitial(identity)\"",
        "line": 165,
        "column": 16
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Because system is overidentified run two-step GMM",
    "line": 167,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "gmm_step",
      "line": 168,
      "column": 5
    },
    "=": [
      {
        "id": "string",
        "value": "\"twostep\"",
        "line": 168,
        "column": 16
      }
    ]
  },
  {
    "id": "comment",
    "value": "// For system of logit models with IPT constraints",
    "line": 170,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 171,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 171,
        "column": 8
      },
      {
        "id": "==",
        "value": "==",
        "line": 171,
        "column": 18
      },
      {
        "id": "string",
        "value": "\"logit_ipt\"",
        "line": 171,
        "column": 21
      },
      {
        "id": "{",
        "value": "{",
        "line": 171,
        "column": 34
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Number of equations is tnr ",
    "line": 172,
    "column": 5
  },
  {
    "id": "comment",
    "value": "// Number of parameters is k*tnr, where k is the number of columns in x_data (includes constant)",
    "line": 173,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "nr_eqs",
      "line": 174,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 174,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 174,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "nr_pars",
      "line": 175,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 175,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 175,
        "column": 25
      },
      {
        "id": "*",
        "value": "*",
        "line": 175,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 175,
        "column": 27
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "winitial",
      "line": 176,
      "column": 5
    },
    "=": [
      {
        "id": "string",
        "value": "\"winitial(unadjusted, independent)\"",
        "line": 176,
        "column": 16
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Because system is just identified run one-step GMM",
    "line": 178,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "gmm_step",
      "line": 179,
      "column": 5
    },
    "=": [
      {
        "id": "string",
        "value": "\"onestep\"",
        "line": 179,
        "column": 16
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Estimates GMM model",
    "line": 182,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 183,
      "column": 4
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"capture noisily gmm gmm_ipt_eval \"",
        "line": 183,
        "column": 10
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 46
      },
      {
        "id": "identifier",
        "value": "tousest",
        "line": 183,
        "column": 48
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 56
      },
      {
        "id": "string",
        "value": "\", yvar(\"",
        "line": 183,
        "column": 58
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 68
      },
      {
        "id": "identifier",
        "value": "tvar",
        "line": 183,
        "column": 70
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 75
      },
      {
        "id": "string",
        "value": "\") xvar(\"",
        "line": 183,
        "column": 77
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 87
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 183,
        "column": 89
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 94
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 183,
        "column": 96
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 100
      },
      {
        "id": "identifier",
        "value": "name_cons",
        "line": 183,
        "column": 102
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 112
      },
      {
        "id": "string",
        "value": "\")  instruments(\"",
        "line": 183,
        "column": 114
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 132
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 183,
        "column": 134
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 139
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 183,
        "column": 141
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 145
      },
      {
        "id": "identifier",
        "value": "name_cons",
        "line": 183,
        "column": 147
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 157
      },
      {
        "id": "string",
        "value": "\", noconstant) nequations(\"",
        "line": 183,
        "column": 159
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 187
      },
      {
        "id": "identifier",
        "value": "nr_eqs",
        "line": 183,
        "column": 189
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 196
      },
      {
        "id": "string",
        "value": "\") nparameters(\"",
        "line": 183,
        "column": 198
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 215
      },
      {
        "id": "identifier",
        "value": "nr_pars",
        "line": 183,
        "column": 217
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 225
      },
      {
        "id": "string",
        "value": "\") \"",
        "line": 183,
        "column": 227
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 232
      },
      {
        "id": "identifier",
        "value": "winitial",
        "line": 183,
        "column": 234
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 243
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 183,
        "column": 245
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 249
      },
      {
        "id": "identifier",
        "value": "gmm_step",
        "line": 183,
        "column": 251
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 260
      },
      {
        "id": "string",
        "value": "\" method(\"",
        "line": 183,
        "column": 262
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 273
      },
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 183,
        "column": 275
      },
      {
        "id": "+",
        "value": "+",
        "line": 183,
        "column": 286
      },
      {
        "id": "string",
        "value": "\") hasderivatives  conv_maxiter(100)\"",
        "line": 183,
        "column": 288
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 184,
      "column": 4
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"local gmm_result = _rc\"",
        "line": 184,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 185,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "st_local",
        "line": 185,
        "column": 8
      },
      {
        "id": "string",
        "value": "\"gmm_result\"",
        "line": 185,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 185,
        "column": 30
      },
      {
        "id": "string",
        "value": "\"430\"",
        "line": 185,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "exit",
        "line": 185,
        "column": 39
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Obtain vector of coefficients from GMM estimation",
    "line": 187,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "b_tt",
      "line": 188,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_matrix",
        "line": 188,
        "column": 9
      },
      {
        "id": "string",
        "value": "\"e(b)\"",
        "line": 188,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 190,
      "column": 3
    },
    "if": [
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 190,
        "column": 12
      },
      {
        "id": "==",
        "value": "==",
        "line": 190,
        "column": 22
      },
      {
        "id": "string",
        "value": "\"indiv_logit_ipt\"",
        "line": 190,
        "column": 24
      },
      {
        "id": "{",
        "value": "{",
        "line": 190,
        "column": 43
      }
    ]
  },
  {
    "id": "comment",
    "value": "// For each treatment level estimate a logit model by GMM with perfect balancing moment conditions imposed",
    "line": 191,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// Number of equations is 1 ",
    "line": 193,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// Number of parameters is k, where k is the number of columns in x_data (includes constant)",
    "line": 194,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "nr_eqs",
      "line": 195,
      "column": 4
    },
    "=": [
      {
        "id": "string",
        "value": "\"1\"",
        "line": 195,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "nr_pars",
      "line": 196,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 196,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 196,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "winitial",
      "line": 197,
      "column": 4
    },
    "=": [
      {
        "id": "string",
        "value": "\"winitial(identity)\"",
        "line": 197,
        "column": 15
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Because system is just identified run one-step GMM",
    "line": 199,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "gmm_step",
      "line": 200,
      "column": 4
    },
    "=": [
      {
        "id": "string",
        "value": "\"onestep\"",
        "line": 200,
        "column": 15
      }
    ]
  },
  {
    "id": "comment",
    "value": "//Initialize b_tt and run loop",
    "line": 202,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "b_tt",
      "line": 203,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 203,
        "column": 9
      },
      {
        "id": "number",
        "value": "1",
        "line": 203,
        "column": 11
      },
      {
        "id": ",",
        "value": ",",
        "line": 203,
        "column": 12
      },
      {
        "id": "number",
        "value": "0",
        "line": 203,
        "column": 13
      },
      {
        "id": ",",
        "value": ",",
        "line": 203,
        "column": 14
      },
      {
        "id": "number",
        "value": "0",
        "line": 203,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "for",
      "line": 204,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 204,
        "column": 9
      },
      {
        "id": "=",
        "value": "=",
        "line": 204,
        "column": 11
      },
      {
        "id": "number",
        "value": "1",
        "line": 204,
        "column": 12
      },
      {
        "id": ";",
        "value": ";",
        "line": 204,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 204,
        "column": 15
      },
      {
        "id": "<",
        "value": "<",
        "line": 204,
        "column": 17
      },
      {
        "id": "=",
        "value": "=",
        "line": 204,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 204,
        "column": 19
      },
      {
        "id": ";",
        "value": ";",
        "line": 204,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 204,
        "column": 24
      },
      {
        "id": "+",
        "value": "+",
        "line": 204,
        "column": 26
      },
      {
        "id": "+",
        "value": "+",
        "line": 204,
        "column": 27
      },
      {
        "id": "{",
        "value": "{",
        "line": 204,
        "column": 30
      }
    ]
  },
  {
    "id": "comment",
    "value": "//Determine treatment for which logit model will be estimated (=1 for that treatment, =0 for all other treatments)",
    "line": 205,
    "column": 5
  },
  {
    "id": "comment",
    "value": "//Temporary variable \"name_tt\" has the dummy variable for the particular treatment",
    "line": 206,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "treat_tt",
      "line": 207,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "t",
        "line": 207,
        "column": 14
      },
      {
        "id": ":",
        "value": ":",
        "line": 207,
        "column": 15
      },
      {
        "id": "==",
        "value": "==",
        "line": 207,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 207,
        "column": 18
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 207,
        "column": 23
      }
    ],
    "options": [
      {
        "id": "number",
        "value": "1",
        "line": 207,
        "column": 26
      },
      {
        "id": "]",
        "value": "]",
        "line": 207,
        "column": 27
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx_treat_tt",
      "line": 208,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_addvar",
        "line": 208,
        "column": 18
      },
      {
        "id": "string",
        "value": "\"double\"",
        "line": 208,
        "column": 28
      },
      {
        "id": ",",
        "value": ",",
        "line": 208,
        "column": 36
      },
      {
        "id": "identifier",
        "value": "name_tt",
        "line": 208,
        "column": 37
      },
      {
        "id": "=",
        "value": "=",
        "line": 208,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 208,
        "column": 45
      },
      {
        "id": "number",
        "value": "1",
        "line": 208,
        "column": 57
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_store",
      "line": 209,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": ".",
        "line": 209,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 209,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "idx_treat_tt",
        "line": 209,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 209,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 209,
        "column": 29
      },
      {
        "id": ",",
        "value": ",",
        "line": 209,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "treat_tt",
        "line": 209,
        "column": 35
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Estimates GMM model",
    "line": 211,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 212,
      "column": 5
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"capture noisily gmm gmm_ipt_eval \"",
        "line": 212,
        "column": 11
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 47
      },
      {
        "id": "identifier",
        "value": "tousest",
        "line": 212,
        "column": 49
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 57
      },
      {
        "id": "string",
        "value": "\", yvar(\"",
        "line": 212,
        "column": 59
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 69
      },
      {
        "id": "identifier",
        "value": "name_tt",
        "line": 212,
        "column": 71
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 79
      },
      {
        "id": "string",
        "value": "\") xvar(\"",
        "line": 212,
        "column": 81
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 91
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 212,
        "column": 93
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 98
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 212,
        "column": 100
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 104
      },
      {
        "id": "identifier",
        "value": "name_cons",
        "line": 212,
        "column": 106
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 116
      },
      {
        "id": "string",
        "value": "\")  instruments(\"",
        "line": 212,
        "column": 118
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 136
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 212,
        "column": 138
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 143
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 212,
        "column": 145
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 149
      },
      {
        "id": "identifier",
        "value": "name_cons",
        "line": 212,
        "column": 151
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 161
      },
      {
        "id": "string",
        "value": "\", noconstant) nequations(\"",
        "line": 212,
        "column": 163
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 191
      },
      {
        "id": "identifier",
        "value": "nr_eqs",
        "line": 212,
        "column": 193
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 200
      },
      {
        "id": "string",
        "value": "\") nparameters(\"",
        "line": 212,
        "column": 202
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 219
      },
      {
        "id": "identifier",
        "value": "nr_pars",
        "line": 212,
        "column": 221
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 229
      },
      {
        "id": "string",
        "value": "\") \"",
        "line": 212,
        "column": 231
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 236
      },
      {
        "id": "identifier",
        "value": "winitial",
        "line": 212,
        "column": 238
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 247
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 212,
        "column": 249
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 253
      },
      {
        "id": "identifier",
        "value": "gmm_step",
        "line": 212,
        "column": 255
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 264
      },
      {
        "id": "string",
        "value": "\" method(\"",
        "line": 212,
        "column": 266
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 277
      },
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 212,
        "column": 279
      },
      {
        "id": "+",
        "value": "+",
        "line": 212,
        "column": 290
      },
      {
        "id": "string",
        "value": "\") hasderivatives  conv_maxiter(100)\"",
        "line": 212,
        "column": 292
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "stata",
      "line": 213,
      "column": 5
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"local gmm_result = _rc\"",
        "line": 213,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 214,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "st_local",
        "line": 214,
        "column": 9
      },
      {
        "id": "string",
        "value": "\"gmm_result\"",
        "line": 214,
        "column": 18
      },
      {
        "id": "==",
        "value": "==",
        "line": 214,
        "column": 31
      },
      {
        "id": "string",
        "value": "\"430\"",
        "line": 214,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "exit",
        "line": 214,
        "column": 40
      }
    ]
  },
  {
    "id": "comment",
    "value": "//Accumulate vectors of coefficients from GMM estimation",
    "line": 216,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "bi_tt",
      "line": 217,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_matrix",
        "line": 217,
        "column": 11
      },
      {
        "id": "string",
        "value": "\"e(b)\"",
        "line": 217,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "b_tt",
      "line": 218,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "b_tt",
        "line": 218,
        "column": 11
      },
      {
        "id": ",",
        "value": ",",
        "line": 218,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "bi_tt",
        "line": 218,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 221,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "exit",
        "line": 221,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "_error",
        "line": 221,
        "column": 13
      },
      {
        "id": "string",
        "value": "\"GMM method specified not supported\"",
        "line": 221,
        "column": 20
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Read variables used in estimation (including \"constant\")",
    "line": 223,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "x_data",
      "line": 224,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 224,
        "column": 10
      },
      {
        "id": "number",
        "value": "0",
        "line": 224,
        "column": 12
      },
      {
        "id": ",",
        "value": ",",
        "line": 224,
        "column": 13
      },
      {
        "id": "number",
        "value": "0",
        "line": 224,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 224,
        "column": 15
      },
      {
        "id": "number",
        "value": "0",
        "line": 224,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_view",
      "line": 225,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "x_data",
        "line": 225,
        "column": 11
      },
      {
        "id": ",",
        "value": ",",
        "line": 225,
        "column": 17
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 225,
        "column": 18
      },
      {
        "id": ",",
        "value": ",",
        "line": 225,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "tokens",
        "line": 225,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "xvar",
        "line": 225,
        "column": 27
      },
      {
        "id": "+",
        "value": "+",
        "line": 225,
        "column": 32
      },
      {
        "id": "string",
        "value": "\" \"",
        "line": 225,
        "column": 34
      },
      {
        "id": "+",
        "value": "+",
        "line": 225,
        "column": 38
      },
      {
        "id": "identifier",
        "value": "name_cons",
        "line": 225,
        "column": 40
      },
      {
        "id": ",",
        "value": ",",
        "line": 225,
        "column": 50
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 225,
        "column": 51
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Calculates GPS: creates gps_t variables (Pr(treatment=tt for each individual))",
    "line": 227,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 228,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 228,
        "column": 7
      },
      {
        "id": "==",
        "value": "==",
        "line": 228,
        "column": 18
      },
      {
        "id": "string",
        "value": "\"mlogit_gmm\"",
        "line": 228,
        "column": 21
      },
      {
        "id": "|",
        "value": "|",
        "line": 228,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 228,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 228,
        "column": 47
      },
      {
        "id": "string",
        "value": "\"mlogit_ipt\"",
        "line": 228,
        "column": 50
      },
      {
        "id": "{",
        "value": "{",
        "line": 228,
        "column": 64
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "b_tt_col",
      "line": 229,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "rowshape",
        "line": 229,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "b_tt",
        "line": 229,
        "column": 22
      },
      {
        "id": ",",
        "value": ",",
        "line": 229,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 229,
        "column": 27
      },
      {
        "id": "-",
        "value": "-",
        "line": 229,
        "column": 30
      },
      {
        "id": "number",
        "value": "1",
        "line": 229,
        "column": 31
      },
      {
        "id": "'",
        "value": "'",
        "line": 229,
        "column": 33
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "exp_xb",
      "line": 230,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "exp",
        "line": 230,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "x_data",
        "line": 230,
        "column": 16
      },
      {
        "id": "*",
        "value": "*",
        "line": 230,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "b_tt_col",
        "line": 230,
        "column": 23
      },
      {
        "id": ",",
        "value": ",",
        "line": 230,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "J",
        "line": 230,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "n",
        "line": 230,
        "column": 35
      },
      {
        "id": ",",
        "value": ",",
        "line": 230,
        "column": 36
      },
      {
        "id": "number",
        "value": "1",
        "line": 230,
        "column": 37
      },
      {
        "id": ",",
        "value": ",",
        "line": 230,
        "column": 38
      },
      {
        "id": "number",
        "value": "1",
        "line": 230,
        "column": 39
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_t",
      "line": 231,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "exp_xb",
        "line": 231,
        "column": 10
      },
      {
        "id": ":",
        "value": ":",
        "line": 231,
        "column": 16
      },
      {
        "id": "/",
        "value": "/",
        "line": 231,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "rowsum",
        "line": 231,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "exp_xb",
        "line": 231,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 233,
      "column": 3
    },
    "if": [
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 233,
        "column": 12
      },
      {
        "id": "==",
        "value": "==",
        "line": 233,
        "column": 23
      },
      {
        "id": "string",
        "value": "\"logit_ipt\"",
        "line": 233,
        "column": 26
      },
      {
        "id": "|",
        "value": "|",
        "line": 233,
        "column": 37
      },
      {
        "id": "identifier",
        "value": "gmm_method",
        "line": 233,
        "column": 38
      },
      {
        "id": "==",
        "value": "==",
        "line": 233,
        "column": 49
      },
      {
        "id": "string",
        "value": "\"indiv_logit_ipt\"",
        "line": 233,
        "column": 52
      },
      {
        "id": "{",
        "value": "{",
        "line": 233,
        "column": 71
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "b_tt_col",
      "line": 234,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "rowshape",
        "line": 234,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "b_tt",
        "line": 234,
        "column": 22
      },
      {
        "id": ",",
        "value": ",",
        "line": 234,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 234,
        "column": 27
      },
      {
        "id": "'",
        "value": "'",
        "line": 234,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "exp_xb",
      "line": 235,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "exp",
        "line": 235,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "x_data",
        "line": 235,
        "column": 15
      },
      {
        "id": "*",
        "value": "*",
        "line": 235,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "b_tt_col",
        "line": 235,
        "column": 22
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_t",
      "line": 236,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "exp_xb",
        "line": 236,
        "column": 10
      },
      {
        "id": ":",
        "value": ":",
        "line": 236,
        "column": 16
      },
      {
        "id": "/",
        "value": "/",
        "line": 236,
        "column": 17
      },
      {
        "id": "number",
        "value": "1",
        "line": 236,
        "column": 19
      },
      {
        "id": ":",
        "value": ":",
        "line": 236,
        "column": 20
      },
      {
        "id": "+",
        "value": "+",
        "line": 236,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "exp_xb",
        "line": 236,
        "column": 22
      }
    ]
  },
  {
    "id": "comment",
    "value": "//gps_t variables will have predicted probability of each treatment value",
    "line": 239,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// Adds temporary variable names where the gps_t variables will be created",
    "line": 240,
    "column": 48
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx_gps_t",
      "line": 240,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 240,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 240,
        "column": 25
      }
    ]
  },
  {
    "id": "comment",
    "value": "// String with all the names of the gps_t variables to be created",
    "line": 241,
    "column": 48
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_t_list",
      "line": 241,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "invtokens",
        "line": 241,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "idx_gps_t",
        "line": 241,
        "column": 26
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Stores name of temporary variables gps_t in macro \"gps_suffix\"_t in Stata",
    "line": 243,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "for",
      "line": 244,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 244,
        "column": 8
      },
      {
        "id": "=",
        "value": "=",
        "line": 244,
        "column": 10
      },
      {
        "id": "number",
        "value": "1",
        "line": 244,
        "column": 11
      },
      {
        "id": ";",
        "value": ";",
        "line": 244,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 244,
        "column": 14
      },
      {
        "id": "<",
        "value": "<",
        "line": 244,
        "column": 16
      },
      {
        "id": "=",
        "value": "=",
        "line": 244,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 244,
        "column": 18
      },
      {
        "id": ";",
        "value": ";",
        "line": 244,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 244,
        "column": 23
      },
      {
        "id": "+",
        "value": "+",
        "line": 244,
        "column": 25
      },
      {
        "id": "+",
        "value": "+",
        "line": 244,
        "column": 26
      },
      {
        "id": "{",
        "value": "{",
        "line": 244,
        "column": 29
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_local",
      "line": 245,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gps_suffix",
        "line": 245,
        "column": 13
      },
      {
        "id": "+",
        "value": "+",
        "line": 245,
        "column": 24
      },
      {
        "id": "string",
        "value": "\"_\"",
        "line": 245,
        "column": 26
      },
      {
        "id": "+",
        "value": "+",
        "line": 245,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 245,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 245,
        "column": 41
      },
      {
        "id": "[",
        "value": "[",
        "line": 245,
        "column": 45
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 245,
        "column": 46
      },
      {
        "id": "]",
        "value": "]",
        "line": 245,
        "column": 48
      },
      {
        "id": ",",
        "value": ",",
        "line": 245,
        "column": 50
      },
      {
        "id": "identifier",
        "value": "idx_gps_t",
        "line": 245,
        "column": 51
      },
      {
        "id": "[",
        "value": "[",
        "line": 245,
        "column": 60
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 245,
        "column": 61
      },
      {
        "id": "]",
        "value": "]",
        "line": 245,
        "column": 63
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Stores gps_t as temporary variables gps_t in Stata",
    "line": 248,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx",
      "line": 249,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_addvar",
        "line": 249,
        "column": 7
      },
      {
        "id": "string",
        "value": "\"double\"",
        "line": 249,
        "column": 17
      },
      {
        "id": ",",
        "value": ",",
        "line": 249,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "idx_gps_t",
        "line": 249,
        "column": 27
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_store",
      "line": 250,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": ".",
        "line": 250,
        "column": 12
      },
      {
        "id": ",",
        "value": ",",
        "line": 250,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "idx_gps_t",
        "line": 250,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 250,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 250,
        "column": 24
      },
      {
        "id": ",",
        "value": ",",
        "line": 250,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 250,
        "column": 30
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Creates GPS (taking from gps_t matrix the value corresponding to observed t)",
    "line": 253,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps",
      "line": 254,
      "column": 2
    },
    "=": [
      {
        "id": "identifier",
        "value": "rowsum",
        "line": 254,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 254,
        "column": 13
      },
      {
        "id": ":",
        "value": ":",
        "line": 254,
        "column": 18
      },
      {
        "id": "*",
        "value": "*",
        "line": 254,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "mm_expand",
        "line": 254,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "t",
        "line": 254,
        "column": 31
      },
      {
        "id": ",",
        "value": ",",
        "line": 254,
        "column": 32
      },
      {
        "id": "number",
        "value": "1",
        "line": 254,
        "column": 33
      },
      {
        "id": ",",
        "value": ",",
        "line": 254,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 254,
        "column": 35
      },
      {
        "id": ":",
        "value": ":",
        "line": 254,
        "column": 39
      },
      {
        "id": "==",
        "value": "==",
        "line": 254,
        "column": 40
      },
      {
        "id": "identifier",
        "value": "J",
        "line": 254,
        "column": 43
      },
      {
        "id": "identifier",
        "value": "n",
        "line": 254,
        "column": 45
      },
      {
        "id": ",",
        "value": ",",
        "line": 254,
        "column": 46
      },
      {
        "id": "number",
        "value": "1",
        "line": 254,
        "column": 47
      },
      {
        "id": ",",
        "value": ",",
        "line": 254,
        "column": 48
      },
      {
        "id": "number",
        "value": "1",
        "line": 254,
        "column": 49
      },
      {
        "id": "*",
        "value": "*",
        "line": 254,
        "column": 51
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 254,
        "column": 52
      },
      {
        "id": "'",
        "value": "'",
        "line": 254,
        "column": 56
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Adds GPS as temporary variable to the dataset",
    "line": 256,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx_gps",
      "line": 257,
      "column": 2
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 257,
        "column": 10
      },
      {
        "id": "number",
        "value": "1",
        "line": 257,
        "column": 22
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx",
      "line": 258,
      "column": 2
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_addvar",
        "line": 258,
        "column": 6
      },
      {
        "id": "string",
        "value": "\"double\"",
        "line": 258,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 258,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "idx_gps",
        "line": 258,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_store",
      "line": 259,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": ".",
        "line": 259,
        "column": 11
      },
      {
        "id": ",",
        "value": ",",
        "line": 259,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "idx_gps",
        "line": 259,
        "column": 13
      },
      {
        "id": ",",
        "value": ",",
        "line": 259,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 259,
        "column": 21
      },
      {
        "id": ",",
        "value": ",",
        "line": 259,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 259,
        "column": 27
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Stores name of variable with calculated GPS in macro \"gps\" in Stata",
    "line": 260,
    "column": 47
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_local",
      "line": 260,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gps_suffix",
        "line": 260,
        "column": 11
      },
      {
        "id": ",",
        "value": ",",
        "line": 260,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "idx_gps",
        "line": 260,
        "column": 22
      }
    ]
  },
  {
    "id": "comment",
    "value": "// If the # of values associated to t_cat = # values associated to t (i.e. t_cat=t) then skip step below",
    "line": 263,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 264,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tnr",
        "line": 264,
        "column": 6
      },
      {
        "id": "==",
        "value": "==",
        "line": 264,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 264,
        "column": 11
      },
      {
        "id": "{",
        "value": "{",
        "line": 264,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_tcat",
      "line": 265,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 265,
        "column": 12
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "tmedian",
      "line": 266,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "tval",
        "line": 266,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 268,
      "column": 2
    },
    "varlist": [
      {
        "id": "{",
        "value": "{",
        "line": 268,
        "column": 7
      }
    ]
  },
  {
    "id": "comment",
    "value": "// For each category of t_cat determines median exposure and builds a matrix with estimated GPS for ",
    "line": 269,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// each of those median exposures (matrix will have number of columns = t_catnr)",
    "line": 270,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// Vector tmedian has the median exposure level for each category of expvar",
    "line": 271,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "tmedian",
      "line": 272,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 272,
        "column": 11
      },
      {
        "id": "number",
        "value": "1",
        "line": 272,
        "column": 13
      },
      {
        "id": ",",
        "value": ",",
        "line": 272,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 272,
        "column": 15
      },
      {
        "id": ",",
        "value": ",",
        "line": 272,
        "column": 22
      },
      {
        "id": "number",
        "value": "0",
        "line": 272,
        "column": 23
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_tcat",
      "line": 273,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 273,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "n",
        "line": 273,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 273,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 273,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 273,
        "column": 23
      },
      {
        "id": "number",
        "value": "0",
        "line": 273,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "for",
      "line": 274,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "c",
        "line": 274,
        "column": 8
      },
      {
        "id": "=",
        "value": "=",
        "line": 274,
        "column": 9
      },
      {
        "id": "number",
        "value": "1",
        "line": 274,
        "column": 10
      },
      {
        "id": ";",
        "value": ";",
        "line": 274,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "c",
        "line": 274,
        "column": 13
      },
      {
        "id": "<",
        "value": "<",
        "line": 274,
        "column": 14
      },
      {
        "id": "=",
        "value": "=",
        "line": 274,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 274,
        "column": 16
      },
      {
        "id": ";",
        "value": ";",
        "line": 274,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "c",
        "line": 274,
        "column": 25
      },
      {
        "id": "+",
        "value": "+",
        "line": 274,
        "column": 26
      },
      {
        "id": "+",
        "value": "+",
        "line": 274,
        "column": 27
      },
      {
        "id": "{",
        "value": "{",
        "line": 274,
        "column": 30
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Median of exposure variable for observations with exposure in category \"c\"",
    "line": 276,
    "column": 6
  },
  {
    "id": "comment",
    "value": "// Calculate median",
    "line": 277,
    "column": 6
  },
  {
    "command": {
      "id": "identifier",
      "value": "med",
      "line": 278,
      "column": 6
    },
    "=": [
      {
        "id": "identifier",
        "value": "mm_median",
        "line": 278,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 278,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "t",
        "line": 278,
        "column": 27
      },
      {
        "id": ",",
        "value": ",",
        "line": 278,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 278,
        "column": 30
      },
      {
        "id": ":",
        "value": ":",
        "line": 278,
        "column": 35
      },
      {
        "id": "==",
        "value": "==",
        "line": 278,
        "column": 36
      },
      {
        "id": "identifier",
        "value": "t_catval",
        "line": 278,
        "column": 38
      },
      {
        "id": "[",
        "value": "[",
        "line": 278,
        "column": 46
      },
      {
        "id": "identifier",
        "value": "c",
        "line": 278,
        "column": 47
      },
      {
        "id": "]",
        "value": "]",
        "line": 278,
        "column": 48
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Check that the value for the median is actually one of the values in tval",
    "line": 279,
    "column": 6
  },
  {
    "id": "comment",
    "value": "// If it is not, it takes the closest value to an actual value in tval ",
    "line": 280,
    "column": 6
  },
  {
    "id": "comment",
    "value": "// (if there is a tie, take the firt one)",
    "line": 281,
    "column": 6
  },
  {
    "command": {
      "id": "identifier",
      "value": "tmedian",
      "line": 282,
      "column": 6
    },
    "=": [
      {
        "id": "identifier",
        "value": "tval",
        "line": 282,
        "column": 17
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "c",
        "line": 282,
        "column": 14
      },
      {
        "id": "]",
        "value": "]",
        "line": 282,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "colmin",
        "line": 282,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "mm_which",
        "line": 282,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "abs",
        "line": 282,
        "column": 38
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 282,
        "column": 42
      },
      {
        "id": ":",
        "value": ":",
        "line": 282,
        "column": 46
      },
      {
        "id": "-",
        "value": "-",
        "line": 282,
        "column": 47
      },
      {
        "id": "identifier",
        "value": "med",
        "line": 282,
        "column": 48
      },
      {
        "id": ":",
        "value": ":",
        "line": 282,
        "column": 52
      },
      {
        "id": "<",
        "value": "<",
        "line": 282,
        "column": 53
      },
      {
        "id": "=",
        "value": "=",
        "line": 282,
        "column": 54
      },
      {
        "id": "identifier",
        "value": "colmin",
        "line": 282,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "abs",
        "line": 282,
        "column": 62
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 282,
        "column": 66
      },
      {
        "id": ":",
        "value": ":",
        "line": 282,
        "column": 70
      },
      {
        "id": "-",
        "value": "-",
        "line": 282,
        "column": 71
      },
      {
        "id": "identifier",
        "value": "med",
        "line": 282,
        "column": 72
      },
      {
        "id": "]",
        "value": "]",
        "line": 282,
        "column": 79
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Gets appropriate estimated GPS variables (i.e. GPS for median treatment within each category of t_cat)",
    "line": 284,
    "column": 6
  },
  {
    "command": {
      "id": "identifier",
      "value": "gps_tcat",
      "line": 285,
      "column": 6
    },
    "=": [
      {
        "id": "identifier",
        "value": "select",
        "line": 285,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 285,
        "column": 27
      },
      {
        "id": ",",
        "value": ",",
        "line": 285,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "tval",
        "line": 285,
        "column": 34
      },
      {
        "id": "'",
        "value": "'",
        "line": 285,
        "column": 38
      },
      {
        "id": ":",
        "value": ":",
        "line": 285,
        "column": 39
      },
      {
        "id": "==",
        "value": "==",
        "line": 285,
        "column": 40
      },
      {
        "id": "identifier",
        "value": "tmedian",
        "line": 285,
        "column": 42
      },
      {
        "id": "[",
        "value": "[",
        "line": 285,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "c",
        "line": 285,
        "column": 50
      },
      {
        "id": "]",
        "value": "]",
        "line": 285,
        "column": 51
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": ".",
        "line": 285,
        "column": 15
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "c",
        "line": 285,
        "column": 17
      },
      {
        "id": "]",
        "value": "]",
        "line": 285,
        "column": 18
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Stores the list of median values of treatment inside each treatment category in a macro variable",
    "line": 288,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_local",
      "line": 289,
      "column": 2
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"t_cat_median_list\"",
        "line": 289,
        "column": 11
      },
      {
        "id": ",",
        "value": ",",
        "line": 289,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "mm_invtokens",
        "line": 289,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "strofreal",
        "line": 289,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "tmedian",
        "line": 289,
        "column": 54
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Imposes overlap conditions",
    "line": 291,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 292,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "apply_overlap",
        "line": 292,
        "column": 6
      },
      {
        "id": "==",
        "value": "==",
        "line": 292,
        "column": 19
      },
      {
        "id": "number",
        "value": "1",
        "line": 292,
        "column": 21
      },
      {
        "id": "{",
        "value": "{",
        "line": 292,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 293,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_pooled",
        "line": 293,
        "column": 7
      },
      {
        "id": "==",
        "value": "==",
        "line": 293,
        "column": 18
      },
      {
        "id": "number",
        "value": "0",
        "line": 293,
        "column": 20
      },
      {
        "id": "{",
        "value": "{",
        "line": 293,
        "column": 23
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_gps",
      "line": 294,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 294,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 294,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 294,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 294,
        "column": 22
      },
      {
        "id": ",",
        "value": ",",
        "line": 294,
        "column": 29
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 294,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_gps",
      "line": 295,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 295,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 295,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 295,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 295,
        "column": 22
      },
      {
        "id": ",",
        "value": ",",
        "line": 295,
        "column": 29
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 295,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_p_gps",
      "line": 296,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 296,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 296,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 296,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 296,
        "column": 24
      },
      {
        "id": ",",
        "value": ",",
        "line": 296,
        "column": 31
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 296,
        "column": 32
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_p_gps",
      "line": 297,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 297,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 297,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 297,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 297,
        "column": 24
      },
      {
        "id": ",",
        "value": ",",
        "line": 297,
        "column": 31
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 297,
        "column": 32
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 299,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_pooled",
        "line": 299,
        "column": 7
      },
      {
        "id": "==",
        "value": "==",
        "line": 299,
        "column": 18
      },
      {
        "id": "number",
        "value": "1",
        "line": 299,
        "column": 20
      },
      {
        "id": "{",
        "value": "{",
        "line": 299,
        "column": 23
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_gps",
      "line": 300,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 300,
        "column": 12
      },
      {
        "id": "number",
        "value": "2",
        "line": 300,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 300,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 300,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 300,
        "column": 23
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 300,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_gps",
      "line": 301,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 301,
        "column": 12
      },
      {
        "id": "number",
        "value": "2",
        "line": 301,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 301,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 301,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 301,
        "column": 23
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 301,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_p_gps",
      "line": 302,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 302,
        "column": 14
      },
      {
        "id": "number",
        "value": "2",
        "line": 302,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 302,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 302,
        "column": 18
      },
      {
        "id": ",",
        "value": ",",
        "line": 302,
        "column": 25
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 302,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_p_gps",
      "line": 303,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 303,
        "column": 14
      },
      {
        "id": "number",
        "value": "2",
        "line": 303,
        "column": 16
      },
      {
        "id": ",",
        "value": ",",
        "line": 303,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 303,
        "column": 18
      },
      {
        "id": ",",
        "value": ",",
        "line": 303,
        "column": 25
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 303,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "for",
      "line": 305,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 305,
        "column": 8
      },
      {
        "id": "=",
        "value": "=",
        "line": 305,
        "column": 10
      },
      {
        "id": "number",
        "value": "1",
        "line": 305,
        "column": 11
      },
      {
        "id": ";",
        "value": ";",
        "line": 305,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 305,
        "column": 14
      },
      {
        "id": "<",
        "value": "<",
        "line": 305,
        "column": 16
      },
      {
        "id": "=",
        "value": "=",
        "line": 305,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 305,
        "column": 18
      },
      {
        "id": ";",
        "value": ";",
        "line": 305,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 305,
        "column": 27
      },
      {
        "id": "+",
        "value": "+",
        "line": 305,
        "column": 29
      },
      {
        "id": "+",
        "value": "+",
        "line": 305,
        "column": 30
      },
      {
        "id": "{",
        "value": "{",
        "line": 305,
        "column": 33
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Collect in two matrices (one for the min value, another for the max value) the min",
    "line": 307,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// and max GPS of all the individuals with a PARTICULAR treatment OBSERVED value,",
    "line": 308,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// for EACH estimated GPS (given tmedian).",
    "line": 309,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// Then, each matrix will be square with size equal to the number of possible categories of ",
    "line": 310,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// treatments. Rows will have the value of the ACTUAL OBSERVED treatment, while",
    "line": 311,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// columns will have the EVALUATED treatment",
    "line": 312,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// (if ovlp_pooled==1, then instead of square matrix is 2*# treatments, where the ",
    "line": 313,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// first row has the percentile for observed treatment, second row for all other pooled treatments)",
    "line": 314,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// The parameter ovlp_value (see beginning of program) will determine if raw minimums",
    "line": 315,
    "column": 4
  },
  {
    "id": "comment",
    "value": "// and maximums or if also percentiles are stored",
    "line": 316,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 317,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_pooled",
        "line": 317,
        "column": 8
      },
      {
        "id": "==",
        "value": "==",
        "line": 317,
        "column": 19
      },
      {
        "id": "number",
        "value": "0",
        "line": 317,
        "column": 21
      },
      {
        "id": "{",
        "value": "{",
        "line": 317,
        "column": 24
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Min/max is done treatment-category-by-treatment-category",
    "line": 318,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_gps",
      "line": 319,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "colmin",
        "line": 319,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 319,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 319,
        "column": 34
      },
      {
        "id": ",",
        "value": ",",
        "line": 319,
        "column": 42
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 319,
        "column": 43
      },
      {
        "id": ":",
        "value": ":",
        "line": 319,
        "column": 48
      },
      {
        "id": "==",
        "value": "==",
        "line": 319,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 319,
        "column": 51
      },
      {
        "id": ":",
        "value": ":",
        "line": 319,
        "column": 54
      },
      {
        "id": "&",
        "value": "&",
        "line": 319,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 319,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 319,
        "column": 60
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 319,
        "column": 61
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 319,
        "column": 63
      },
      {
        "id": ":",
        "value": ":",
        "line": 319,
        "column": 65
      },
      {
        "id": "&",
        "value": "&",
        "line": 319,
        "column": 66
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 319,
        "column": 68
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 319,
        "column": 79
      },
      {
        "id": ":",
        "value": ":",
        "line": 319,
        "column": 85
      },
      {
        "id": "==",
        "value": "==",
        "line": 319,
        "column": 86
      },
      {
        "id": "number",
        "value": "0",
        "line": 319,
        "column": 88
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 319,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": ".",
        "line": 319,
        "column": 16
      },
      {
        "id": "]",
        "value": "]",
        "line": 319,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_gps",
      "line": 320,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "colmax",
        "line": 320,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 320,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 320,
        "column": 34
      },
      {
        "id": ",",
        "value": ",",
        "line": 320,
        "column": 42
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 320,
        "column": 43
      },
      {
        "id": ":",
        "value": ":",
        "line": 320,
        "column": 48
      },
      {
        "id": "==",
        "value": "==",
        "line": 320,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 320,
        "column": 51
      },
      {
        "id": ":",
        "value": ":",
        "line": 320,
        "column": 54
      },
      {
        "id": "&",
        "value": "&",
        "line": 320,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 320,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 320,
        "column": 60
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 320,
        "column": 61
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 320,
        "column": 63
      },
      {
        "id": ":",
        "value": ":",
        "line": 320,
        "column": 65
      },
      {
        "id": "&",
        "value": "&",
        "line": 320,
        "column": 66
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 320,
        "column": 68
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 320,
        "column": 79
      },
      {
        "id": ":",
        "value": ":",
        "line": 320,
        "column": 85
      },
      {
        "id": "==",
        "value": "==",
        "line": 320,
        "column": 86
      },
      {
        "id": "number",
        "value": "0",
        "line": 320,
        "column": 88
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 320,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": ".",
        "line": 320,
        "column": 16
      },
      {
        "id": "]",
        "value": "]",
        "line": 320,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 322,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_pooled",
        "line": 322,
        "column": 8
      },
      {
        "id": "==",
        "value": "==",
        "line": 322,
        "column": 19
      },
      {
        "id": "number",
        "value": "1",
        "line": 322,
        "column": 21
      },
      {
        "id": "{",
        "value": "{",
        "line": 322,
        "column": 24
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Min/max is done for each treatment CATEGORY vs other treatments pooled",
    "line": 323,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_gps",
      "line": 324,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "colmin",
        "line": 324,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 324,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 324,
        "column": 34
      },
      {
        "id": "[",
        "value": "[",
        "line": 324,
        "column": 42
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 324,
        "column": 43
      },
      {
        "id": ",",
        "value": ",",
        "line": 324,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 324,
        "column": 45
      },
      {
        "id": "]",
        "value": "]",
        "line": 324,
        "column": 47
      },
      {
        "id": ",",
        "value": ",",
        "line": 324,
        "column": 48
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 324,
        "column": 49
      },
      {
        "id": ":",
        "value": ":",
        "line": 324,
        "column": 54
      },
      {
        "id": "==",
        "value": "==",
        "line": 324,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 324,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 324,
        "column": 60
      },
      {
        "id": "&",
        "value": "&",
        "line": 324,
        "column": 61
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 324,
        "column": 63
      },
      {
        "id": ":",
        "value": ":",
        "line": 324,
        "column": 66
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 324,
        "column": 67
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 324,
        "column": 69
      },
      {
        "id": ":",
        "value": ":",
        "line": 324,
        "column": 71
      },
      {
        "id": "&",
        "value": "&",
        "line": 324,
        "column": 72
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 324,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 324,
        "column": 85
      },
      {
        "id": ":",
        "value": ":",
        "line": 324,
        "column": 91
      },
      {
        "id": "==",
        "value": "==",
        "line": 324,
        "column": 92
      },
      {
        "id": "number",
        "value": "0",
        "line": 324,
        "column": 94
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "1",
        "line": 324,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 324,
        "column": 15
      },
      {
        "id": "]",
        "value": "]",
        "line": 324,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_gps",
      "line": 325,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "colmin",
        "line": 325,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 325,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 325,
        "column": 34
      },
      {
        "id": "[",
        "value": "[",
        "line": 325,
        "column": 42
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 325,
        "column": 43
      },
      {
        "id": ",",
        "value": ",",
        "line": 325,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 325,
        "column": 45
      },
      {
        "id": "]",
        "value": "]",
        "line": 325,
        "column": 47
      },
      {
        "id": ",",
        "value": ",",
        "line": 325,
        "column": 48
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 325,
        "column": 49
      },
      {
        "id": ":",
        "value": ":",
        "line": 325,
        "column": 54
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 325,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 325,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 325,
        "column": 60
      },
      {
        "id": "&",
        "value": "&",
        "line": 325,
        "column": 61
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 325,
        "column": 63
      },
      {
        "id": ":",
        "value": ":",
        "line": 325,
        "column": 66
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 325,
        "column": 67
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 325,
        "column": 69
      },
      {
        "id": ":",
        "value": ":",
        "line": 325,
        "column": 71
      },
      {
        "id": "&",
        "value": "&",
        "line": 325,
        "column": 72
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 325,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 325,
        "column": 85
      },
      {
        "id": ":",
        "value": ":",
        "line": 325,
        "column": 91
      },
      {
        "id": "==",
        "value": "==",
        "line": 325,
        "column": 92
      },
      {
        "id": "number",
        "value": "0",
        "line": 325,
        "column": 94
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "2",
        "line": 325,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 325,
        "column": 15
      },
      {
        "id": "]",
        "value": "]",
        "line": 325,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_gps",
      "line": 326,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "colmax",
        "line": 326,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 326,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 326,
        "column": 34
      },
      {
        "id": "[",
        "value": "[",
        "line": 326,
        "column": 42
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 326,
        "column": 43
      },
      {
        "id": ",",
        "value": ",",
        "line": 326,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 326,
        "column": 45
      },
      {
        "id": "]",
        "value": "]",
        "line": 326,
        "column": 47
      },
      {
        "id": ",",
        "value": ",",
        "line": 326,
        "column": 48
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 326,
        "column": 49
      },
      {
        "id": ":",
        "value": ":",
        "line": 326,
        "column": 54
      },
      {
        "id": "==",
        "value": "==",
        "line": 326,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 326,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 326,
        "column": 60
      },
      {
        "id": "&",
        "value": "&",
        "line": 326,
        "column": 61
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 326,
        "column": 63
      },
      {
        "id": ":",
        "value": ":",
        "line": 326,
        "column": 66
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 326,
        "column": 67
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 326,
        "column": 69
      },
      {
        "id": ":",
        "value": ":",
        "line": 326,
        "column": 71
      },
      {
        "id": "&",
        "value": "&",
        "line": 326,
        "column": 72
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 326,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 326,
        "column": 85
      },
      {
        "id": ":",
        "value": ":",
        "line": 326,
        "column": 91
      },
      {
        "id": "==",
        "value": "==",
        "line": 326,
        "column": 92
      },
      {
        "id": "number",
        "value": "0",
        "line": 326,
        "column": 94
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "1",
        "line": 326,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 326,
        "column": 15
      },
      {
        "id": "]",
        "value": "]",
        "line": 326,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_gps",
      "line": 327,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "colmax",
        "line": 327,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 327,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 327,
        "column": 34
      },
      {
        "id": "[",
        "value": "[",
        "line": 327,
        "column": 42
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 327,
        "column": 43
      },
      {
        "id": ",",
        "value": ",",
        "line": 327,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 327,
        "column": 45
      },
      {
        "id": "]",
        "value": "]",
        "line": 327,
        "column": 47
      },
      {
        "id": ",",
        "value": ",",
        "line": 327,
        "column": 48
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 327,
        "column": 49
      },
      {
        "id": ":",
        "value": ":",
        "line": 327,
        "column": 54
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 327,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 327,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 327,
        "column": 60
      },
      {
        "id": "&",
        "value": "&",
        "line": 327,
        "column": 61
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 327,
        "column": 63
      },
      {
        "id": ":",
        "value": ":",
        "line": 327,
        "column": 66
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 327,
        "column": 67
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 327,
        "column": 69
      },
      {
        "id": ":",
        "value": ":",
        "line": 327,
        "column": 71
      },
      {
        "id": "&",
        "value": "&",
        "line": 327,
        "column": 72
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 327,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 327,
        "column": 85
      },
      {
        "id": ":",
        "value": ":",
        "line": 327,
        "column": 91
      },
      {
        "id": "==",
        "value": "==",
        "line": 327,
        "column": 92
      },
      {
        "id": "number",
        "value": "0",
        "line": 327,
        "column": 94
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "2",
        "line": 327,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 327,
        "column": 15
      },
      {
        "id": "]",
        "value": "]",
        "line": 327,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 329,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 329,
        "column": 8
      },
      {
        "id": ">",
        "value": ">",
        "line": 329,
        "column": 18
      },
      {
        "id": "number",
        "value": "0",
        "line": 329,
        "column": 19
      },
      {
        "id": "{",
        "value": "{",
        "line": 329,
        "column": 22
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Percentile-based overlap is done treatment-category-by-treatment-category",
    "line": 330,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 331,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_pooled",
        "line": 331,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 331,
        "column": 20
      },
      {
        "id": "number",
        "value": "0",
        "line": 331,
        "column": 22
      },
      {
        "id": "{",
        "value": "{",
        "line": 331,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_p_gps",
      "line": 332,
      "column": 6
    },
    "=": [
      {
        "id": "identifier",
        "value": "mm_quantile",
        "line": 332,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 332,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 332,
        "column": 42
      },
      {
        "id": ",",
        "value": ",",
        "line": 332,
        "column": 50
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 332,
        "column": 51
      },
      {
        "id": ":",
        "value": ":",
        "line": 332,
        "column": 56
      },
      {
        "id": "==",
        "value": "==",
        "line": 332,
        "column": 57
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 332,
        "column": 59
      },
      {
        "id": ":",
        "value": ":",
        "line": 332,
        "column": 62
      },
      {
        "id": "&",
        "value": "&",
        "line": 332,
        "column": 63
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 332,
        "column": 65
      },
      {
        "id": ":",
        "value": ":",
        "line": 332,
        "column": 68
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 332,
        "column": 69
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 332,
        "column": 71
      },
      {
        "id": ":",
        "value": ":",
        "line": 332,
        "column": 73
      },
      {
        "id": "&",
        "value": "&",
        "line": 332,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 332,
        "column": 76
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 332,
        "column": 87
      },
      {
        "id": ":",
        "value": ":",
        "line": 332,
        "column": 93
      },
      {
        "id": "==",
        "value": "==",
        "line": 332,
        "column": 94
      },
      {
        "id": "number",
        "value": "0",
        "line": 332,
        "column": 96
      },
      {
        "id": ",",
        "value": ",",
        "line": 332,
        "column": 98
      },
      {
        "id": "number",
        "value": "1",
        "line": 332,
        "column": 100
      },
      {
        "id": ",",
        "value": ",",
        "line": 332,
        "column": 101
      },
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 332,
        "column": 103
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 332,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": ".",
        "line": 332,
        "column": 19
      },
      {
        "id": "]",
        "value": "]",
        "line": 332,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_p_gps",
      "line": 333,
      "column": 6
    },
    "=": [
      {
        "id": "identifier",
        "value": "mm_quantile",
        "line": 333,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 333,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 333,
        "column": 42
      },
      {
        "id": ",",
        "value": ",",
        "line": 333,
        "column": 50
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 333,
        "column": 51
      },
      {
        "id": ":",
        "value": ":",
        "line": 333,
        "column": 56
      },
      {
        "id": "==",
        "value": "==",
        "line": 333,
        "column": 57
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 333,
        "column": 59
      },
      {
        "id": ":",
        "value": ":",
        "line": 333,
        "column": 62
      },
      {
        "id": "&",
        "value": "&",
        "line": 333,
        "column": 63
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 333,
        "column": 65
      },
      {
        "id": ":",
        "value": ":",
        "line": 333,
        "column": 68
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 333,
        "column": 69
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 333,
        "column": 71
      },
      {
        "id": ":",
        "value": ":",
        "line": 333,
        "column": 73
      },
      {
        "id": "&",
        "value": "&",
        "line": 333,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 333,
        "column": 76
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 333,
        "column": 87
      },
      {
        "id": ":",
        "value": ":",
        "line": 333,
        "column": 93
      },
      {
        "id": "==",
        "value": "==",
        "line": 333,
        "column": 94
      },
      {
        "id": "number",
        "value": "0",
        "line": 333,
        "column": 96
      },
      {
        "id": ",",
        "value": ",",
        "line": 333,
        "column": 98
      },
      {
        "id": "number",
        "value": "1",
        "line": 333,
        "column": 100
      },
      {
        "id": ",",
        "value": ",",
        "line": 333,
        "column": 101
      },
      {
        "id": "number",
        "value": "1",
        "line": 333,
        "column": 103
      },
      {
        "id": "-",
        "value": "-",
        "line": 333,
        "column": 104
      },
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 333,
        "column": 105
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 333,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": ".",
        "line": 333,
        "column": 19
      },
      {
        "id": "]",
        "value": "]",
        "line": 333,
        "column": 20
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Percentile-based overlap is done using the percentiles from the treatment of interest vs pooled all other treatments",
    "line": 335,
    "column": 5
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 336,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_pooled",
        "line": 336,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 336,
        "column": 20
      },
      {
        "id": "number",
        "value": "1",
        "line": 336,
        "column": 22
      },
      {
        "id": "{",
        "value": "{",
        "line": 336,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_p_gps",
      "line": 337,
      "column": 6
    },
    "=": [
      {
        "id": "identifier",
        "value": "mm_quantile",
        "line": 337,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 337,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 337,
        "column": 42
      },
      {
        "id": "[",
        "value": "[",
        "line": 337,
        "column": 50
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 337,
        "column": 51
      },
      {
        "id": ",",
        "value": ",",
        "line": 337,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 337,
        "column": 53
      },
      {
        "id": "]",
        "value": "]",
        "line": 337,
        "column": 55
      },
      {
        "id": ",",
        "value": ",",
        "line": 337,
        "column": 56
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 337,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 337,
        "column": 62
      },
      {
        "id": "==",
        "value": "==",
        "line": 337,
        "column": 63
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 337,
        "column": 65
      },
      {
        "id": ":",
        "value": ":",
        "line": 337,
        "column": 68
      },
      {
        "id": "&",
        "value": "&",
        "line": 337,
        "column": 69
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 337,
        "column": 71
      },
      {
        "id": ":",
        "value": ":",
        "line": 337,
        "column": 74
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 337,
        "column": 75
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 337,
        "column": 77
      },
      {
        "id": ":",
        "value": ":",
        "line": 337,
        "column": 79
      },
      {
        "id": "&",
        "value": "&",
        "line": 337,
        "column": 80
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 337,
        "column": 82
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 337,
        "column": 93
      },
      {
        "id": ":",
        "value": ":",
        "line": 337,
        "column": 99
      },
      {
        "id": "==",
        "value": "==",
        "line": 337,
        "column": 100
      },
      {
        "id": "number",
        "value": "0",
        "line": 337,
        "column": 102
      },
      {
        "id": ",",
        "value": ",",
        "line": 337,
        "column": 104
      },
      {
        "id": "number",
        "value": "1",
        "line": 337,
        "column": 106
      },
      {
        "id": ",",
        "value": ",",
        "line": 337,
        "column": 107
      },
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 337,
        "column": 109
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "1",
        "line": 337,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 337,
        "column": 18
      },
      {
        "id": "]",
        "value": "]",
        "line": 337,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "min_p_gps",
      "line": 338,
      "column": 6
    },
    "=": [
      {
        "id": "identifier",
        "value": "mm_quantile",
        "line": 338,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 338,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 338,
        "column": 42
      },
      {
        "id": "[",
        "value": "[",
        "line": 338,
        "column": 50
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 338,
        "column": 51
      },
      {
        "id": ",",
        "value": ",",
        "line": 338,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 338,
        "column": 53
      },
      {
        "id": "]",
        "value": "]",
        "line": 338,
        "column": 55
      },
      {
        "id": ",",
        "value": ",",
        "line": 338,
        "column": 56
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 338,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 338,
        "column": 62
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 338,
        "column": 63
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 338,
        "column": 65
      },
      {
        "id": ":",
        "value": ":",
        "line": 338,
        "column": 68
      },
      {
        "id": "&",
        "value": "&",
        "line": 338,
        "column": 69
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 338,
        "column": 71
      },
      {
        "id": ":",
        "value": ":",
        "line": 338,
        "column": 74
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 338,
        "column": 75
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 338,
        "column": 77
      },
      {
        "id": ":",
        "value": ":",
        "line": 338,
        "column": 79
      },
      {
        "id": "&",
        "value": "&",
        "line": 338,
        "column": 80
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 338,
        "column": 82
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 338,
        "column": 93
      },
      {
        "id": ":",
        "value": ":",
        "line": 338,
        "column": 99
      },
      {
        "id": "==",
        "value": "==",
        "line": 338,
        "column": 100
      },
      {
        "id": "number",
        "value": "0",
        "line": 338,
        "column": 102
      },
      {
        "id": ",",
        "value": ",",
        "line": 338,
        "column": 104
      },
      {
        "id": "number",
        "value": "1",
        "line": 338,
        "column": 106
      },
      {
        "id": ",",
        "value": ",",
        "line": 338,
        "column": 107
      },
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 338,
        "column": 109
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "2",
        "line": 338,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 338,
        "column": 18
      },
      {
        "id": "]",
        "value": "]",
        "line": 338,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_p_gps",
      "line": 339,
      "column": 6
    },
    "=": [
      {
        "id": "identifier",
        "value": "mm_quantile",
        "line": 339,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 339,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 339,
        "column": 42
      },
      {
        "id": "[",
        "value": "[",
        "line": 339,
        "column": 50
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 339,
        "column": 51
      },
      {
        "id": ",",
        "value": ",",
        "line": 339,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 339,
        "column": 53
      },
      {
        "id": "]",
        "value": "]",
        "line": 339,
        "column": 55
      },
      {
        "id": ",",
        "value": ",",
        "line": 339,
        "column": 56
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 339,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 339,
        "column": 62
      },
      {
        "id": "==",
        "value": "==",
        "line": 339,
        "column": 63
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 339,
        "column": 65
      },
      {
        "id": ":",
        "value": ":",
        "line": 339,
        "column": 68
      },
      {
        "id": "&",
        "value": "&",
        "line": 339,
        "column": 69
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 339,
        "column": 71
      },
      {
        "id": ":",
        "value": ":",
        "line": 339,
        "column": 74
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 339,
        "column": 75
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 339,
        "column": 77
      },
      {
        "id": ":",
        "value": ":",
        "line": 339,
        "column": 79
      },
      {
        "id": "&",
        "value": "&",
        "line": 339,
        "column": 80
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 339,
        "column": 82
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 339,
        "column": 93
      },
      {
        "id": ":",
        "value": ":",
        "line": 339,
        "column": 99
      },
      {
        "id": "==",
        "value": "==",
        "line": 339,
        "column": 100
      },
      {
        "id": "number",
        "value": "0",
        "line": 339,
        "column": 102
      },
      {
        "id": ",",
        "value": ",",
        "line": 339,
        "column": 104
      },
      {
        "id": "number",
        "value": "1",
        "line": 339,
        "column": 106
      },
      {
        "id": ",",
        "value": ",",
        "line": 339,
        "column": 107
      },
      {
        "id": "number",
        "value": "1",
        "line": 339,
        "column": 109
      },
      {
        "id": "-",
        "value": "-",
        "line": 339,
        "column": 110
      },
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 339,
        "column": 111
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "1",
        "line": 339,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 339,
        "column": 18
      },
      {
        "id": "]",
        "value": "]",
        "line": 339,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "max_p_gps",
      "line": 340,
      "column": 6
    },
    "=": [
      {
        "id": "identifier",
        "value": "mm_quantile",
        "line": 340,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "select",
        "line": 340,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 340,
        "column": 42
      },
      {
        "id": "[",
        "value": "[",
        "line": 340,
        "column": 50
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 340,
        "column": 51
      },
      {
        "id": ",",
        "value": ",",
        "line": 340,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 340,
        "column": 53
      },
      {
        "id": "]",
        "value": "]",
        "line": 340,
        "column": 55
      },
      {
        "id": ",",
        "value": ",",
        "line": 340,
        "column": 56
      },
      {
        "id": "identifier",
        "value": "t_cat",
        "line": 340,
        "column": 57
      },
      {
        "id": ":",
        "value": ":",
        "line": 340,
        "column": 62
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 340,
        "column": 63
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 340,
        "column": 65
      },
      {
        "id": ":",
        "value": ":",
        "line": 340,
        "column": 68
      },
      {
        "id": "&",
        "value": "&",
        "line": 340,
        "column": 69
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 340,
        "column": 71
      },
      {
        "id": ":",
        "value": ":",
        "line": 340,
        "column": 74
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 340,
        "column": 75
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 340,
        "column": 77
      },
      {
        "id": ":",
        "value": ":",
        "line": 340,
        "column": 79
      },
      {
        "id": "&",
        "value": "&",
        "line": 340,
        "column": 80
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 340,
        "column": 82
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 340,
        "column": 93
      },
      {
        "id": ":",
        "value": ":",
        "line": 340,
        "column": 99
      },
      {
        "id": "==",
        "value": "==",
        "line": 340,
        "column": 100
      },
      {
        "id": "number",
        "value": "0",
        "line": 340,
        "column": 102
      },
      {
        "id": ",",
        "value": ",",
        "line": 340,
        "column": 104
      },
      {
        "id": "number",
        "value": "1",
        "line": 340,
        "column": 106
      },
      {
        "id": ",",
        "value": ",",
        "line": 340,
        "column": 107
      },
      {
        "id": "number",
        "value": "1",
        "line": 340,
        "column": 109
      },
      {
        "id": "-",
        "value": "-",
        "line": 340,
        "column": 110
      },
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 340,
        "column": 111
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "2",
        "line": 340,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 340,
        "column": 18
      },
      {
        "id": "]",
        "value": "]",
        "line": 340,
        "column": 20
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Overlap condition",
    "line": 345,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// If ovlp_one_tail == 0, for EACH TREATMENT LEVEL will mark the individuals with evaluated gps ",
    "line": 346,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// greater or equal to the maximum of min_gps matrix (that is for each row ",
    "line": 347,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// of min_gps), and less or equal to the minimum of the max_gps matrix, for each row",
    "line": 348,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 349,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_one_tail",
        "line": 349,
        "column": 7
      },
      {
        "id": "==",
        "value": "==",
        "line": 349,
        "column": 21
      },
      {
        "id": "number",
        "value": "0",
        "line": 349,
        "column": 24
      },
      {
        "id": "{",
        "value": "{",
        "line": 349,
        "column": 27
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "ovlp_mat",
      "line": 350,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 350,
        "column": 15
      },
      {
        "id": ":",
        "value": ":",
        "line": 350,
        "column": 23
      },
      {
        "id": ">",
        "value": ">",
        "line": 350,
        "column": 24
      },
      {
        "id": "=",
        "value": "=",
        "line": 350,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "colmax",
        "line": 350,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "min_gps",
        "line": 350,
        "column": 33
      },
      {
        "id": ":",
        "value": ":",
        "line": 350,
        "column": 43
      },
      {
        "id": "&",
        "value": "&",
        "line": 350,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 350,
        "column": 47
      },
      {
        "id": ":",
        "value": ":",
        "line": 350,
        "column": 55
      },
      {
        "id": "<",
        "value": "<",
        "line": 350,
        "column": 56
      },
      {
        "id": "=",
        "value": "=",
        "line": 350,
        "column": 57
      },
      {
        "id": "identifier",
        "value": "colmin",
        "line": 350,
        "column": 58
      },
      {
        "id": "identifier",
        "value": "max_gps",
        "line": 350,
        "column": 65
      }
    ]
  },
  {
    "id": "comment",
    "value": "// If ovlp_one_tail == 1, for EACH TREATMENT LEVEL will mark the individuals with evaluated gps ",
    "line": 352,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// greater or equal ONLY to the maximum of min_gps matrix (that is for each row ",
    "line": 353,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// of min_gps) ",
    "line": 354,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 355,
      "column": 3
    },
    "varlist": [
      {
        "id": "{",
        "value": "{",
        "line": 355,
        "column": 8
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "ovlp_mat",
      "line": 356,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 356,
        "column": 15
      },
      {
        "id": ":",
        "value": ":",
        "line": 356,
        "column": 23
      },
      {
        "id": ">",
        "value": ">",
        "line": 356,
        "column": 24
      },
      {
        "id": "=",
        "value": "=",
        "line": 356,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "colmax",
        "line": 356,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "min_gps",
        "line": 356,
        "column": 33
      }
    ]
  },
  {
    "id": "comment",
    "value": "// For percentile-based overlap, also mark obs based on two-tails or one-tail",
    "line": 358,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 359,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 359,
        "column": 7
      },
      {
        "id": ">",
        "value": ">",
        "line": 359,
        "column": 17
      },
      {
        "id": "number",
        "value": "0",
        "line": 359,
        "column": 18
      },
      {
        "id": "{",
        "value": "{",
        "line": 359,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 360,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_one_tail",
        "line": 360,
        "column": 8
      },
      {
        "id": "==",
        "value": "==",
        "line": 360,
        "column": 22
      },
      {
        "id": "number",
        "value": "0",
        "line": 360,
        "column": 25
      },
      {
        "id": "{",
        "value": "{",
        "line": 360,
        "column": 28
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "ovlp_p_mat",
      "line": 361,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 361,
        "column": 17
      },
      {
        "id": ":",
        "value": ":",
        "line": 361,
        "column": 25
      },
      {
        "id": ">",
        "value": ">",
        "line": 361,
        "column": 26
      },
      {
        "id": "=",
        "value": "=",
        "line": 361,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "colmax",
        "line": 361,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "min_p_gps",
        "line": 361,
        "column": 35
      },
      {
        "id": ":",
        "value": ":",
        "line": 361,
        "column": 47
      },
      {
        "id": "&",
        "value": "&",
        "line": 361,
        "column": 48
      },
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 361,
        "column": 51
      },
      {
        "id": ":",
        "value": ":",
        "line": 361,
        "column": 59
      },
      {
        "id": "<",
        "value": "<",
        "line": 361,
        "column": 60
      },
      {
        "id": "=",
        "value": "=",
        "line": 361,
        "column": 61
      },
      {
        "id": "identifier",
        "value": "colmin",
        "line": 361,
        "column": 62
      },
      {
        "id": "identifier",
        "value": "max_p_gps",
        "line": 361,
        "column": 69
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 363,
      "column": 4
    },
    "varlist": [
      {
        "id": "{",
        "value": "{",
        "line": 363,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "ovlp_p_mat",
      "line": 364,
      "column": 5
    },
    "=": [
      {
        "id": "identifier",
        "value": "gps_tcat",
        "line": 364,
        "column": 17
      },
      {
        "id": ":",
        "value": ":",
        "line": 364,
        "column": 25
      },
      {
        "id": ">",
        "value": ">",
        "line": 364,
        "column": 26
      },
      {
        "id": "=",
        "value": "=",
        "line": 364,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "colmax",
        "line": 364,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "min_p_gps",
        "line": 364,
        "column": 35
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Overlap=1 indicates that the individual satisfies these two conditions for ",
    "line": 368,
    "column": 3
  },
  {
    "id": "comment",
    "value": "// ALL evaluated treatments",
    "line": 369,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "overlap",
      "line": 370,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "rowsum",
        "line": 370,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "ovlp_mat",
        "line": 370,
        "column": 18
      },
      {
        "id": ":",
        "value": ":",
        "line": 370,
        "column": 27
      },
      {
        "id": "==",
        "value": "==",
        "line": 370,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "tnr",
        "line": 370,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "overlap",
      "line": 371,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 371,
        "column": 56
      },
      {
        "id": "identifier",
        "value": "rows",
        "line": 371,
        "column": 58
      },
      {
        "id": "identifier",
        "value": "mm_which",
        "line": 371,
        "column": 63
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 371,
        "column": 72
      },
      {
        "id": ":",
        "value": ":",
        "line": 371,
        "column": 75
      },
      {
        "id": "==",
        "value": "==",
        "line": 371,
        "column": 76
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 371,
        "column": 78
      },
      {
        "id": ":",
        "value": ":",
        "line": 371,
        "column": 80
      },
      {
        "id": "|",
        "value": "|",
        "line": 371,
        "column": 81
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 371,
        "column": 83
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 371,
        "column": 94
      },
      {
        "id": ":",
        "value": ":",
        "line": 371,
        "column": 100
      },
      {
        "id": ">",
        "value": ">",
        "line": 371,
        "column": 101
      },
      {
        "id": "number",
        "value": "0",
        "line": 371,
        "column": 102
      },
      {
        "id": ",",
        "value": ",",
        "line": 371,
        "column": 105
      },
      {
        "id": "number",
        "value": "1",
        "line": 371,
        "column": 106
      },
      {
        "id": ",",
        "value": ",",
        "line": 371,
        "column": 107
      },
      {
        "id": "number",
        "value": "0",
        "line": 371,
        "column": 108
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "mm_which",
        "line": 371,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 371,
        "column": 20
      },
      {
        "id": ":",
        "value": ":",
        "line": 371,
        "column": 23
      },
      {
        "id": "==",
        "value": "==",
        "line": 371,
        "column": 24
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 371,
        "column": 26
      },
      {
        "id": ":",
        "value": ":",
        "line": 371,
        "column": 28
      },
      {
        "id": "|",
        "value": "|",
        "line": 371,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 371,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 371,
        "column": 42
      },
      {
        "id": ":",
        "value": ":",
        "line": 371,
        "column": 48
      },
      {
        "id": ">",
        "value": ">",
        "line": 371,
        "column": 49
      },
      {
        "id": "number",
        "value": "0",
        "line": 371,
        "column": 50
      }
    ],
    "options": [
      {
        "id": "number",
        "value": "1",
        "line": 371,
        "column": 53
      },
      {
        "id": "]",
        "value": "]",
        "line": 371,
        "column": 54
      }
    ]
  },
  {
    "id": "comment",
    "value": "// In addition impose that gps is strictly>0 and strictly<1",
    "line": 372,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "overlap",
      "line": 373,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 373,
        "column": 43
      },
      {
        "id": "identifier",
        "value": "rows",
        "line": 373,
        "column": 45
      },
      {
        "id": "identifier",
        "value": "mm_which",
        "line": 373,
        "column": 50
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 373,
        "column": 59
      },
      {
        "id": ":",
        "value": ":",
        "line": 373,
        "column": 62
      },
      {
        "id": "==",
        "value": "==",
        "line": 373,
        "column": 63
      },
      {
        "id": "number",
        "value": "0",
        "line": 373,
        "column": 65
      },
      {
        "id": ":",
        "value": ":",
        "line": 373,
        "column": 67
      },
      {
        "id": "|",
        "value": "|",
        "line": 373,
        "column": 68
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 373,
        "column": 70
      },
      {
        "id": ":",
        "value": ":",
        "line": 373,
        "column": 73
      },
      {
        "id": ">",
        "value": ">",
        "line": 373,
        "column": 74
      },
      {
        "id": "=",
        "value": "=",
        "line": 373,
        "column": 75
      },
      {
        "id": "number",
        "value": "1",
        "line": 373,
        "column": 76
      },
      {
        "id": ",",
        "value": ",",
        "line": 373,
        "column": 79
      },
      {
        "id": "number",
        "value": "1",
        "line": 373,
        "column": 80
      },
      {
        "id": ",",
        "value": ",",
        "line": 373,
        "column": 81
      },
      {
        "id": "number",
        "value": "0",
        "line": 373,
        "column": 82
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "mm_which",
        "line": 373,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 373,
        "column": 20
      },
      {
        "id": ":",
        "value": ":",
        "line": 373,
        "column": 23
      },
      {
        "id": "==",
        "value": "==",
        "line": 373,
        "column": 24
      },
      {
        "id": "number",
        "value": "0",
        "line": 373,
        "column": 26
      },
      {
        "id": ":",
        "value": ":",
        "line": 373,
        "column": 28
      },
      {
        "id": "|",
        "value": "|",
        "line": 373,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 373,
        "column": 31
      },
      {
        "id": ":",
        "value": ":",
        "line": 373,
        "column": 34
      },
      {
        "id": ">",
        "value": ">",
        "line": 373,
        "column": 35
      },
      {
        "id": "=",
        "value": "=",
        "line": 373,
        "column": 36
      },
      {
        "id": "number",
        "value": "1",
        "line": 373,
        "column": 37
      }
    ],
    "options": [
      {
        "id": "number",
        "value": "1",
        "line": 373,
        "column": 40
      },
      {
        "id": "]",
        "value": "]",
        "line": 373,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 374,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 374,
        "column": 7
      },
      {
        "id": ">",
        "value": ">",
        "line": 374,
        "column": 17
      },
      {
        "id": "number",
        "value": "0",
        "line": 374,
        "column": 18
      },
      {
        "id": "{",
        "value": "{",
        "line": 374,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "overlap_p",
      "line": 375,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "rowsum",
        "line": 375,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "ovlp_p_mat",
        "line": 375,
        "column": 21
      },
      {
        "id": ":",
        "value": ":",
        "line": 375,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 375,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "t_catnr",
        "line": 375,
        "column": 35
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "overlap_p",
      "line": 376,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 376,
        "column": 59
      },
      {
        "id": "identifier",
        "value": "rows",
        "line": 376,
        "column": 61
      },
      {
        "id": "identifier",
        "value": "mm_which",
        "line": 376,
        "column": 66
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 376,
        "column": 75
      },
      {
        "id": ":",
        "value": ":",
        "line": 376,
        "column": 78
      },
      {
        "id": "==",
        "value": "==",
        "line": 376,
        "column": 79
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 376,
        "column": 81
      },
      {
        "id": ":",
        "value": ":",
        "line": 376,
        "column": 83
      },
      {
        "id": "|",
        "value": "|",
        "line": 376,
        "column": 84
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 376,
        "column": 86
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 376,
        "column": 97
      },
      {
        "id": ":",
        "value": ":",
        "line": 376,
        "column": 103
      },
      {
        "id": ">",
        "value": ">",
        "line": 376,
        "column": 104
      },
      {
        "id": "number",
        "value": "0",
        "line": 376,
        "column": 105
      },
      {
        "id": ",",
        "value": ",",
        "line": 376,
        "column": 108
      },
      {
        "id": "number",
        "value": "1",
        "line": 376,
        "column": 109
      },
      {
        "id": ",",
        "value": ",",
        "line": 376,
        "column": 110
      },
      {
        "id": "number",
        "value": "0",
        "line": 376,
        "column": 111
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "mm_which",
        "line": 376,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 376,
        "column": 23
      },
      {
        "id": ":",
        "value": ":",
        "line": 376,
        "column": 26
      },
      {
        "id": "==",
        "value": "==",
        "line": 376,
        "column": 27
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 376,
        "column": 29
      },
      {
        "id": ":",
        "value": ":",
        "line": 376,
        "column": 31
      },
      {
        "id": "|",
        "value": "|",
        "line": 376,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "rowmissing",
        "line": 376,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "gps_t",
        "line": 376,
        "column": 45
      },
      {
        "id": ":",
        "value": ":",
        "line": 376,
        "column": 51
      },
      {
        "id": ">",
        "value": ">",
        "line": 376,
        "column": 52
      },
      {
        "id": "number",
        "value": "0",
        "line": 376,
        "column": 53
      }
    ],
    "options": [
      {
        "id": "number",
        "value": "1",
        "line": 376,
        "column": 56
      },
      {
        "id": "]",
        "value": "]",
        "line": 376,
        "column": 57
      }
    ]
  },
  {
    "id": "comment",
    "value": "// In addition impose that gps is strictly>0 and strictly<1",
    "line": 377,
    "column": 4
  },
  {
    "command": {
      "id": "identifier",
      "value": "overlap_p",
      "line": 378,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "J",
        "line": 378,
        "column": 46
      },
      {
        "id": "identifier",
        "value": "rows",
        "line": 378,
        "column": 48
      },
      {
        "id": "identifier",
        "value": "mm_which",
        "line": 378,
        "column": 53
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 378,
        "column": 62
      },
      {
        "id": ":",
        "value": ":",
        "line": 378,
        "column": 65
      },
      {
        "id": "==",
        "value": "==",
        "line": 378,
        "column": 66
      },
      {
        "id": "number",
        "value": "0",
        "line": 378,
        "column": 68
      },
      {
        "id": ":",
        "value": ":",
        "line": 378,
        "column": 70
      },
      {
        "id": "|",
        "value": "|",
        "line": 378,
        "column": 71
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 378,
        "column": 73
      },
      {
        "id": ":",
        "value": ":",
        "line": 378,
        "column": 76
      },
      {
        "id": ">",
        "value": ">",
        "line": 378,
        "column": 77
      },
      {
        "id": "=",
        "value": "=",
        "line": 378,
        "column": 78
      },
      {
        "id": "number",
        "value": "1",
        "line": 378,
        "column": 79
      },
      {
        "id": ",",
        "value": ",",
        "line": 378,
        "column": 82
      },
      {
        "id": "number",
        "value": "1",
        "line": 378,
        "column": 83
      },
      {
        "id": ",",
        "value": ",",
        "line": 378,
        "column": 84
      },
      {
        "id": "number",
        "value": "0",
        "line": 378,
        "column": 85
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "mm_which",
        "line": 378,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 378,
        "column": 23
      },
      {
        "id": ":",
        "value": ":",
        "line": 378,
        "column": 26
      },
      {
        "id": "==",
        "value": "==",
        "line": 378,
        "column": 27
      },
      {
        "id": "number",
        "value": "0",
        "line": 378,
        "column": 29
      },
      {
        "id": ":",
        "value": ":",
        "line": 378,
        "column": 31
      },
      {
        "id": "|",
        "value": "|",
        "line": 378,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 378,
        "column": 34
      },
      {
        "id": ":",
        "value": ":",
        "line": 378,
        "column": 37
      },
      {
        "id": ">",
        "value": ">",
        "line": 378,
        "column": 38
      },
      {
        "id": "=",
        "value": "=",
        "line": 378,
        "column": 39
      },
      {
        "id": "number",
        "value": "1",
        "line": 378,
        "column": 40
      }
    ],
    "options": [
      {
        "id": "number",
        "value": "1",
        "line": 378,
        "column": 43
      },
      {
        "id": "]",
        "value": "]",
        "line": 378,
        "column": 44
      }
    ]
  },
  {
    "id": "comment",
    "value": "// Stores overlap as temporary variable \"gps_suffix_ovlp\"",
    "line": 381,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "ovlpname",
      "line": 382,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 382,
        "column": 12
      },
      {
        "id": "number",
        "value": "1",
        "line": 382,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx",
      "line": 383,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_addvar",
        "line": 383,
        "column": 7
      },
      {
        "id": "string",
        "value": "\"double\"",
        "line": 383,
        "column": 17
      },
      {
        "id": ",",
        "value": ",",
        "line": 383,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "ovlpname",
        "line": 383,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_store",
      "line": 384,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": ".",
        "line": 384,
        "column": 12
      },
      {
        "id": ",",
        "value": ",",
        "line": 384,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "idx",
        "line": 384,
        "column": 14
      },
      {
        "id": ",",
        "value": ",",
        "line": 384,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 384,
        "column": 18
      },
      {
        "id": ",",
        "value": ",",
        "line": 384,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "overlap",
        "line": 384,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_local",
      "line": 385,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gps_suffix",
        "line": 385,
        "column": 12
      },
      {
        "id": "+",
        "value": "+",
        "line": 385,
        "column": 22
      },
      {
        "id": "string",
        "value": "\"_ovlp\"",
        "line": 385,
        "column": 23
      },
      {
        "id": ",",
        "value": ",",
        "line": 385,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "ovlpname",
        "line": 385,
        "column": 31
      }
    ]
  },
  {
    "id": "comment",
    "value": "// If ovlp_value>0 stores additional variable as temporary variable \"gps_suffix_ovlp_p\"",
    "line": 386,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 387,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ovlp_value",
        "line": 387,
        "column": 7
      },
      {
        "id": ">",
        "value": ">",
        "line": 387,
        "column": 17
      },
      {
        "id": "number",
        "value": "0",
        "line": 387,
        "column": 18
      },
      {
        "id": "{",
        "value": "{",
        "line": 387,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "ovlpname_p",
      "line": 388,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_tempname",
        "line": 388,
        "column": 15
      },
      {
        "id": "number",
        "value": "1",
        "line": 388,
        "column": 27
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "idx2",
      "line": 389,
      "column": 4
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_addvar",
        "line": 389,
        "column": 9
      },
      {
        "id": "string",
        "value": "\"double\"",
        "line": 389,
        "column": 19
      },
      {
        "id": ",",
        "value": ",",
        "line": 389,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "ovlpname_p",
        "line": 389,
        "column": 28
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_store",
      "line": 390,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": ".",
        "line": 390,
        "column": 13
      },
      {
        "id": ",",
        "value": ",",
        "line": 390,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "idx2",
        "line": 390,
        "column": 15
      },
      {
        "id": ",",
        "value": ",",
        "line": 390,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "touse",
        "line": 390,
        "column": 20
      },
      {
        "id": ",",
        "value": ",",
        "line": 390,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "overlap_p",
        "line": 390,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_local",
      "line": 391,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gps_suffix",
        "line": 391,
        "column": 13
      },
      {
        "id": "+",
        "value": "+",
        "line": 391,
        "column": 23
      },
      {
        "id": "string",
        "value": "\"_ovlp_p\"",
        "line": 391,
        "column": 24
      },
      {
        "id": ",",
        "value": ",",
        "line": 391,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "ovlpname_p",
        "line": 391,
        "column": 34
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mata",
      "line": 395,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mosave",
        "line": 395,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "gps",
        "line": 395,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 395,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "end",
      "line": 396,
      "column": 1
    }
  }
]