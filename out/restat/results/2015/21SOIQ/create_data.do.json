[
  {
    "command": {
      "id": "identifier",
      "value": "clear",
      "line": 1,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "set",
      "line": 3,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "more",
        "line": 3,
        "column": 5
      },
      {
        "id": "identifier",
        "value": "off",
        "line": 3,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "set",
      "line": 5,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mem",
        "line": 5,
        "column": 5
      },
      {
        "id": "number",
        "value": "5000m",
        "line": 5,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "set",
      "line": 6,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "matsize",
        "line": 6,
        "column": 5
      },
      {
        "id": "number",
        "value": "500",
        "line": 6,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "duplicates",
      "line": 8,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "drop",
        "line": 8,
        "column": 12
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 10,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "b_year",
        "line": 10,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "substr",
        "line": 10,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "fodtaar",
        "line": 10,
        "column": 19
      },
      {
        "id": ",",
        "value": ",",
        "line": 10,
        "column": 26
      },
      {
        "id": "number",
        "value": "1",
        "line": 10,
        "column": 27
      },
      {
        "id": ",",
        "value": ",",
        "line": 10,
        "column": 28
      },
      {
        "id": "number",
        "value": "4",
        "line": 10,
        "column": 29
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 11,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "b_month",
        "line": 11,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "substr",
        "line": 11,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "fodtaar",
        "line": 11,
        "column": 20
      },
      {
        "id": ",",
        "value": ",",
        "line": 11,
        "column": 27
      },
      {
        "id": "number",
        "value": "5",
        "line": 11,
        "column": 29
      },
      {
        "id": ",",
        "value": ",",
        "line": 11,
        "column": 30
      },
      {
        "id": "number",
        "value": "2",
        "line": 11,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 12,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "b_day",
        "line": 12,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "substr",
        "line": 12,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "fodtaar",
        "line": 12,
        "column": 18
      },
      {
        "id": ",",
        "value": ",",
        "line": 12,
        "column": 25
      },
      {
        "id": "number",
        "value": "7",
        "line": 12,
        "column": 26
      },
      {
        "id": ",",
        "value": ",",
        "line": 12,
        "column": 27
      },
      {
        "id": "number",
        "value": "2",
        "line": 12,
        "column": 28
      }
    ]
  },
  {
    "id": "comment",
    "value": "*change to ellapse date format",
    "line": 13,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 14,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "efodtaar",
        "line": 14,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "date",
        "line": 14,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "fodtaar",
        "line": 14,
        "column": 19
      },
      {
        "id": ",",
        "value": ",",
        "line": 14,
        "column": 26
      },
      {
        "id": "string",
        "value": "\"YMD\"",
        "line": 14,
        "column": 27
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "format",
      "line": 15,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "efodtaar",
        "line": 15,
        "column": 8
      },
      {
        "id": "%",
        "value": "%",
        "line": 15,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "td",
        "line": 15,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 16,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "fodtaar",
        "line": 16,
        "column": 6
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 17,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "efodtaar",
        "line": 17,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "fodtaar",
        "line": 17,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "destring",
      "line": 19,
      "column": 1
    },
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 19,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "force",
        "line": 19,
        "column": 19
      }
    ]
  },
  {
    "id": "comment",
    "value": "*drop if both mother and father's id is missing (0)",
    "line": 21,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 22,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "mor_lnr",
        "line": 22,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 22,
        "column": 16
      },
      {
        "id": "number",
        "value": "0",
        "line": 22,
        "column": 18
      },
      {
        "id": "&",
        "value": "&",
        "line": 22,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "far_lnr",
        "line": 22,
        "column": 22
      },
      {
        "id": "==",
        "value": "==",
        "line": 22,
        "column": 29
      },
      {
        "id": "number",
        "value": "0",
        "line": 22,
        "column": 31
      }
    ]
  },
  {
    "id": "comment",
    "value": "*keep 1986-1995 cohorts",
    "line": 26,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 27,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "b_year",
        "line": 27,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 27,
        "column": 15
      },
      {
        "id": "number",
        "value": "1985",
        "line": 27,
        "column": 16
      },
      {
        "id": "&",
        "value": "&",
        "line": 27,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "b_year",
        "line": 27,
        "column": 23
      },
      {
        "id": "<",
        "value": "<",
        "line": 27,
        "column": 29
      },
      {
        "id": "number",
        "value": "1996",
        "line": 27,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 29,
      "column": 1
    },
    "varlist": [
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "ssb",
        "line": 29,
        "column": 7
      },
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "ovibos",
        "line": 29,
        "column": 11
      },
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "a1",
        "line": 29,
        "column": 18
      },
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "swp",
        "line": 29,
        "column": 21
      },
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "kav",
        "line": 29,
        "column": 25
      },
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "wk24",
        "line": 29,
        "column": 29
      },
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "allreforms",
        "line": 29,
        "column": 34
      },
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 29,
        "column": 45
      },
      {
        "id": "/",
        "value": "/",
        "line": 29,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "cohorts_86_95.dta",
        "line": 29,
        "column": 50
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 29,
        "column": 68
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "clear",
      "line": 31,
      "column": 1
    }
  },
  {
    "id": "comment",
    "value": "*b.: grades",
    "line": 33,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "des",
      "line": 35,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "using",
        "line": 35,
        "column": 5
      },
      {
        "id": "string",
        "value": "\"/ssb/ovibos/a1/swp/data/wk48/nudb/score_gsk_g2001g2002.dta\"",
        "line": 35,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 39,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "y",
        "line": 39,
        "column": 9
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "g2001g2002",
        "line": 39,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "g2002g2003",
        "line": 39,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "g2003g2004",
        "line": 39,
        "column": 36
      },
      {
        "id": "identifier",
        "value": "g2004g2005",
        "line": 39,
        "column": 47
      },
      {
        "id": "identifier",
        "value": "g2005g2006",
        "line": 39,
        "column": 58
      },
      {
        "id": "identifier",
        "value": "g2006g2007",
        "line": 39,
        "column": 69
      },
      {
        "id": "identifier",
        "value": "g2007g2008",
        "line": 39,
        "column": 80
      },
      {
        "id": "identifier",
        "value": "g2008g2009",
        "line": 39,
        "column": 91
      },
      {
        "id": "{",
        "value": "{",
        "line": 39,
        "column": 102
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "clear",
      "line": 41,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 43,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "lnr",
        "line": 43,
        "column": 5
      },
      {
        "id": "identifier",
        "value": "mun",
        "line": 43,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "skr",
        "line": 43,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "stp",
        "line": 43,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 43,
        "column": 21
      },
      {
        "id": "string",
        "value": "\"/ssb/ovibos/a1/swp/data/wk48/nudb/score_gsk_`y'.dta\n\ndestring, replace force\nduplicates drop\ndrop if lnr==0\n\nbys lnr: egen stpaver=mean(stp)\nbys lnr: egen munaver=mean(mun)\nbys lnr: egen skraver=mean(skr)\n\n\nsort lnr\ndrop if lnr==lnr[_n-1]\nkeep lnr stpaver munaver skraver\nsort lnr\nmerge m:1 lnr using /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\n\ndrop if _merge==1\ndrop _merge\n\nsort lnr\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta,replace\n\n}\n\n\n\nclear\n\n*c. parental income 1984/2007.\n\n\nforeach i in mor far {\nclear\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\nsort `i'_lnr \n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta,replace\n\nclear\n\nuse \"",
        "line": 43,
        "column": 27
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 752
      },
      {
        "id": "identifier",
        "value": "ssb",
        "line": 43,
        "column": 753
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 756
      },
      {
        "id": "identifier",
        "value": "ovibos",
        "line": 43,
        "column": 757
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 763
      },
      {
        "id": "identifier",
        "value": "a1",
        "line": 43,
        "column": 764
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 766
      },
      {
        "id": "identifier",
        "value": "swp",
        "line": 43,
        "column": 767
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 770
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 43,
        "column": 771
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 775
      },
      {
        "id": "identifier",
        "value": "wk48",
        "line": 43,
        "column": 776
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 780
      },
      {
        "id": "identifier",
        "value": "inntlonn",
        "line": 43,
        "column": 781
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 789
      },
      {
        "id": "identifier",
        "value": "skattefil_g1967g2010.dta",
        "line": 43,
        "column": 790
      },
      {
        "id": "string",
        "value": "\"\nkeep p_innt_1984 p_innt_1985 p_innt_1986 p_innt_1987 p_innt_1988 p_innt_1989 p_innt_1990 p_innt_1991 p_innt_1992 p_innt_1993 p_innt_1994 p_innt_1995 p_innt_1996 p_innt_1997 p_innt_1998 p_innt_1999 p_innt_2000 p_innt_2001 p_innt_2002 p_innt_2003 p_innt_2004 p_innt_2005 p_innt_2006 p_innt_2007 lnr\nrename lnr `i'_lnr\n\ndestring, replace force\n\nduplicates drop\ndrop if `i'_lnr ==0\n\nforvalues t=1984/2007 {\nrename p_innt_`t' `i'_inc`t'\n\n}\n\nsort `i'_lnr\n\nmerge 1:m `i'_lnr using /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\n\ndrop if _merge==1\ndrop _merge\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta,replace\n\n}\n\n\n\nclear\n\n\n*child education, 2006-2011 \n\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta,replace\nsort lnr\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta,replace\n\n\nforvalues t=2006/2011 {\n\nclear\n\nuse lnr bu_nus2000 using /ssb/ovibos/a1/swp/data/wk48/nudb/bu_g`t\u2019.dta\n\nrename bu_nus2000 nus2000_`t\u2019_lnr\n\ndestring, replace force\n\ndrop if lnr==0\nduplicates drop\nsort lnr\n\nbys lnr: gen n=_n\nby lnr: gen N=_N\ntab N\ndrop if N>1\ndrop n N\nsort lnr\n\nmerge 1:1 lnr using /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\ndrop if _merge==1\ndrop _merge\nsort lnr \n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta, replace\n\n}\n\n\nclear\n\n*f: mothers and fathers highest edu, citizenship,mstat and age 1985-2008\n\n\nforeach c in mor far {\n\nclear\n\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\n\nsort `c'_lnr\n\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta, replace\n\n\nforvalues t=1985/2008 {\n\n\nclear\n\nuse lnr bu_nus2000 alder statborg using /ssb/ovibos/a1/swp/data/wk48/nudb/bu_g`t'.dta\n\n\ndestring, replace force\ndrop if lnr==0\nbys lnr: gen n=_n\nbys lnr: gen N=_N\ntab N\ndrop if N>1\ndrop n N\n\nrename lnr `c'_lnr\nrename bu_nus2000 `c'_nus2000_`t'\nrename alder `c'_alder_`t'\nrename statborg `c'_statborg_`t'\n\nsort `c'_lnr\n\nmerge 1:m `c'_lnr using /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\n\ndrop if _merge==1\n\ndrop _merge\n\nsort lnr\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta,replace\n\n\n\n}\n}\n\n\n\nclear\n\n\n\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\n\nsort mor_lnr\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta, replace\n\nclear\n\nforvalues t=1985/2006 {\nclear\nuse lnr sivilstand ekt_lnr using \"",
        "line": 43,
        "column": 814
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3220
      },
      {
        "id": "identifier",
        "value": "ssb",
        "line": 43,
        "column": 3221
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3224
      },
      {
        "id": "identifier",
        "value": "ovibos",
        "line": 43,
        "column": 3225
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3231
      },
      {
        "id": "identifier",
        "value": "a1",
        "line": 43,
        "column": 3232
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3234
      },
      {
        "id": "identifier",
        "value": "swp",
        "line": 43,
        "column": 3235
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3238
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 43,
        "column": 3239
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3243
      },
      {
        "id": "identifier",
        "value": "wk48",
        "line": 43,
        "column": 3244
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3248
      },
      {
        "id": "identifier",
        "value": "befreg",
        "line": 43,
        "column": 3249
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3255
      },
      {
        "id": "identifier",
        "value": "bosatte_g",
        "line": 43,
        "column": 3256
      },
      {
        "id": "`'",
        "value": "`t'",
        "line": 43,
        "column": 3265
      },
      {
        "id": "identifier",
        "value": "m01d01_persfil.dta",
        "line": 43,
        "column": 3268
      },
      {
        "id": "string",
        "value": "\"\n\ndestring, replace force\nduplicates drop\ndrop if lnr==0\n\nrename lnr mor_lnr\nrename sivilstand sivilstand_`t'\nrename ekt_lnr ekt_lnr_`t'\nsort mor_lnr\n\nmerge 1:m mor_lnr using /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\ndrop if _merge==1\ndrop _merge\n\nsort lnr\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta, replace\n\n}\n\nforvalues t=2007/2008 {\nclear\nuse lnr sivilstand ekt_lnr using \"",
        "line": 43,
        "column": 3286
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3709
      },
      {
        "id": "identifier",
        "value": "ssb",
        "line": 43,
        "column": 3710
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3713
      },
      {
        "id": "identifier",
        "value": "ovibos",
        "line": 43,
        "column": 3714
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3720
      },
      {
        "id": "identifier",
        "value": "a1",
        "line": 43,
        "column": 3721
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3723
      },
      {
        "id": "identifier",
        "value": "swp",
        "line": 43,
        "column": 3724
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3727
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 43,
        "column": 3728
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3732
      },
      {
        "id": "identifier",
        "value": "wk48",
        "line": 43,
        "column": 3733
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3737
      },
      {
        "id": "identifier",
        "value": "befreg",
        "line": 43,
        "column": 3738
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 3744
      },
      {
        "id": "identifier",
        "value": "bosatte_g",
        "line": 43,
        "column": 3745
      },
      {
        "id": "`'",
        "value": "`t'",
        "line": 43,
        "column": 3754
      },
      {
        "id": "identifier",
        "value": "m01d01.dta",
        "line": 43,
        "column": 3757
      },
      {
        "id": "string",
        "value": "\"\n\ndestring, replace force\nduplicates drop\ndrop if lnr==0\n\nrename lnr mor_lnr\nrename sivilstand sivilstand_`t'\nrename ekt_lnr ekt_lnr_`t'\nsort mor_lnr\n\nmerge 1:m mor_lnr using /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\ndrop if _merge==1\ndrop _merge\n\nsort lnr\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta, replace\n\n}\n\n\nclear\n\n\n\n*l: number of siblings within 14 yrs after the reform: totalt antall sosken. \n\n\n\nforvalues t=1986/1993 {\n\nclear\n\nlocal a=`t'+14\n\nuse  fodtaar lnr mor_lnr far_lnr kjonn using \"",
        "line": 43,
        "column": 3767
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 4311
      },
      {
        "id": "identifier",
        "value": "ssb",
        "line": 43,
        "column": 4312
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 4315
      },
      {
        "id": "identifier",
        "value": "ovibos",
        "line": 43,
        "column": 4316
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 4322
      },
      {
        "id": "identifier",
        "value": "a1",
        "line": 43,
        "column": 4323
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 4325
      },
      {
        "id": "identifier",
        "value": "swp",
        "line": 43,
        "column": 4326
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 4329
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 43,
        "column": 4330
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 4334
      },
      {
        "id": "identifier",
        "value": "wk48",
        "line": 43,
        "column": 4335
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 4339
      },
      {
        "id": "identifier",
        "value": "befreg",
        "line": 43,
        "column": 4340
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 4346
      },
      {
        "id": "identifier",
        "value": "alle_slektsfil_g1967g2006.dta",
        "line": 43,
        "column": 4347
      },
      {
        "id": "string",
        "value": "\"\ndrop if lnr==\"",
        "line": 43,
        "column": 4376
      },
      {
        "id": "number",
        "value": "0",
        "line": 43,
        "column": 4392
      },
      {
        "id": "string",
        "value": "\"\nduplicates drop\ngen b_year=substr(fodtaar,1,4)\ngen b_month=substr(fodtaar, 5,2)\ngen b_day=substr(fodtaar,7,2)\n\n*change to ellapse date format\ngen efodtaar=date(fodtaar,\"",
        "line": 43,
        "column": 4393
      },
      {
        "id": "identifier",
        "value": "YMD",
        "line": 43,
        "column": 4564
      },
      {
        "id": "string",
        "value": "\")\nformat efodtaar %td\ndrop fodtaar\nrename efodtaar fodtaar\n\ndestring, replace force\n\n*drop if both mother and father's id is missing (0)\ndrop if mor_lnr==0 & far_lnr==0\n\nsort mor_lnr fodtaar\n\ndrop if ((mor_lnr == mor_lnr [_n-1] & b_year [_n-1]== `t')|( mor_lnr == mor_lnr [_n-2] & b_year [_n-2]== `t')|( mor_lnr == mor_lnr [_n-3] & b_year [_n-3]== `t')|( mor_lnr == mor_lnr [_n-4] & b_year [_n-4]== `t')|( mor_lnr == mor_lnr [_n-5] & b_year [_n-5]== `t')|( mor_lnr == mor_lnr [_n-6] & b_year [_n-6]== `t')|( mor_lnr == mor_lnr [_n-7] & b_year [_n-7]== `t')|( mor_lnr == mor_lnr [_n-8] & b_year [_n-8]== `t')|( mor_lnr == mor_lnr [_n-9] & b_year [_n-9]== `t')|( mor_lnr == mor_lnr [_n-10] & b_year [_n-10]== `t')|( mor_lnr == mor_lnr [_n-11] & b_year [_n-11]== `t')|( mor_lnr == mor_lnr [_n-12] & b_year [_n-12]== `t')|( mor_lnr == mor_lnr [_n-13] & b_year [_n-13]== `t')|( mor_lnr == mor_lnr [_n-14] & b_year [_n-14]== `t')|( mor_lnr == mor_lnr [_n-15] & b_year [_n-15]== `t')|( mor_lnr == mor_lnr [_n-16] & b_year [_n-16]== `t')|( mor_lnr == mor_lnr [_n-17] & b_year [_n-17]== `t')) & b_year>`a' & mor_lnr!=0\n\n\n\nsort far_lnr fodtaar\n drop if ((far_lnr == far_lnr [_n-1] & b_year [_n-1]== `t')|( far_lnr == far_lnr [_n-2] & b_year [_n-2]== `t')|( far_lnr == far_lnr [_n-3] & b_year [_n-3]== `t')|( far_lnr == far_lnr [_n-4] & b_year [_n-4]== `t')|( far_lnr == far_lnr [_n-5] & b_year [_n-5]== `t')|( far_lnr == far_lnr [_n-6] & b_year [_n-6]== `t')|( far_lnr == far_lnr [_n-7] & b_year [_n-7]== `t')|( far_lnr == far_lnr [_n-8] & b_year [_n-8]== `t')|( far_lnr == far_lnr [_n-9] & b_year [_n-9]== `t')|( far_lnr == far_lnr [_n-10] & b_year [_n-10]== `t')|( far_lnr == far_lnr [_n-11] & b_year [_n-11]== `t')|( far_lnr == far_lnr [_n-12] & b_year [_n-12]== `t')|( far_lnr == far_lnr [_n-13] & b_year [_n-13]== `t')|( far_lnr == far_lnr [_n-14] & b_year [_n-14]== `t')|( far_lnr == far_lnr [_n-15] & b_year [_n-15]== `t')|( far_lnr == far_lnr [_n-16] & b_year [_n-16]== `t')|( far_lnr == far_lnr [_n-17] & b_year [_n-17]== `t')) & b_year>`a' & mor_lnr==0\n\n\nsort mor_lnr fodtaar\nbys mor_lnr: gen n=_n if mor_lnr!=0\nbys mor_lnr: gen N=_N if mor_lnr!=0\n\ngen sosken14=N-1 if N>1 & mor_lnr!=0\nreplace sosken14=0 if N==1 &  mor_lnr!=0\n\ndrop n N\nsort far_lnr fodtaar\nbys far_lnr: gen n=_n if mor_lnr==0\nbys far_lnr: gen N=_N if mor_lnr==0\n\nreplace sosken14=N-1 if N>1 & mor_lnr==0\nreplace sosken14=0 if N==1 & mor_lnr==0\n\ndrop n N\n\nkeep if b_year==`t'\n\nkeep lnr sosken14\n\nsort lnr\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/temp_`t'cohort.dta,replace\n\n\n}\n\n\n\nforvalues t=1986/1993 {\n\nclear\n\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/temp_`t'cohort.dta\n\n\nsort lnr\n\nmerge  1:1 lnr using /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\n\ndrop if _merge==1\ndrop _merge\n\nsort lnr\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta,replace\n}\n\n\n\nforvalues t=1986/1993 {\n\nerase /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/temp_`t'cohort.dta\n\n}\n\n\nclear\n\n\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\n\n\n\n\n\n\n\n******create variables\n\n*gen edu at birth\n\nforeach c in mor far {\ngen  `c'_nus2000_birth=.\n\nforvalues t=1986/1995 {\nreplace  `c'_nus2000_birth=`c'_nus2000_`t' if b_year==`t'\n\n}\n}\n\nforeach c in mor far {\ngen string_nus2000_`c'=string(`c'_nus2000_birth)\ngen nivaa=substr(string_nus2000_`c', 1,1)\ndestring nivaa, gen(nivaa_n)\ndrop nivaa\nrename nivaa_n nivaa\ngen `c'_coll=1 if nivaa>=6 & nivaa<9\nreplace `c'_coll=0 if nivaa<6 & nivaa>0\n\ngen `c'_HSC=1 if nivaa>=4 & nivaa<=5\nreplace `c'_HSC=0 if nivaa<4 & nivaa>0 | nivaa>5 & nivaa<9\n\ngen `c'_dropout=1 if nivaa<=3 & nivaa>0\nreplace `c'_dropout=0 if nivaa>3 & nivaa<9\n\n\ndrop nivaa \ndrop string_nus2000_`c'\n\n}\n\n\n\n\ngen str4 st_mor_nus2000_birth= string(mor_nus2000_birth)\ngen str4 st_far_nus2000_birth= string(far_nus2000_birth)\n\n\n*use standard classification and make nus-codes in to years of education\n\nforeach c in mor far {\ngen `c'_eduy_birth=.\n\n\nreplace `c'_eduy_birth=0 if substr(st_`c'_nus2000_birth,1,1)==\"",
        "line": 43,
        "column": 4567
      },
      {
        "id": "number",
        "value": "0",
        "line": 43,
        "column": 8576
      },
      {
        "id": "string",
        "value": "\"\nreplace `c'_eduy_birth=6 if substr(st_`c'_nus2000_birth,1,1)==\"",
        "line": 43,
        "column": 8577
      },
      {
        "id": "number",
        "value": "1",
        "line": 43,
        "column": 8642
      },
      {
        "id": "string",
        "value": "\"\nreplace `c'_eduy_birth=9 if substr(st_`c'_nus2000_birth,1,1)==\"",
        "line": 43,
        "column": 8643
      },
      {
        "id": "number",
        "value": "2",
        "line": 43,
        "column": 8708
      },
      {
        "id": "string",
        "value": "\"\nreplace `c'_eduy_birth=10 if substr(st_`c'_nus2000_birth,1,1)==\"",
        "line": 43,
        "column": 8709
      },
      {
        "id": "number",
        "value": "3",
        "line": 43,
        "column": 8775
      },
      {
        "id": "string",
        "value": "\"\nreplace `c'_eduy_birth=12 if substr(st_`c'_nus2000_birth,1,1)==\"",
        "line": 43,
        "column": 8776
      },
      {
        "id": "number",
        "value": "4",
        "line": 43,
        "column": 8842
      },
      {
        "id": "string",
        "value": "\"\nreplace `c'_eduy_birth=13 if substr(st_`c'_nus2000_birth,1,1)==\"",
        "line": 43,
        "column": 8843
      },
      {
        "id": "number",
        "value": "5",
        "line": 43,
        "column": 8909
      },
      {
        "id": "string",
        "value": "\"\nreplace `c'_eduy_birth=15 if substr(st_`c'_nus2000_birth,1,1)==\"",
        "line": 43,
        "column": 8910
      },
      {
        "id": "number",
        "value": "6",
        "line": 43,
        "column": 8976
      },
      {
        "id": "string",
        "value": "\"\nreplace `c'_eduy_birth=17 if substr(st_`c'_nus2000_birth,1,1)==\"",
        "line": 43,
        "column": 8977
      },
      {
        "id": "number",
        "value": "7",
        "line": 43,
        "column": 9043
      },
      {
        "id": "string",
        "value": "\"\nreplace `c'_eduy_birth=21 if substr(st_`c'_nus2000_birth,1,1)==\"",
        "line": 43,
        "column": 9044
      },
      {
        "id": "number",
        "value": "8",
        "line": 43,
        "column": 9110
      },
      {
        "id": "string",
        "value": "\"\n }\n\n\n\n\n\n/*married to childs father year before reforms:antar at dersom gift er de gift med far til barnet. ekt_lnr er mangefull variabel\n*/\n\ngen marcfyb=.\n\nforvalues t=1986/1995 {\n\nlocal a=`t'-1\n\nreplace marcfyb=1 if sivilstand_`a'==2 & b_year==`t'\nreplace marcfyb=0 if marcfyb==. & sivilstand_`a'!=. &  b_year==`t'\n\n}\n\n\n*married to childs father 14 years after reforms\n\ngen marrchf14=.\n\nforvalues t=1986/1993 {\n\nlocal i=`t'+14\n\nreplace marrchf14=1 if sivilstand_`i'==2 & b_year==`t'\nreplace marrchf14=0 if marrchf14==. & sivilstand_`i'!=. & b_year==`t'\n}\n\n\n*High school dropout, evalueate at age 20:  \n\nforvalues t=2006/2011 {\ngen string_nus2000_`t'_lnr=string(nus2000_`t'_lnr)\ngen nivaa`t'=substr(string_nus2000_`t'_lnr, 1,1)\ndestring nivaa`t', gen(nivaa_n)\ndrop nivaa`t'\nrename nivaa_n nivaa`t'\n\n}\n\ngen dropout=.\n\nforvalues t=1986/1991 {\n\nlocal i=`t'+20\n\nreplace dropout=1 if nivaa`i\u2019< 9 & b_year==`t' /*9=missing*/\n\nreplace dropout=0 if nivaa`i\u2019>=4 & nivaa`i\u2019<9 & b_year==`t'\n\n}\n\n\n\n*age and citezenship at birth\n\ngen mageb=.\ngen fageb=.\ngen mstatborgb=.\ngen fstatborgb=.\n\nforvalues t=1986/1995 {\n\nreplace mageb=mor_alder_`t' if b_year==`t'\nreplace fageb=far_alder_`t' if b_year==`t'\nreplace mstatborgb=mor_statborg_`t' if b_year==`t'\nreplace fstatborgb=far_statborg_`t' if b_year==`t'\n}\n\n\n\n\n\n*dummies\ngen mage28=1 if mageb>28 & mageb!=.\ngen fage28=1 if fage>28 & fageb!=.\nreplace mage28=0 if  mageb<=28 & mageb!=.\nreplace fage28=0 if fageb<=28 & fageb!=.\n\n\n\n*number of children 14 years after reform:\ngen nchild14=sosken14+1\n\n\n/**fam income,min, finc. fam inc is missing if both mother and father's income is missing.ow. set missing=0 and add income*/\n\n\nforvalues t=1984/2007 {\n\ngen finc`t'= far_inc`t'\ngen minc`t'=mor_inc`t'\n\nreplace finc`t'=0 if  finc`t'==. & minc`t'!=.\nreplace minc`t'=0 if  finc`t'!=. & minc`t'==.\n\ngen faminc`t'=finc`t'+ minc`t'\n\n}\n\n\n\ngen g1985=25333\ngen g1986=27433\ngen g1987=29267\ngen g1988=30850\ngen g1989=32272\ngen g1990=33575\ngen g1991=35033\ngen g1992=36167\ngen g1993=37033\ngen g1994=37820\ngen g1995=38847\ngen g1996=40410\ngen g1997=42000\ngen g1998=44413\ngen g1999=46423\ngen g2000=48377\ngen g2001=50603\ngen g2002=53233\ngen g2003=55964\ngen g2004=58139\ngen g2005=60059\ngen g2006=62161\ngen g2007=65055\n\n\n*define eligibility\n\nforvalues t=1986/1995 {\n\nlocal a=`t'-1\n\ngen eligible`t'=1 if mor_inc`a'>g`a' & mor_inc`a'!=. & b_year==`t'\nreplace eligible`t'=0 if eligible`t'==. & b_year==`t'\n\n}\n\n\n\n*yrs employed total\n\nforvalues t=1/14 {\n\ngen mor_emp`t'=.\ngen far_emp`t'=.\n\n}\n\n\nforvalues t=1986/1993 {\nforvalues i=1/14 {\n\nlocal a=`t'+`i'\n\nreplace mor_emp`i'=1 if mor_inc`a'>g`a' & mor_inc`a'!=. & b_year==`t'\nreplace mor_emp`i'=0 if  minc`a'<=g`a' & b_year==`t'\nreplace mor_emp`i'=0 if mor_emp`i'==. & b_year==`t'\n\nreplace far_emp`i'=1 if far_inc`a'>g`a' & far_inc`a'!=. & b_year==`t'\nreplace far_emp`i'=0 if  far_inc`a'<=g`a' & b_year==`t'\nreplace far_emp`i'=0 if far_emp`i'==. & b_year==`t'\n\n\n}\n}\n\n\n\n\n***unpaid leave: 36 months.: \n\n\n\n\nforvalues t=1986/1993 {\n\nlocal i=`t'-1\nlocal a=`t'+1\nlocal b=`t'+2\nlocal c=`t'+3\n\n*unpaid leave first 12 months:\ngen mlup`t'=(1-((((((12-b_month+1)/12)*minc`t')+minc`a')/((24-b_month+1)/12))/(minc`i')))*12 if eligible`t'==1 \nreplace mlup`t'=0 if mlup`t'<0 & eligible`t'==1 \n\n*unpaid leave next 12 months:\n\ngen ml`t'_1=(1-((minc`a'+minc`b')/(2*(minc`i'))))*12 if eligible`t'==1 \nreplace ml`t'_1=0 if ml`t'_1<0 & eligible`t'==1 \nreplace mlup`t'=12+ ml`t'_1 if mlup`t'==12\n\n\n\n*unpaid leave next 12 months:\n\ngen ml`t'_2=(1-((minc`b'+minc`c')/(2*(minc`i'))))*12 if eligible`t'==1 \nreplace ml`t'_2=0 if ml`t'_2<0 & eligible`t'==1 \nreplace mlup`t'=24+ ml`t'_2 if mlup`t'==24\n\ntable b_month if eligible`t'== 1 & b_year== `t', row col c(m mlup`t')\ndrop ml`t'_1 ml`t'_2\n\n\n}\n\n\ngen mluptot=.\n\nforvalues t=1986/1993 {\n\nreplace mluptot=mlup`t' if b_year==`t'\n\n}\n\n***add total leave\n\ngen totleave=mluptot+4.5 if b_year==1986\nreplace totleave=mluptot+4.5 if b_year==1987 & b_month<5\nreplace totleave=mluptot+5 if b_year==1987 & b_month>=5\nreplace totleave=mluptot+5 if b_year==1988 & b_month<7\nreplace totleave=mluptot+5.5 if b_year==1988 & b_month>=7\nreplace totleave=mluptot+5.5 if b_year==1989 & b_month <4\nreplace totleave=mluptot+6 if b_year==1989 & b_month >=4\nreplace totleave=mluptot+6 if b_year==1990 & b_month <5\nreplace totleave=mluptot+7 if b_year==1990 & b_month >=5\nreplace totleave=mluptot+7 if b_year==1991 & b_month <7\nreplace totleave=mluptot+8 if b_year==1991 & b_month >=7\nreplace totleave=mluptot+8 if b_year==1992 & b_month <4\nreplace totleave=mluptot+8.75 if b_year==1992 & b_month >=4\nreplace totleave=mluptot+8.75 if b_year==1993 & b_month <4\nreplace totleave=mluptot+9.5 if b_year==1993 & b_month >=4\n\nsort lnr\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta, replace\n\n\nforvalues t=1986/1993 {\ntable b_month if eligible`t'==1&b_year==`t',row col c(m totleave)\n}\n\n\n\n***COSTS****\n\n******create direct costs: \n/*\nWe need to assume full take-up if eligible as we don't have actual take-up for most of them.\nUse income year before birth as basis. if they earned more than 6G have to cap it at this.\n\n*/\n\n\n*gen inc year before birth\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_86_95.dta\n\ngen minc_base=.\n\nforvalues t=1986/1995 {\n\nlocal a=`t'-1\n\nreplace minc_base=mor_inc`a' if b_year==`t' & eligible`t'==1\n\n\n}\n\n*replace by 6G if base is above 6G\n\nforvalues t=1986/1995 {\n\nreplace minc_base=6*g`t' if b_year==`t' & minc_base>6*g`t' & minc_base!=. & eligible`t'==1\n\n}\n\n*gen monthly level of base\n\ngen minc_base_month=minc_base/12\n\n\ngen cost_direct=4.5*minc_base_month if b_year==1986\nreplace cost_direct=4.5*minc_base_month if b_year==1987 & b_month<5\nreplace cost_direct=5*minc_base_month if b_year==1987 & b_month>=5\nreplace cost_direct=5*minc_base_month if b_year==1988 & b_month<7\nreplace cost_direct=5.5*minc_base_month if b_year==1988 & b_month>=7\nreplace cost_direct=5.5*minc_base_month if b_year==1989 & b_month<4\nreplace cost_direct=6*minc_base_month if b_year==1989 & b_month>=4\nreplace cost_direct=6*minc_base_month if b_year==1990 & b_month<5\nreplace cost_direct=7*minc_base_month if b_year==1990 & b_month>=5\nreplace cost_direct=7*minc_base_month if b_year==1991 & b_month<7\nreplace cost_direct=8*minc_base_month if b_year==1991 & b_month>=7\nreplace cost_direct=8*minc_base_month if b_year==1992 & b_month<4\nreplace cost_direct=8.75*minc_base_month if b_year==1992 & b_month>=4\nreplace cost_direct=8.75*minc_base_month if b_year==1993 & b_month<4\nreplace cost_direct=9.5*minc_base_month if b_year==1993 & b_month>=4\n\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_87_92_tempcost.dta, replace\n\n\n\n\nforvalues t=1986/1993 {\n\nreplace cost_direct=cost_direct*(kpi2010/kpi`t') if b_year==`t'\n}\n\nreplace cost_direct=cost_direct/6\n\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_87_92_tempcost.dta, replace\n\n\nforvalues t=1986/2010 {\n\nforeach c in mor far {\n\nclear\n\nuse \"",
        "line": 43,
        "column": 9111
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 16001
      },
      {
        "id": "identifier",
        "value": "ssb",
        "line": 43,
        "column": 16002
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 16005
      },
      {
        "id": "identifier",
        "value": "ovibos",
        "line": 43,
        "column": 16006
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 16012
      },
      {
        "id": "identifier",
        "value": "h1",
        "line": 43,
        "column": 16013
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 16015
      },
      {
        "id": "identifier",
        "value": "kvs",
        "line": 43,
        "column": 16016
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 16019
      },
      {
        "id": "identifier",
        "value": "wk24",
        "line": 43,
        "column": 16020
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 16024
      },
      {
        "id": "identifier",
        "value": "income",
        "line": 43,
        "column": 16025
      },
      {
        "id": "/",
        "value": "/",
        "line": 43,
        "column": 16031
      },
      {
        "id": "identifier",
        "value": "disp_g",
        "line": 43,
        "column": 16032
      },
      {
        "id": "`'",
        "value": "`t'",
        "line": 43,
        "column": 16038
      },
      {
        "id": "identifier",
        "value": ".dta",
        "line": 43,
        "column": 16041
      },
      {
        "id": "string",
        "value": "\"\ndestring, replace force\n\n\n*Skattefrie overf\u00afringer: summen av barnetrygd, engangsst\u00afnad og Fors\u00afrgerst\u00afnad/fors\u00afrgerfradrag + pensjon\n\ngen skattfrie_overf`t'=mat_pay+ch_allow+fam_allow+benefits\n\n*skatt: iskatt er faktisk skatt betalt av pensjons givende inntekt\ngen skatt`t'=iskatt\ngen lonn`t'=lonn\n\n\nkeep lnr skattfrie_overf`t' skatt`t' lonn`t'\n\n\n\nrename lnr `c'_lnr\nrename skatt`t' `c'_skatt`t'\nrename skattfrie_overf`t' `c'_skattfrie_overf`t'\nrename lonn`t' `c'_lonn`t'\n\nmerge 1:m `c'_lnr using /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_87_92_tempcost.dta\ndrop if _merge==1\ndrop _merge\n\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_87_92_tempcost.dta, replace\n}\n\n\n}\n\n\n\n\n\n\n\n/*gen paa fam-nivaa: merk de med missing blir kodet som 0. de vil v\u00cart registrert\n\n med en positiv sum dersom de hadde mottatt st\u00aftte og betalt skatt etc.*/\n\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_87_92_tempcost.dta, clear\n\nforvalues t=1986/2010 {\n\nreplace mor_skatt`t'=0 if mor_skatt`t'==. \nreplace far_skatt`t'=0 if far_skatt`t'==. \n\nreplace mor_skattfrie_overf`t'=0 if mor_skattfrie_overf`t'==. \nreplace far_skattfrie_overf`t'=0 if far_skattfrie_overf`t'==. \n\n\nreplace mor_lonn`t'=0 if mor_lonn`t'==. \nreplace far_lonn`t'=0 if far_lonn`t'==. \n\n\n}\n\nforvalues t=1986/2010 {\n\ngen skatt`t'=mor_skatt`t'+far_skatt`t'\ngen skattfrie_overf`t'=mor_skattfrie_overf`t'+far_skattfrie_overf`t'\n\n\n}\n\n\n\n\n*disposable income\n\nforvalues t=1986/2010 {\n\ngen famlonn`t'=mor_lonn`t'+far_lonn`t'\n\n} \n\nforvalues t=1987/2010 {\ngen disp_faminc`t'=famlonn`t'+skattfrie_overf`t'-skatt`t'\n\n}\n\n\n\n\n\n\n\n\nforvalues t=1986/2010 {\nreplace disp_faminc`t'=0 if disp_faminc`t'<0\n\n}\n\n\n*kpi juster: 2010 NOK.\ngen kpi1985=61.9\ngen kpi1986=66.3\ngen kpi1987=72.1\t\ngen kpi1988=76.9\t\ngen kpi1989=80.4\t\ngen kpi1990=83.7\t\ngen kpi1991=86.6\t\ngen kpi1992=88.6\t\ngen kpi1993=90.6\t\ngen kpi1994=91.9\t\ngen kpi1995=94.2\t\ngen kpi1996=95.3\ngen kpi1997=97.8\t\ngen kpi1998=100\t\ngen kpi1999=102.3\t\ngen kpi2000=105.5\t\ngen kpi2001=108.7\t\ngen kpi2002=110.1\t\ngen kpi2003=112.8\t\ngen kpi2004=113.3\t\ngen kpi2005=115.1\t\ngen kpi2006=117.7\t\ngen kpi2007=118.6\ngen kpi2010=128.8\n\n\nforvalues t=1986/2009 {\n\nreplace disp_faminc`t'=disp_faminc`t'*(kpi2010/kpi`t')\nreplace skatt`t'=skatt`t'*(kpi2010/kpi`t')\nreplace famlonn`t'=famlonn`t'*(kpi2010/kpi`t')\nreplace skattfrie_overf`t'=skattfrie_overf`t'*(kpi2010/kpi`t')\n\n\n}\n\n\n\n\n\n\n\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_87_92_tempcost0.dta, replace\n\n\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_87_92_tempcost0.dta, clear\n\n\n\n\n\n\n\n***neddiskontert 0-14 \u00c2r, diskontert med 1.023\ngen annuity_disp_faminc=.\ngen annuity_skatt=.\ngen annuity_benefits=.\n\n\n\nforvalues t=1987/2007 {\n\nrename skattfrie_overf`t' benefits`t'\n\n\n}\n\nforvalues t=1987/1992 {\n\nlocal a=`t'+1\nlocal b=`t'+2\nlocal c=`t'+3\nlocal d=`t'+4\nlocal e=`t'+5\nlocal f=`t'+6\nlocal g=`t'+7\nlocal h=`t'+8\nlocal i=`t'+9\nlocal j=`t'+10\nlocal k=`t'+11\nlocal l=`t'+12\nlocal m=`t'+13\nlocal n=`t'+14\n\nforeach w in disp_faminc skatt benefits{\n\nreplace annuity_`w'=(`w'`t'+(`w'`a'/1.023)+ (`w'`b'/(1.023^2))+ (`w'`c'/(1.023^3))+ (`w'`d'/(1.023^4))+ (`w'`e'/(1.023^5))+ (`w'`f'/(1.023^6))+ (`w'`g'/(1.023^7))+ (`w'`h'/(1.023^8))+ (`w'`i'/(1.023^9))+ (`w'`j'/(1.023^10))+ (`w'`k'/(1.023^11))+ (`w'`l'/(1.023^12))+ (`w'`m'/(1.023^13))+ (`w'`n'/(1.023^14)))*(0.023/(1.023*(1-(1.023)^(-15))))  if b_year==`t'\n\n\n\n}\n}\n\n\n\nreplace annuity_disp_faminc=annuity_disp_faminc/6\nreplace annuity_skatt=annuity_skatt/6\nreplace annuity_benefits=annuity_benefits/6\n\nlabel var annuity_disp_faminc \"",
        "line": 43,
        "column": 16045
      },
      {
        "id": "identifier",
        "value": "annuity",
        "line": 43,
        "column": 19584
      },
      {
        "id": "identifier",
        "value": "of",
        "line": 43,
        "column": 19592
      },
      {
        "id": "identifier",
        "value": "fam.",
        "line": 43,
        "column": 19595
      },
      {
        "id": "identifier",
        "value": "disposable",
        "line": 43,
        "column": 19600
      },
      {
        "id": "identifier",
        "value": "income",
        "line": 43,
        "column": 19611
      },
      {
        "id": "number",
        "value": "0",
        "line": 43,
        "column": 19618
      },
      {
        "id": "-",
        "value": "-",
        "line": 43,
        "column": 19619
      },
      {
        "id": "number",
        "value": "14",
        "line": 43,
        "column": 19620
      },
      {
        "id": "identifier",
        "value": "after",
        "line": 43,
        "column": 19623
      },
      {
        "id": "identifier",
        "value": "birth",
        "line": 43,
        "column": 19629
      },
      {
        "id": "string",
        "value": "\"\nlabel var annuity_skatt \"",
        "line": 43,
        "column": 19634
      },
      {
        "id": "identifier",
        "value": "annuity",
        "line": 43,
        "column": 19661
      },
      {
        "id": "identifier",
        "value": "of",
        "line": 43,
        "column": 19669
      },
      {
        "id": "identifier",
        "value": "fam.",
        "line": 43,
        "column": 19672
      },
      {
        "id": "identifier",
        "value": "taxes",
        "line": 43,
        "column": 19677
      },
      {
        "id": "identifier",
        "value": "paid",
        "line": 43,
        "column": 19683
      },
      {
        "id": "number",
        "value": "0",
        "line": 43,
        "column": 19689
      },
      {
        "id": "-",
        "value": "-",
        "line": 43,
        "column": 19690
      },
      {
        "id": "number",
        "value": "14",
        "line": 43,
        "column": 19691
      },
      {
        "id": "identifier",
        "value": "years",
        "line": 43,
        "column": 19694
      },
      {
        "id": "identifier",
        "value": "after",
        "line": 43,
        "column": 19700
      },
      {
        "id": "identifier",
        "value": "birth",
        "line": 43,
        "column": 19706
      },
      {
        "id": "string",
        "value": "\"\nlabel var annuity_benefits \"",
        "line": 43,
        "column": 19711
      },
      {
        "id": "identifier",
        "value": "annuity",
        "line": 43,
        "column": 19741
      },
      {
        "id": "identifier",
        "value": "of",
        "line": 43,
        "column": 19749
      },
      {
        "id": "identifier",
        "value": "non",
        "line": 43,
        "column": 19752
      },
      {
        "id": "identifier",
        "value": "taxable",
        "line": 43,
        "column": 19756
      },
      {
        "id": "identifier",
        "value": "fam.",
        "line": 43,
        "column": 19764
      },
      {
        "id": "identifier",
        "value": "benefits",
        "line": 43,
        "column": 19769
      },
      {
        "id": "identifier",
        "value": "received",
        "line": 43,
        "column": 19778
      },
      {
        "id": "number",
        "value": "0",
        "line": 43,
        "column": 19788
      },
      {
        "id": "-",
        "value": "-",
        "line": 43,
        "column": 19789
      },
      {
        "id": "number",
        "value": "14",
        "line": 43,
        "column": 19790
      },
      {
        "id": "identifier",
        "value": "years",
        "line": 43,
        "column": 19793
      },
      {
        "id": "identifier",
        "value": "after",
        "line": 43,
        "column": 19799
      },
      {
        "id": "identifier",
        "value": "birth",
        "line": 43,
        "column": 19805
      },
      {
        "id": "string",
        "value": "\"\n\n\ngen net_cost=cost_direct+annuity_benefits-annuity_skatt\n\n\n\n*yrs employed total 2-14 (max 13)\n\n\n\ngen memptot=mor_emp2+mor_emp3+mor_emp4+mor_emp5+mor_emp6+mor_emp7+mor_emp8+mor_emp9+mor_emp10+mor_emp11+mor_emp12+mor_emp13+mor_emp14\n\ngen femptot=far_emp2+ far_emp3+ far_emp4+ far_emp5+ far_emp6+ far_emp7+ far_emp8+ far_emp9+ far_emp10+ far_emp11+ far_emp12+ far_emp13+ far_emp14\n\ndrop mor_emp3-far_emp14\n\n\n\n\n****annutity mother and father income 2-14 years\n\n*kpi juster\n\n\nforvalues t=1987/2007 {\n\nreplace finc`t'=finc`t'*(kpi2010/kpi`t')\nreplace minc`t'=minc`t'*(kpi2010/kpi`t')\nreplace faminc`t'=faminc`t'*(kpi2010/kpi`t')\n\n}\n\n\n\n\n\n*annuity income 2-14 yrs after reform.\n\n\ngen minctot=.\ngen finctot=.\n\nforvalues t=1986/1993 {\n\n\nlocal b=`t'+2\nlocal c=`t'+3\nlocal d=`t'+4\nlocal e=`t'+5\nlocal f=`t'+6\nlocal g=`t'+7\nlocal h=`t'+8\nlocal i=`t'+9\nlocal j=`t'+10\nlocal k=`t'+11\nlocal l=`t'+12\nlocal m=`t'+13\nlocal n=`t'+14\n\nforeach w in f m {\n\nreplace `w'inctot=((`w'inc`b')+ (`w'inc`c'/(1.023))+ (`w'inc`d'/(1.023^2))+ (`w'inc`e'/(1.023^3))+ (`w'inc`f'/(1.023^4))+ (`w'inc`g'/(1.023^5))+ (`w'inc`h'/(1.023^6))+ (`w'inc`i'/(1.023^7))+ (`w'inc`j'/(1.023^8))+ (`w'inc`k'/(1.023^9))+ (`w'inc`l'/(1.023^10))+ (`w'inc`m'/(1.023^11))+ (`w'inc`n'/(1.023^12)))*(0.023/(1.023*(1-(1.023)^(-13)))) if b_year==`t'\n\n\n}\n}\n\n\n\n\n\n*gender gap\n\n\n\ngen ggemptot=memptot/(memptot+femptot)\nreplace ggemptot=0.5 if memptot==0 & femptot==0\n\ngen gginctot=minctot/(minctot+finctot)\nreplace gginctot=0.5 if minctot==0 & finctot==0\n\n\n\n\n\n\n\n***Want everything in US dollars. divide by 6:\n\ngen minctot_d=minctot/6\ngen finctot_d=finctot/6\ndrop minctot finctot\nrename minctot_d minctot\nrename finctot_d finctot\n\n\n\n\n\nsave /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_87_92_tempcost1.dta, replace\n\nuse /ssb/ovibos/a1/swp/kav/wk24/allreforms/data/cohorts_87_92_tempcost1.dta, clear\n\n/*\n***create Extended disposable income: Same as the one above but add dollar value of child outcome \"",
        "line": 43,
        "column": 19810
      },
      {
        "id": "identifier",
        "value": "high",
        "line": 43,
        "column": 21759
      },
      {
        "id": "identifier",
        "value": "school",
        "line": 43,
        "column": 21764
      },
      {
        "id": "identifier",
        "value": "dropout.",
        "line": 43,
        "column": 21771
      }
    ]
  },
  {
    "command": {
      "id": "number",
      "value": "2",
      "line": 45,
      "column": 1
    },
    "varlist": [
      {
        "id": "*",
        "value": "*",
        "line": 45,
        "column": 2
      },
      {
        "id": ":",
        "value": ":",
        "line": 45,
        "column": 3
      },
      {
        "id": "identifier",
        "value": "kontroller",
        "line": 45,
        "column": 5
      },
      {
        "id": "identifier",
        "value": "for",
        "line": 45,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "f",
        "line": 45,
        "column": 20
      },
      {
        "id": "\u00af",
        "value": "\u00af",
        "line": 45,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "dselskohort",
        "line": 45,
        "column": 22
      },
      {
        "id": "+",
        "value": "+",
        "line": 45,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "f",
        "line": 45,
        "column": 36
      },
      {
        "id": "\u00af",
        "value": "\u00af",
        "line": 45,
        "column": 37
      },
      {
        "id": "identifier",
        "value": "dselskommune",
        "line": 45,
        "column": 38
      }
    ]
  },
  {
    "id": "comment",
    "value": "*/",
    "line": 47,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*annuity in us dollars",
    "line": 49,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 51,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ext2",
        "line": 51,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "28263.6",
        "line": 51,
        "column": 10
      },
      {
        "id": "/",
        "value": "/",
        "line": 51,
        "column": 17
      },
      {
        "id": "number",
        "value": "6",
        "line": 51,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 55,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "annuity_disp_faminc_ext2",
        "line": 55,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "annuity_disp_faminc",
        "line": 55,
        "column": 30
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "dropout_20",
        "line": 55,
        "column": 53
      },
      {
        "id": "==",
        "value": "==",
        "line": 55,
        "column": 63
      },
      {
        "id": "number",
        "value": "1",
        "line": 55,
        "column": 65
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 56,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "annuity_disp_faminc_ext2",
        "line": 56,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "annuity_disp_faminc",
        "line": 56,
        "column": 34
      },
      {
        "id": "+",
        "value": "+",
        "line": 56,
        "column": 53
      },
      {
        "id": "identifier",
        "value": "ext2",
        "line": 56,
        "column": 54
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "dropout_20",
        "line": 56,
        "column": 62
      },
      {
        "id": "==",
        "value": "==",
        "line": 56,
        "column": 72
      },
      {
        "id": "number",
        "value": "0",
        "line": 56,
        "column": 74
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 60,
      "column": 1
    },
    "varlist": [
      {
        "id": "/",
        "value": "/",
        "line": 60,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "ssb",
        "line": 60,
        "column": 7
      },
      {
        "id": "/",
        "value": "/",
        "line": 60,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "ovibos",
        "line": 60,
        "column": 11
      },
      {
        "id": "/",
        "value": "/",
        "line": 60,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "a1",
        "line": 60,
        "column": 18
      },
      {
        "id": "/",
        "value": "/",
        "line": 60,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "swp",
        "line": 60,
        "column": 21
      },
      {
        "id": "/",
        "value": "/",
        "line": 60,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "kav",
        "line": 60,
        "column": 25
      },
      {
        "id": "/",
        "value": "/",
        "line": 60,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "wk24",
        "line": 60,
        "column": 29
      },
      {
        "id": "/",
        "value": "/",
        "line": 60,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "allreforms",
        "line": 60,
        "column": 34
      },
      {
        "id": "/",
        "value": "/",
        "line": 60,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "data",
        "line": 60,
        "column": 45
      },
      {
        "id": "/",
        "value": "/",
        "line": 60,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "cohorts_87_92_tempcost1.dta",
        "line": 60,
        "column": 50
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 60,
        "column": 79
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "log",
      "line": 69,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "close",
        "line": 69,
        "column": 5
      }
    ]
  }
]