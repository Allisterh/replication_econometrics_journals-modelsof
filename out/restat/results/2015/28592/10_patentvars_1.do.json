[
  {
    "id": "comment",
    "value": "*-----------------------------------------------------------------",
    "line": 1,
    "column": 1
  },
  {
    "command": {
      "id": "number",
      "value": "11",
      "line": 2,
      "column": 9
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "version",
          "line": 2,
          "column": 1
        }
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "clear",
      "line": 3,
      "column": 5
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "cap",
          "line": 3,
          "column": 1
        }
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "clear",
      "line": 4,
      "column": 5
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "cap",
          "line": 4,
          "column": 1
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "matrix",
        "line": 4,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "log",
      "line": 5,
      "column": 5
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "cap",
          "line": 5,
          "column": 1
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "close",
        "line": 5,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "set",
      "line": 6,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "more",
        "line": 6,
        "column": 5
      },
      {
        "id": "identifier",
        "value": "off",
        "line": 6,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "set",
      "line": 7,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mem",
        "line": 7,
        "column": 5
      },
      {
        "id": "number",
        "value": "1500m",
        "line": 7,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "cd",
      "line": 8,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"E:\\REStat_MS14767_Vol96(2)\\Data preparation Compustat segment\"",
        "line": 8,
        "column": 4
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "log",
      "line": 9,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "using",
        "line": 9,
        "column": 5
      },
      {
        "id": "number",
        "value": "10",
        "line": 9,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "_patentvars.log",
        "line": 9,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 9,
        "column": 30
      }
    ]
  },
  {
    "id": "comment",
    "value": "*-----------------------------------------------------------------",
    "line": 10,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*****************************************************************",
    "line": 12,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*** compustat_master_all_countries.dta to\t\t\t\t    *",
    "line": 13,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*** clean_compustat_master.dta \t\t\t\t\t    *",
    "line": 14,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*** This file creates the variable S by taking patent infos and *",
    "line": 15,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*** r&d-expenditure together.\t\t\t\t\t\t    *",
    "line": 16,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*** 2,500,000 entries remain in the patent data.\t\t    *",
    "line": 17,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*****************************************************************",
    "line": 18,
    "column": 1
  },
  {
    "id": "comment",
    "value": "**********************",
    "line": 20,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*In this part, patent data and compustat data are brought together.",
    "line": 21,
    "column": 1
  },
  {
    "id": "comment",
    "value": "***********************",
    "line": 22,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 24,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"raw data\\apat63_99.dta\"",
        "line": 24,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 24,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "so",
      "line": 25,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "assignee",
        "line": 25,
        "column": 4
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 26,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "gyear",
        "line": 26,
        "column": 9
      },
      {
        "id": "<",
        "value": "<",
        "line": 26,
        "column": 14
      },
      {
        "id": "number",
        "value": "1969",
        "line": 26,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "joinby",
      "line": 28,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "assignee",
        "line": 28,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 28,
        "column": 17
      },
      {
        "id": "string",
        "value": "\"patent files\\cusipnamemerged_red.dta\"",
        "line": 28,
        "column": 23
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "unmatched",
        "line": 28,
        "column": 62
      },
      {
        "id": "identifier",
        "value": "both",
        "line": 28,
        "column": 72
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "tab",
      "line": 30,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 30,
        "column": 5
      }
    ]
  },
  {
    "id": "comment",
    "value": "**********************************************************",
    "line": 32,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*",
    "line": 33,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*                       _merge |      Freq.     Percent        Cum.",
    "line": 34,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*------------------------------+-----------------------------------",
    "line": 35,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*          only in master data |  1,960,613       75.37       75.37",
    "line": 36,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*both in master and using data |    640,872       24.63      100.00",
    "line": 37,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*------------------------------+-----------------------------------",
    "line": 38,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*                        Total |  2,601,485      100.00",
    "line": 39,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*************************************************************",
    "line": 40,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 42,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 42,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 42,
        "column": 15
      },
      {
        "id": "number",
        "value": "3",
        "line": 42,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 43,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 43,
        "column": 6
      }
    ]
  },
  {
    "id": "comment",
    "value": "*************************",
    "line": 45,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Check observations",
    "line": 46,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "count",
      "line": 47,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "assignee",
        "line": 47,
        "column": 10
      },
      {
        "id": "!=",
        "value": "!=",
        "line": 47,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "assignee",
        "line": 47,
        "column": 20
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "_n",
        "line": 47,
        "column": 29
      },
      {
        "id": "-",
        "value": "-",
        "line": 47,
        "column": 31
      },
      {
        "id": "number",
        "value": "1",
        "line": 47,
        "column": 32
      },
      {
        "id": "]",
        "value": "]",
        "line": 47,
        "column": 33
      }
    ]
  },
  {
    "id": "comment",
    "value": "* must give number around 3590",
    "line": 48,
    "column": 1
  },
  {
    "id": "comment",
    "value": "***************************",
    "line": 49,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*********************************",
    "line": 51,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Here some vars are generated",
    "line": 52,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* If some further patent informationshall be kept, ",
    "line": 53,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* the egen-line can easily be copied for each variable.",
    "line": 54,
    "column": 1
  },
  {
    "id": "comment",
    "value": "***************************",
    "line": 55,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 57,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "gyear",
        "line": 57,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 57,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "so",
      "line": 58,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ticker",
        "line": 58,
        "column": 4
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 58,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 59,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "ticker",
        "line": 59,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 59,
        "column": 15
      },
      {
        "id": "string",
        "value": "\"\"",
        "line": 59,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 60,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "t",
        "line": 60,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 60,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "label",
      "line": 61,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "var",
        "line": 61,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "t",
        "line": 61,
        "column": 11
      },
      {
        "id": "string",
        "value": "\"counting variable\"",
        "line": 61,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 62,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "numpatentsy",
        "line": 62,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "sum",
        "line": 62,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "t",
        "line": 62,
        "column": 22
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 62,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "ticker",
        "line": 62,
        "column": 29
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 62,
        "column": 36
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "label",
      "line": 63,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "var",
        "line": 63,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "numpatentsy",
        "line": 63,
        "column": 11
      },
      {
        "id": "string",
        "value": "\"number of patents in a certain year\"",
        "line": 63,
        "column": 23
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 64,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "claimsy",
        "line": 64,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "sum",
        "line": 64,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "claims",
        "line": 64,
        "column": 18
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 64,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "ticker",
        "line": 64,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 64,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "label",
      "line": 65,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "var",
        "line": 65,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "claimsy",
        "line": 65,
        "column": 11
      },
      {
        "id": "string",
        "value": "\"sum of claims in a certain year\"",
        "line": 65,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 66,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "avclaims",
        "line": 66,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "claimsy",
        "line": 66,
        "column": 14
      },
      {
        "id": "/",
        "value": "/",
        "line": 66,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "numpatentsy",
        "line": 66,
        "column": 22
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "label",
      "line": 67,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "var",
        "line": 67,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "avclaims",
        "line": 67,
        "column": 11
      },
      {
        "id": "string",
        "value": "\"claimsy divided by numpatentsy\"",
        "line": 67,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 68,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "t",
        "line": 68,
        "column": 6
      }
    ]
  },
  {
    "id": "comment",
    "value": "/*\n\n********************************************************\n* we generate the patent stock, lagged vars\n********************************************************\n\nby ticker: gen yearweight=year[_n+1]-year if year!=year[_n+1]\ngen xxx=numpatentsy\nreplace xxx=0 if xxx==.\nso ticker year\nby ticker: gen patents=xxx+xxx[_n-1]*(1-0.15)^yearweight if year!=year[_n-1]\nlabel var patents \"patentstock, depreciated\"\ndrop xxx\nreplace patents=patents[_n-1] if year==year & ticker==ticker[_n-1] & patents==.\nreplace patents=0 if patents==.\nso ticker year\nby ticker: gen patents_t_1=patents[_n-1]\nlabel var patents_t_1 \"lagged patentstock, lag 1\"\nby ticker: gen patents_t_2=patents[_n-2]\nlabel var patents_t_1 \"lagged patentstock, lag 2\"\nby ticker: gen patents_t_3=patents[_n-3]\nlabel var patents_t_1 \"lagged patentstock, lag 3\"\nby ticker: gen patents_t_4=patents[_n-4]\nlabel var patents_t_1 \"lagged patentstock, lag 4\"\n\n*/",
    "line": 70,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*********************************************************",
    "line": 72,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* creating a panel",
    "line": 73,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*********************************************************",
    "line": 74,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 76,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_99_cusip.dta\"",
        "line": 76,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 76,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 77,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 77,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 77,
        "column": 13
      },
      {
        "id": "number",
        "value": "1998",
        "line": 77,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 78,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_98_cusip.dta\"",
        "line": 78,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 78,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 79,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 79,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 79,
        "column": 13
      },
      {
        "id": "number",
        "value": "1997",
        "line": 79,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 80,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_97_cusip.dta\"",
        "line": 80,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 80,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 81,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 81,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 81,
        "column": 13
      },
      {
        "id": "number",
        "value": "1996",
        "line": 81,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 82,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_96_cusip.dta\"",
        "line": 82,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 82,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 83,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 83,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 83,
        "column": 13
      },
      {
        "id": "number",
        "value": "1995",
        "line": 83,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 84,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_95_cusip.dta\"",
        "line": 84,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 84,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 85,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 85,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 85,
        "column": 13
      },
      {
        "id": "number",
        "value": "1994",
        "line": 85,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 86,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_94_cusip.dta\"",
        "line": 86,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 86,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 87,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 87,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 87,
        "column": 13
      },
      {
        "id": "number",
        "value": "1993",
        "line": 87,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 88,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_93_cusip.dta\"",
        "line": 88,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 88,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 89,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 89,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 89,
        "column": 13
      },
      {
        "id": "number",
        "value": "1992",
        "line": 89,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 90,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_92_cusip.dta\"",
        "line": 90,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 90,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 91,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 91,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 91,
        "column": 13
      },
      {
        "id": "number",
        "value": "1991",
        "line": 91,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 92,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_91_cusip.dta\"",
        "line": 92,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 92,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 93,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 93,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 93,
        "column": 13
      },
      {
        "id": "number",
        "value": "1990",
        "line": 93,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 94,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_90_cusip.dta\"",
        "line": 94,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 94,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 95,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 95,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 95,
        "column": 13
      },
      {
        "id": "number",
        "value": "1989",
        "line": 95,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 96,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_89_cusip.dta\"",
        "line": 96,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 96,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 97,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 97,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 97,
        "column": 13
      },
      {
        "id": "number",
        "value": "1988",
        "line": 97,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 98,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_88_cusip.dta\"",
        "line": 98,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 98,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 99,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 99,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 99,
        "column": 13
      },
      {
        "id": "number",
        "value": "1987",
        "line": 99,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 100,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_87_cusip.dta\"",
        "line": 100,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 100,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 101,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 101,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 101,
        "column": 13
      },
      {
        "id": "number",
        "value": "1986",
        "line": 101,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 102,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_86_cusip.dta\"",
        "line": 102,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 102,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 104,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "z",
        "line": 104,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "86",
        "line": 104,
        "column": 13
      },
      {
        "id": "/",
        "value": "/",
        "line": 104,
        "column": 15
      },
      {
        "id": "number",
        "value": "99",
        "line": 104,
        "column": 16
      },
      {
        "id": "{",
        "value": "{",
        "line": 104,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 105,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\apat69_`z'_cusip.dta\"",
        "line": 105,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 105,
        "column": 42
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 106,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "t",
        "line": 106,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "group",
        "line": 106,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 106,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 107,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "T",
        "line": 107,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 107,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "t",
        "line": 107,
        "column": 12
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 108,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "T",
        "line": 108,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "T",
        "line": 108,
        "column": 11
      },
      {
        "id": "+",
        "value": "+",
        "line": 108,
        "column": 12
      },
      {
        "id": "number",
        "value": "1",
        "line": 108,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 109,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "t",
        "line": 109,
        "column": 6
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "order",
      "line": 111,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 111,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "so",
      "line": 112,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 112,
        "column": 4
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 114,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 114,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 114,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 115,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 115,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 115,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 115,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 115,
        "column": 23
      },
      {
        "id": "number",
        "value": "11",
        "line": 115,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 116,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 116,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "2",
        "line": 116,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 116,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 116,
        "column": 23
      },
      {
        "id": "number",
        "value": "12",
        "line": 116,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 117,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 117,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "3",
        "line": 117,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 117,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 117,
        "column": 23
      },
      {
        "id": "number",
        "value": "13",
        "line": 117,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 118,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 118,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "4",
        "line": 118,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 118,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 118,
        "column": 23
      },
      {
        "id": "number",
        "value": "14",
        "line": 118,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 119,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 119,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "5",
        "line": 119,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 119,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 119,
        "column": 23
      },
      {
        "id": "number",
        "value": "15",
        "line": 119,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 120,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 120,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "6",
        "line": 120,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 120,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 120,
        "column": 23
      },
      {
        "id": "number",
        "value": "19",
        "line": 120,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 121,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 121,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "7",
        "line": 121,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 121,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 121,
        "column": 23
      },
      {
        "id": "number",
        "value": "21",
        "line": 121,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 122,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 122,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "8",
        "line": 122,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 122,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 122,
        "column": 23
      },
      {
        "id": "number",
        "value": "22",
        "line": 122,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 123,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 123,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "9",
        "line": 123,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 123,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 123,
        "column": 23
      },
      {
        "id": "number",
        "value": "23",
        "line": 123,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 124,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 124,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "10",
        "line": 124,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 124,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 124,
        "column": 23
      },
      {
        "id": "number",
        "value": "24",
        "line": 124,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 125,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 125,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "11",
        "line": 125,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 125,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 125,
        "column": 23
      },
      {
        "id": "number",
        "value": "31",
        "line": 125,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 126,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 126,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "12",
        "line": 126,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 126,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 126,
        "column": 23
      },
      {
        "id": "number",
        "value": "32",
        "line": 126,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 127,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 127,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "13",
        "line": 127,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 127,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 127,
        "column": 23
      },
      {
        "id": "number",
        "value": "33",
        "line": 127,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 128,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 128,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "14",
        "line": 128,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 128,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 128,
        "column": 23
      },
      {
        "id": "number",
        "value": "39",
        "line": 128,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 129,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 129,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "15",
        "line": 129,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 129,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 129,
        "column": 23
      },
      {
        "id": "number",
        "value": "41",
        "line": 129,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 130,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 130,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "16",
        "line": 130,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 130,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 130,
        "column": 23
      },
      {
        "id": "number",
        "value": "42",
        "line": 130,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 131,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 131,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "17",
        "line": 131,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 131,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 131,
        "column": 23
      },
      {
        "id": "number",
        "value": "43",
        "line": 131,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 132,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 132,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "18",
        "line": 132,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 132,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 132,
        "column": 23
      },
      {
        "id": "number",
        "value": "44",
        "line": 132,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 133,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 133,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "19",
        "line": 133,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 133,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 133,
        "column": 23
      },
      {
        "id": "number",
        "value": "45",
        "line": 133,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 134,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 134,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "20",
        "line": 134,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 134,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 134,
        "column": 23
      },
      {
        "id": "number",
        "value": "46",
        "line": 134,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 135,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 135,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "21",
        "line": 135,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 135,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 135,
        "column": 23
      },
      {
        "id": "number",
        "value": "49",
        "line": 135,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 136,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 136,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "22",
        "line": 136,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 136,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 136,
        "column": 23
      },
      {
        "id": "number",
        "value": "51",
        "line": 136,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 137,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 137,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "23",
        "line": 137,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 137,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 137,
        "column": 23
      },
      {
        "id": "number",
        "value": "52",
        "line": 137,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 138,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 138,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "24",
        "line": 138,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 138,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 138,
        "column": 23
      },
      {
        "id": "number",
        "value": "53",
        "line": 138,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 139,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 139,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "25",
        "line": 139,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 139,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 139,
        "column": 23
      },
      {
        "id": "number",
        "value": "54",
        "line": 139,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 140,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 140,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "26",
        "line": 140,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 140,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 140,
        "column": 23
      },
      {
        "id": "number",
        "value": "55",
        "line": 140,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 141,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 141,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "27",
        "line": 141,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 141,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 141,
        "column": 23
      },
      {
        "id": "number",
        "value": "59",
        "line": 141,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 142,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 142,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "28",
        "line": 142,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 142,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 142,
        "column": 23
      },
      {
        "id": "number",
        "value": "61",
        "line": 142,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 143,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 143,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "29",
        "line": 143,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 143,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 143,
        "column": 23
      },
      {
        "id": "number",
        "value": "62",
        "line": 143,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 144,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 144,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "30",
        "line": 144,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 144,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 144,
        "column": 23
      },
      {
        "id": "number",
        "value": "63",
        "line": 144,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 145,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 145,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "31",
        "line": 145,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 145,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 145,
        "column": 23
      },
      {
        "id": "number",
        "value": "64",
        "line": 145,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 146,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 146,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "32",
        "line": 146,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 146,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 146,
        "column": 23
      },
      {
        "id": "number",
        "value": "65",
        "line": 146,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 147,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 147,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "33",
        "line": 147,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 147,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 147,
        "column": 23
      },
      {
        "id": "number",
        "value": "66",
        "line": 147,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 148,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 148,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "34",
        "line": 148,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 148,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 148,
        "column": 23
      },
      {
        "id": "number",
        "value": "67",
        "line": 148,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 149,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 149,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "35",
        "line": 149,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 149,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 149,
        "column": 23
      },
      {
        "id": "number",
        "value": "68",
        "line": 149,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 150,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 150,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "36",
        "line": 150,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "subcat",
        "line": 150,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 150,
        "column": 23
      },
      {
        "id": "number",
        "value": "69",
        "line": 150,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 152,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "t",
        "line": 152,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 152,
        "column": 7
      }
    ]
  },
  {
    "id": "comment",
    "value": "/*sum of patents in that catagory*/",
    "line": 153,
    "column": 29
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 153,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 153,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "sum",
        "line": 153,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "t",
        "line": 153,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 153,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 153,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 153,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 154,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "t",
        "line": 154,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 154,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "appyear",
        "line": 154,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "nclass",
        "line": 154,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "cat",
        "line": 154,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "subcat",
        "line": 154,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "patent",
        "line": 154,
        "column": 39
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "so",
      "line": 155,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 155,
        "column": 4
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 155,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 156,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 156,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 156,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 156,
        "column": 16
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "_n",
        "line": 156,
        "column": 22
      },
      {
        "id": "+",
        "value": "+",
        "line": 156,
        "column": 24
      },
      {
        "id": "number",
        "value": "1",
        "line": 156,
        "column": 25
      },
      {
        "id": "]",
        "value": "]",
        "line": 156,
        "column": 26
      },
      {
        "id": "&",
        "value": "&",
        "line": 156,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 156,
        "column": 30
      },
      {
        "id": "==",
        "value": "==",
        "line": 156,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 156,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "_n",
        "line": 156,
        "column": 35
      },
      {
        "id": "+",
        "value": "+",
        "line": 156,
        "column": 37
      },
      {
        "id": "number",
        "value": "1",
        "line": 156,
        "column": 38
      },
      {
        "id": "]",
        "value": "]",
        "line": 156,
        "column": 39
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 158,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk1",
        "line": 158,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 158,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 159,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk2",
        "line": 159,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 159,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 160,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk3",
        "line": 160,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 160,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 161,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk4",
        "line": 161,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 161,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 162,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk5",
        "line": 162,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 162,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 163,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk6",
        "line": 163,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 163,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 164,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk7",
        "line": 164,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 164,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 165,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk8",
        "line": 165,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 165,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 166,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk9",
        "line": 166,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 166,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 167,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk10",
        "line": 167,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 167,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 168,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk11",
        "line": 168,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 168,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 169,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk12",
        "line": 169,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 169,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 170,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk13",
        "line": 170,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 170,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 171,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk14",
        "line": 171,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 171,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 172,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk15",
        "line": 172,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 172,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 173,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk16",
        "line": 173,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 173,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 174,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk17",
        "line": 174,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 174,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 175,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk18",
        "line": 175,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 175,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 176,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk19",
        "line": 176,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 176,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 177,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk20",
        "line": 177,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 177,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 178,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk21",
        "line": 178,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 178,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 179,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk22",
        "line": 179,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 179,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 180,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk23",
        "line": 180,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 180,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 181,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk24",
        "line": 181,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 181,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 182,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk25",
        "line": 182,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 182,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 183,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk26",
        "line": 183,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 183,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 184,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk27",
        "line": 184,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 184,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 185,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk28",
        "line": 185,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 185,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 186,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk29",
        "line": 186,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 186,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 187,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk30",
        "line": 187,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 187,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 188,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk31",
        "line": 188,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 188,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 189,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk32",
        "line": 189,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 189,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 190,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk33",
        "line": 190,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 190,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 191,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk34",
        "line": 191,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 191,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 192,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk35",
        "line": 192,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 192,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 193,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk36",
        "line": 193,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ct",
        "line": 193,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 195,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 195,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 195,
        "column": 14
      },
      {
        "id": "string",
        "value": "\".\"",
        "line": 195,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 197,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "id",
        "line": 197,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "group",
        "line": 197,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 197,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 197,
        "column": 21
      }
    ]
  },
  {
    "id": "comment",
    "value": "************************",
    "line": 199,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Dataset is reshaped here",
    "line": 200,
    "column": 1
  },
  {
    "id": "comment",
    "value": "************************",
    "line": 201,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "reshape",
      "line": 203,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "long",
        "line": 203,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "kk",
        "line": 203,
        "column": 14
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "i",
        "line": 203,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "id",
        "line": 203,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "j",
        "line": 203,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "j",
        "line": 203,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 204,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "id",
        "line": 204,
        "column": 6
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 206,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk",
        "line": 206,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 206,
        "column": 12
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "j",
        "line": 206,
        "column": 17
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 206,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "k",
        "line": 206,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "so",
      "line": 208,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 208,
        "column": 4
      },
      {
        "id": "identifier",
        "value": "j",
        "line": 208,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "kk",
        "line": 208,
        "column": 12
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 209,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 209,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 209,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 209,
        "column": 16
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "_n",
        "line": 209,
        "column": 22
      },
      {
        "id": "+",
        "value": "+",
        "line": 209,
        "column": 24
      },
      {
        "id": "number",
        "value": "1",
        "line": 209,
        "column": 25
      },
      {
        "id": "]",
        "value": "]",
        "line": 209,
        "column": 26
      },
      {
        "id": "&",
        "value": "&",
        "line": 209,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "j",
        "line": 209,
        "column": 30
      },
      {
        "id": "==",
        "value": "==",
        "line": 209,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "j",
        "line": 209,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "_n",
        "line": 209,
        "column": 35
      },
      {
        "id": "+",
        "value": "+",
        "line": 209,
        "column": 37
      },
      {
        "id": "number",
        "value": "1",
        "line": 209,
        "column": 38
      },
      {
        "id": "]",
        "value": "]",
        "line": 209,
        "column": 39
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 210,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 210,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "ct",
        "line": 210,
        "column": 8
      }
    ]
  },
  {
    "id": "comment",
    "value": "****************************",
    "line": 212,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Dataset is reshaped again",
    "line": 213,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*************************",
    "line": 214,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 216,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "id",
        "line": 216,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "group",
        "line": 216,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 216,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "j",
        "line": 216,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "reshape",
      "line": 217,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "wide",
        "line": 217,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "kk",
        "line": 217,
        "column": 14
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "i",
        "line": 217,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "id",
        "line": 217,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "j",
        "line": 217,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "j",
        "line": 217,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 218,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "id",
        "line": 218,
        "column": 6
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 220,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "i",
        "line": 220,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 220,
        "column": 13
      },
      {
        "id": "/",
        "value": "/",
        "line": 220,
        "column": 14
      },
      {
        "id": "number",
        "value": "36",
        "line": 220,
        "column": 15
      },
      {
        "id": "{",
        "value": "{",
        "line": 220,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 221,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k",
        "line": 221,
        "column": 6
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 221,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 221,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "kk",
        "line": 221,
        "column": 15
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 221,
        "column": 17
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 221,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 221,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 222,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "kk",
        "line": 222,
        "column": 6
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 222,
        "column": 8
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "count",
      "line": 225,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 225,
        "column": 10
      },
      {
        "id": "==",
        "value": "==",
        "line": 225,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 225,
        "column": 17
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "_n",
        "line": 225,
        "column": 23
      },
      {
        "id": "-",
        "value": "-",
        "line": 225,
        "column": 25
      },
      {
        "id": "number",
        "value": "1",
        "line": 225,
        "column": 26
      },
      {
        "id": "]",
        "value": "]",
        "line": 225,
        "column": 27
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 226,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 226,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 226,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 226,
        "column": 16
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "_n",
        "line": 226,
        "column": 22
      },
      {
        "id": "-",
        "value": "-",
        "line": 226,
        "column": 24
      },
      {
        "id": "number",
        "value": "1",
        "line": 226,
        "column": 25
      },
      {
        "id": "]",
        "value": "]",
        "line": 226,
        "column": 26
      }
    ]
  },
  {
    "id": "comment",
    "value": "************************************",
    "line": 228,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Here starts the variable building",
    "line": 229,
    "column": 1
  },
  {
    "id": "comment",
    "value": "********************************",
    "line": 230,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "set",
      "line": 232,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "matsize",
        "line": 232,
        "column": 5
      },
      {
        "id": "number",
        "value": "5000",
        "line": 232,
        "column": 13
      }
    ]
  },
  {
    "id": "comment",
    "value": "******************************",
    "line": 234,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* The patent distribution information for all firms is stored in one matrix M, where each",
    "line": 235,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* row of the matrix gives the patent distribution of one firm. The dimensions of the matrix",
    "line": 236,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* will N*36, where N is the number of firms in the dataset",
    "line": 237,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*****************************",
    "line": 238,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "mkmat",
      "line": 240,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "k1",
        "line": 240,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "k2",
        "line": 240,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "k3",
        "line": 240,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "k4",
        "line": 240,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "k5",
        "line": 240,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "k6",
        "line": 240,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "k7",
        "line": 240,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "k8",
        "line": 240,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "k9",
        "line": 240,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "k10",
        "line": 240,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "k11",
        "line": 240,
        "column": 38
      },
      {
        "id": "identifier",
        "value": "k12",
        "line": 240,
        "column": 42
      },
      {
        "id": "identifier",
        "value": "k13",
        "line": 240,
        "column": 46
      },
      {
        "id": "identifier",
        "value": "k14",
        "line": 240,
        "column": 50
      },
      {
        "id": "identifier",
        "value": "k15",
        "line": 240,
        "column": 54
      },
      {
        "id": "identifier",
        "value": "k16",
        "line": 240,
        "column": 58
      },
      {
        "id": "identifier",
        "value": "k17",
        "line": 240,
        "column": 62
      },
      {
        "id": "identifier",
        "value": "k18",
        "line": 240,
        "column": 66
      },
      {
        "id": "identifier",
        "value": "k19",
        "line": 240,
        "column": 70
      },
      {
        "id": "identifier",
        "value": "k20",
        "line": 240,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "k21",
        "line": 240,
        "column": 78
      },
      {
        "id": "identifier",
        "value": "k22",
        "line": 240,
        "column": 82
      },
      {
        "id": "identifier",
        "value": "k23",
        "line": 240,
        "column": 86
      },
      {
        "id": "identifier",
        "value": "k24",
        "line": 240,
        "column": 90
      },
      {
        "id": "identifier",
        "value": "k25",
        "line": 240,
        "column": 94
      },
      {
        "id": "identifier",
        "value": "k26",
        "line": 240,
        "column": 98
      },
      {
        "id": "identifier",
        "value": "k27",
        "line": 240,
        "column": 102
      },
      {
        "id": "identifier",
        "value": "k28",
        "line": 240,
        "column": 106
      },
      {
        "id": "identifier",
        "value": "k29",
        "line": 240,
        "column": 110
      },
      {
        "id": "identifier",
        "value": "k30",
        "line": 240,
        "column": 114
      },
      {
        "id": "identifier",
        "value": "k31",
        "line": 240,
        "column": 118
      },
      {
        "id": "identifier",
        "value": "k32",
        "line": 240,
        "column": 122
      },
      {
        "id": "identifier",
        "value": "k33",
        "line": 240,
        "column": 126
      },
      {
        "id": "identifier",
        "value": "k34",
        "line": 240,
        "column": 130
      },
      {
        "id": "identifier",
        "value": "k35",
        "line": 240,
        "column": 134
      },
      {
        "id": "identifier",
        "value": "k36",
        "line": 240,
        "column": 138
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "matrix",
        "line": 240,
        "column": 143
      },
      {
        "id": "identifier",
        "value": "M",
        "line": 240,
        "column": 150
      }
    ]
  },
  {
    "id": "comment",
    "value": "******************************",
    "line": 242,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* The matrix MS is calculated is the product of M with its transpose. The resulting matrix",
    "line": 243,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* will be a square matrix of dimension N*N. Each element of the matrix will be euqal to ",
    "line": 244,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* the inner product of a pair of firms' patent-distribution-vectors, where the diagonal",
    "line": 245,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* elements are the inner product of one firm's patent distribution with itself, and they",
    "line": 246,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* are thus sums of squares. The latter elements are stored in the row vector d.",
    "line": 247,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*****************************",
    "line": 248,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "matrix",
      "line": 250,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 250,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "M",
        "line": 250,
        "column": 11
      },
      {
        "id": "*",
        "value": "*",
        "line": 250,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "M",
        "line": 250,
        "column": 13
      },
      {
        "id": "'",
        "value": "'",
        "line": 250,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "matrix",
      "line": 251,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "d",
        "line": 251,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "vecdiag",
        "line": 251,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "MS",
        "line": 251,
        "column": 18
      }
    ]
  },
  {
    "id": "comment",
    "value": "*****************************",
    "line": 253,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* The outer product of the vector of sums of squares (d) is stored as the N*N matrix D.",
    "line": 254,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Each element of the matrix will thus be equal to the product of two sums of squares.",
    "line": 255,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*******************************",
    "line": 256,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "matrix",
      "line": 258,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "D",
        "line": 258,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "d",
        "line": 258,
        "column": 10
      },
      {
        "id": "'",
        "value": "'",
        "line": 258,
        "column": 11
      },
      {
        "id": "*",
        "value": "*",
        "line": 258,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "d",
        "line": 258,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 260,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "id",
        "line": 260,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "group",
        "line": 260,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 260,
        "column": 15
      }
    ]
  },
  {
    "id": "comment",
    "value": "****************************",
    "line": 262,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* The colums of the matrices MS and D are stored as variables, so that functions can",
    "line": 263,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* be applied to the single elements of the matrices.",
    "line": 264,
    "column": 1
  },
  {
    "id": "comment",
    "value": "************************",
    "line": 265,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "svmat",
      "line": 267,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "D",
        "line": 267,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "svmat",
      "line": 268,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 268,
        "column": 7
      }
    ]
  },
  {
    "id": "comment",
    "value": "**************************",
    "line": 270,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* The following loop first takes the square root of each observation in each D-variable",
    "line": 271,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* (i.e. of each element in matrix D). Now all elemnts of MS and D that have the same",
    "line": 272,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* position (row i, column j) constitute, respectively, the numerator and the denominator",
    "line": 273,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* for an uncentered correlation coeffecient between the patent distributions of firms",
    "line": 274,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* i and j. Thus, a fraction of each of these pairs is calculated and stored in MS",
    "line": 275,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* which now constitutes a correlation matrix for ALL firms, only that the diagonal ",
    "line": 276,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* elements (which are 1) are set to zero, as, later on, a firms own r&d expenditures",
    "line": 277,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* are not supposed to enter its potential spillover pool.",
    "line": 278,
    "column": 1
  },
  {
    "id": "comment",
    "value": "************************************",
    "line": 279,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 281,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "i",
        "line": 281,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 281,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "while",
      "line": 282,
      "column": 1
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`i'",
        "line": 282,
        "column": 7
      },
      {
        "id": "<",
        "value": "<",
        "line": 282,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "T",
        "line": 282,
        "column": 11
      },
      {
        "id": "{",
        "value": "{",
        "line": 282,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 283,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "D",
        "line": 283,
        "column": 9
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 283,
        "column": 10
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "sqrt",
        "line": 283,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "D",
        "line": 283,
        "column": 19
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 283,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 284,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 284,
        "column": 9
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 284,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 284,
        "column": 15
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 284,
        "column": 17
      },
      {
        "id": "/",
        "value": "/",
        "line": 284,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "D",
        "line": 284,
        "column": 21
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 284,
        "column": 22
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 285,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "D",
        "line": 285,
        "column": 6
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 285,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 286,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 286,
        "column": 9
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 286,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 286,
        "column": 15
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id",
        "line": 286,
        "column": 20
      },
      {
        "id": "==",
        "value": "==",
        "line": 286,
        "column": 22
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 286,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 287,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "i",
        "line": 287,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`i'",
        "line": 287,
        "column": 9
      },
      {
        "id": "+",
        "value": "+",
        "line": 287,
        "column": 12
      },
      {
        "id": "number",
        "value": "1",
        "line": 287,
        "column": 13
      }
    ]
  },
  {
    "id": "comment",
    "value": "************************************",
    "line": 291,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* In the following loop, for each row of the technological correlation matrix MS",
    "line": 292,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* (which refers to one firm), all elements are set to zero which measure the technology",
    "line": 293,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* correletion between the firm and another firm that does NOT belong to the same",
    "line": 294,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* SIC4 industry. This procedure could be applied to any groups of firms, i.e. ",
    "line": 295,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* firms belonging to the same SIC2/SIC3 industry, or the group of insiders and ",
    "line": 296,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* outsiders of one rjv as we defined them.",
    "line": 297,
    "column": 1
  },
  {
    "id": "comment",
    "value": "**************************************",
    "line": 298,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*Changes for the segment data file:",
    "line": 300,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*Since each firm can be in several Industries the following code had to be changed.",
    "line": 301,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* First the SIC-information is added. The amount of Industries and the INdustries itself can change ",
    "line": 303,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* over time fpr each firm.",
    "line": 304,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Thus the year specific SIC-Information has to be added. ",
    "line": 305,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 309,
      "column": 1
    },
    "varlist": [
      {
        "id": "number",
        "value": "1",
        "line": 309,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 309,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "m",
        "line": 309,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "ticker",
        "line": 309,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 309,
        "column": 18
      },
      {
        "id": "string",
        "value": "\"compustat+segment.dta\"",
        "line": 309,
        "column": 24
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "keepusing",
        "line": 309,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 309,
        "column": 59
      },
      {
        "id": "identifier",
        "value": "SIC",
        "line": 309,
        "column": 64
      },
      {
        "id": "identifier",
        "value": "keep",
        "line": 309,
        "column": 69
      },
      {
        "id": "identifier",
        "value": "match",
        "line": 309,
        "column": 74
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 310,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 310,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 310,
        "column": 14
      },
      {
        "id": "number",
        "value": "1986",
        "line": 310,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 312,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "year",
        "line": 312,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "_merge",
        "line": 312,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "sort",
      "line": 316,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 316,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "SIC",
        "line": 316,
        "column": 12
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 318,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 318,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "seq",
        "line": 318,
        "column": 10
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 318,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "id",
        "line": 318,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 319,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "S",
        "line": 319,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 319,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "s",
        "line": 319,
        "column": 14
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 319,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "id",
        "line": 319,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 321,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "id_sic",
        "line": 321,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "group",
        "line": 321,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "SIC",
        "line": 321,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 322,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "i",
        "line": 322,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 322,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "while",
      "line": 323,
      "column": 1
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`i'",
        "line": 323,
        "column": 7
      },
      {
        "id": "<",
        "value": "<",
        "line": 323,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "T",
        "line": 323,
        "column": 11
      },
      {
        "id": "{",
        "value": "{",
        "line": 323,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 324,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ns",
        "line": 324,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "S",
        "line": 324,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id",
        "line": 324,
        "column": 16
      },
      {
        "id": "==",
        "value": "==",
        "line": 324,
        "column": 19
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 324,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 325,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 325,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 325,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "ns",
        "line": 325,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 326,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 326,
        "column": 10
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 326,
        "column": 15
      },
      {
        "id": "+",
        "value": "+",
        "line": 326,
        "column": 17
      },
      {
        "id": "number",
        "value": "1",
        "line": 326,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "sum",
      "line": 327,
      "column": 6
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "qui",
          "line": 327,
          "column": 1
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 327,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 328,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "check",
        "line": 328,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "r",
        "line": 328,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "N",
        "line": 328,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "if",
      "line": 329,
      "column": 2
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`check'",
        "line": 329,
        "column": 5
      },
      {
        "id": "!=",
        "value": "!=",
        "line": 329,
        "column": 13
      },
      {
        "id": "number",
        "value": "0",
        "line": 329,
        "column": 15
      },
      {
        "id": "{",
        "value": "{",
        "line": 329,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 330,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "match",
        "line": 330,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 330,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 331,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 331,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 331,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "while",
      "line": 332,
      "column": 3
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`s'",
        "line": 332,
        "column": 9
      },
      {
        "id": "<",
        "value": "<",
        "line": 332,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "NS",
        "line": 332,
        "column": 13
      },
      {
        "id": "{",
        "value": "{",
        "line": 332,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 333,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "n",
        "line": 333,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "id_sic",
        "line": 333,
        "column": 10
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id",
        "line": 333,
        "column": 20
      },
      {
        "id": "==",
        "value": "==",
        "line": 333,
        "column": 22
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 333,
        "column": 24
      },
      {
        "id": "&",
        "value": "&",
        "line": 333,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "s",
        "line": 333,
        "column": 30
      },
      {
        "id": "==",
        "value": "==",
        "line": 333,
        "column": 32
      },
      {
        "id": "`'",
        "value": "`s'",
        "line": 333,
        "column": 35
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 334,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "nn",
        "line": 334,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 334,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "n",
        "line": 334,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 335,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "match",
        "line": 335,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 335,
        "column": 20
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id_sic",
        "line": 335,
        "column": 25
      },
      {
        "id": "==",
        "value": "==",
        "line": 335,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "nn",
        "line": 335,
        "column": 33
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 336,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "n",
        "line": 336,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "nn",
        "line": 336,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 337,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 337,
        "column": 10
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`s'",
        "line": 337,
        "column": 12
      },
      {
        "id": "+",
        "value": "+",
        "line": 337,
        "column": 15
      },
      {
        "id": "number",
        "value": "1",
        "line": 337,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 339,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "m",
        "line": 339,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 339,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "match",
        "line": 339,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 339,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "id",
        "line": 339,
        "column": 27
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 340,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 340,
        "column": 11
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 340,
        "column": 13
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 340,
        "column": 17
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "m",
        "line": 340,
        "column": 22
      },
      {
        "id": "==",
        "value": "==",
        "line": 340,
        "column": 24
      },
      {
        "id": "number",
        "value": "0",
        "line": 340,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 341,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 341,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "ns",
        "line": 341,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "match",
        "line": 341,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "m",
        "line": 341,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 342,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "i",
        "line": 342,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`i'",
        "line": 342,
        "column": 11
      },
      {
        "id": "+",
        "value": "+",
        "line": 342,
        "column": 14
      },
      {
        "id": "number",
        "value": "1",
        "line": 342,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "else",
      "line": 345,
      "column": 2
    },
    "varlist": [
      {
        "id": "{",
        "value": "{",
        "line": 345,
        "column": 6
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 346,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 346,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "ns",
        "line": 346,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "MS",
        "line": 346,
        "column": 13
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 346,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 347,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "i",
        "line": 347,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`i'",
        "line": 347,
        "column": 10
      },
      {
        "id": "+",
        "value": "+",
        "line": 347,
        "column": 13
      },
      {
        "id": "number",
        "value": "1",
        "line": 347,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 350,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "s",
        "line": 350,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 350,
        "column": 11
      },
      {
        "id": "number",
        "value": "1",
        "line": 350,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 352,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 352,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "S",
        "line": 352,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "SIC",
        "line": 352,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "id_sic",
        "line": 352,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 353,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\proximity86_`z'.dta\"",
        "line": 353,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 353,
        "column": 42
      }
    ]
  },
  {
    "id": "comment",
    "value": "**************************",
    "line": 356,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* The information on r&d-expenditures from the compustat data is isolated.",
    "line": 357,
    "column": 1
  },
  {
    "id": "comment",
    "value": "****************************",
    "line": 358,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 360,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"compustat+segment.dta\"",
        "line": 360,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 360,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 361,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "SIC",
        "line": 361,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "ticker",
        "line": 361,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "name",
        "line": 361,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 361,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "rd_new",
        "line": 361,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "rd_corr",
        "line": 361,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 361,
        "column": 43
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "so",
      "line": 363,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 363,
        "column": 4
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 363,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 364,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "rd_corr",
        "line": 364,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 364,
        "column": 16
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 364,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 366,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\segment_master_rd.dta\"",
        "line": 366,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 366,
        "column": 44
      }
    ]
  },
  {
    "id": "comment",
    "value": "*******************************",
    "line": 368,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* The r&d information is seperated into year specific datasets. Observations",
    "line": 369,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* where are r&d-expenditures are not observed are DROPPED. I.e., whenever the r&d-expenditure",
    "line": 370,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* variable takes on the value zero, this means that zero expenditures are actually",
    "line": 371,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* OBSERVED.",
    "line": 372,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*******************************",
    "line": 373,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 375,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "z",
        "line": 375,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "86",
        "line": 375,
        "column": 13
      },
      {
        "id": "/",
        "value": "/",
        "line": 375,
        "column": 15
      },
      {
        "id": "number",
        "value": "99",
        "line": 375,
        "column": 16
      },
      {
        "id": "{",
        "value": "{",
        "line": 375,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 376,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\segment_master_rd.dta\"",
        "line": 376,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 376,
        "column": 43
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 377,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "year",
        "line": 377,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 377,
        "column": 13
      },
      {
        "id": "number",
        "value": "19",
        "line": 377,
        "column": 15
      },
      {
        "id": "`'",
        "value": "`z'",
        "line": 377,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 378,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\segment_master_rd`z'.dta\"",
        "line": 378,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 378,
        "column": 46
      }
    ]
  },
  {
    "id": "comment",
    "value": "**********************************",
    "line": 381,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Now, for each year, the dataset containing the correlation matrices are merged",
    "line": 382,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* with the r&d-expenditure information. What makes the issue tricky is that there",
    "line": 383,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* potentially are firms observed in the correlation-matrix data set stemming from ",
    "line": 384,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* the patent data that are not observed in the r&d-expenditure dataset because the ",
    "line": 385,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* variable was not observed in compustat for these firms. In such cases, not only",
    "line": 386,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* the corresponding row for the firm must be dropped, but also the corresponding",
    "line": 387,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* column. Meanwhile, new id's must be assigned in order not to mess up the order",
    "line": 388,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* of rows and columns.",
    "line": 389,
    "column": 1
  },
  {
    "id": "comment",
    "value": "************************************",
    "line": 390,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "set",
      "line": 394,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "more",
        "line": 394,
        "column": 5
      },
      {
        "id": "identifier",
        "value": "off",
        "line": 394,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 395,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "z",
        "line": 395,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "86",
        "line": 395,
        "column": 13
      },
      {
        "id": "/",
        "value": "/",
        "line": 395,
        "column": 15
      },
      {
        "id": "number",
        "value": "99",
        "line": 395,
        "column": 16
      },
      {
        "id": "{",
        "value": "{",
        "line": 395,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 396,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\proximity86_`z'.dta\"",
        "line": 396,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 396,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 398,
      "column": 1
    },
    "varlist": [
      {
        "id": "number",
        "value": "1",
        "line": 398,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 398,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "m",
        "line": 398,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 398,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 398,
        "column": 18
      },
      {
        "id": "string",
        "value": "\"patent files\\segment_master_rd`z'.dta\"",
        "line": 398,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 399,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 399,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 399,
        "column": 15
      },
      {
        "id": "number",
        "value": "2",
        "line": 399,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 400,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "d",
        "line": 400,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "group",
        "line": 400,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 400,
        "column": 16
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 400,
        "column": 26
      },
      {
        "id": "==",
        "value": "==",
        "line": 400,
        "column": 32
      },
      {
        "id": "number",
        "value": "3",
        "line": 400,
        "column": 34
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 401,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "id_new",
        "line": 401,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 401,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "d",
        "line": 401,
        "column": 18
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 401,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 401,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 402,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "d",
        "line": 402,
        "column": 6
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 403,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "u",
        "line": 403,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "group",
        "line": 403,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 403,
        "column": 14
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 403,
        "column": 24
      },
      {
        "id": "==",
        "value": "==",
        "line": 403,
        "column": 30
      },
      {
        "id": "number",
        "value": "1",
        "line": 403,
        "column": 32
      },
      {
        "id": "&",
        "value": "&",
        "line": 403,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "id_new",
        "line": 403,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 403,
        "column": 42
      },
      {
        "id": "identifier",
        "value": ".",
        "line": 403,
        "column": 44
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 404,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 404,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 404,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "u",
        "line": 404,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 405,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 405,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 405,
        "column": 12
      },
      {
        "id": "+",
        "value": "+",
        "line": 405,
        "column": 14
      },
      {
        "id": "number",
        "value": "1",
        "line": 405,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 406,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "f",
        "line": 406,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 406,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "while",
      "line": 407,
      "column": 1
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`f'",
        "line": 407,
        "column": 7
      },
      {
        "id": "<",
        "value": "<",
        "line": 407,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 407,
        "column": 11
      },
      {
        "id": "{",
        "value": "{",
        "line": 407,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 408,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "dro",
        "line": 408,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "id",
        "line": 408,
        "column": 10
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "u",
        "line": 408,
        "column": 16
      },
      {
        "id": "==",
        "value": "==",
        "line": 408,
        "column": 17
      },
      {
        "id": "`'",
        "value": "`f'",
        "line": 408,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 409,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "dropp",
        "line": 409,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 409,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "dro",
        "line": 409,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 410,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "dr",
        "line": 410,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "dropp",
        "line": 410,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 411,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 411,
        "column": 7
      },
      {
        "id": "`'",
        "value": "`dr'",
        "line": 411,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 412,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "dro",
        "line": 412,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "dropp",
        "line": 412,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 413,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "f",
        "line": 413,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`f'",
        "line": 413,
        "column": 10
      },
      {
        "id": "+",
        "value": "+",
        "line": 413,
        "column": 13
      },
      {
        "id": "number",
        "value": "1",
        "line": 413,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 415,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "f",
        "line": 415,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 415,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 416,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 416,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "u",
        "line": 416,
        "column": 9
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 417,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 417,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 417,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "id_new",
        "line": 417,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 418,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 418,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 418,
        "column": 12
      },
      {
        "id": "+",
        "value": "+",
        "line": 418,
        "column": 14
      },
      {
        "id": "number",
        "value": "1",
        "line": 418,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "while",
      "line": 419,
      "column": 1
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`f'",
        "line": 419,
        "column": 7
      },
      {
        "id": "<",
        "value": "<",
        "line": 419,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 419,
        "column": 11
      },
      {
        "id": "{",
        "value": "{",
        "line": 419,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 420,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "p",
        "line": 420,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "id_new",
        "line": 420,
        "column": 8
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id_new",
        "line": 420,
        "column": 18
      },
      {
        "id": "==",
        "value": "==",
        "line": 420,
        "column": 24
      },
      {
        "id": "`'",
        "value": "`f'",
        "line": 420,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 421,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 421,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 421,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "p",
        "line": 421,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 422,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "p",
        "line": 422,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 423,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "p",
        "line": 423,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "s",
        "line": 423,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 424,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 424,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 425,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 425,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "id",
        "line": 425,
        "column": 8
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id_new",
        "line": 425,
        "column": 14
      },
      {
        "id": "==",
        "value": "==",
        "line": 425,
        "column": 20
      },
      {
        "id": "`'",
        "value": "`f'",
        "line": 425,
        "column": 22
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 426,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "r",
        "line": 426,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 426,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "q",
        "line": 426,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 427,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 427,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 428,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 428,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "r",
        "line": 428,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 429,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "r",
        "line": 429,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 430,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 430,
        "column": 9
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 430,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "MS",
        "line": 430,
        "column": 15
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 430,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "a",
        "line": 430,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 431,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 431,
        "column": 9
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 431,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "a",
        "line": 431,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "MS",
        "line": 431,
        "column": 16
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 431,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 433,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "f",
        "line": 433,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`f'",
        "line": 433,
        "column": 10
      },
      {
        "id": "+",
        "value": "+",
        "line": 433,
        "column": 13
      },
      {
        "id": "number",
        "value": "1",
        "line": 433,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 435,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 435,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 435,
        "column": 15
      },
      {
        "id": "number",
        "value": "1",
        "line": 435,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 436,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 436,
        "column": 6
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Here the Spillover is calculated with the  Sic-sqecific r&d-Expenditure. From that SIC  where both firm meet",
    "line": 438,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* each other. ",
    "line": 439,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 440,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "id_sic",
        "line": 440,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "group",
        "line": 440,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "SIC",
        "line": 440,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 441,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 441,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "seq",
        "line": 441,
        "column": 10
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 441,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "id",
        "line": 441,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 442,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "SS",
        "line": 442,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 442,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "s",
        "line": 442,
        "column": 15
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 442,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "id",
        "line": 442,
        "column": 22
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 443,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "S",
        "line": 443,
        "column": 5
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 443,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 444,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "i",
        "line": 444,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 444,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "while",
      "line": 445,
      "column": 2
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`i'",
        "line": 445,
        "column": 8
      },
      {
        "id": "<",
        "value": "<",
        "line": 445,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "tt",
        "line": 445,
        "column": 12
      },
      {
        "id": "{",
        "value": "{",
        "line": 445,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 446,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ns",
        "line": 446,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "SS",
        "line": 446,
        "column": 11
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id_new",
        "line": 446,
        "column": 17
      },
      {
        "id": "==",
        "value": "==",
        "line": 446,
        "column": 23
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 446,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 447,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 447,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 447,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "ns",
        "line": 447,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 448,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 448,
        "column": 10
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 448,
        "column": 15
      },
      {
        "id": "+",
        "value": "+",
        "line": 448,
        "column": 17
      },
      {
        "id": "number",
        "value": "1",
        "line": 448,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 449,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "match",
        "line": 449,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 449,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 450,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 450,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 450,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "while",
      "line": 451,
      "column": 3
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`s'",
        "line": 451,
        "column": 9
      },
      {
        "id": "<",
        "value": "<",
        "line": 451,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "NS",
        "line": 451,
        "column": 13
      },
      {
        "id": "{",
        "value": "{",
        "line": 451,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 452,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "n",
        "line": 452,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "id_sic",
        "line": 452,
        "column": 10
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id_new",
        "line": 452,
        "column": 20
      },
      {
        "id": "==",
        "value": "==",
        "line": 452,
        "column": 26
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 452,
        "column": 28
      },
      {
        "id": "&",
        "value": "&",
        "line": 452,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "s",
        "line": 452,
        "column": 34
      },
      {
        "id": "==",
        "value": "==",
        "line": 452,
        "column": 36
      },
      {
        "id": "`'",
        "value": "`s'",
        "line": 452,
        "column": 39
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 453,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "nn",
        "line": 453,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "max",
        "line": 453,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "n",
        "line": 453,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 454,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "match",
        "line": 454,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 454,
        "column": 20
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id_sic",
        "line": 454,
        "column": 25
      },
      {
        "id": "==",
        "value": "==",
        "line": 454,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "nn",
        "line": 454,
        "column": 33
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 455,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "n",
        "line": 455,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "nn",
        "line": 455,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 456,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 456,
        "column": 10
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`s'",
        "line": 456,
        "column": 12
      },
      {
        "id": "+",
        "value": "+",
        "line": 456,
        "column": 15
      },
      {
        "id": "number",
        "value": "1",
        "line": 456,
        "column": 16
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 458,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MM",
        "line": 458,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "MS",
        "line": 458,
        "column": 12
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 458,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 459,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MM",
        "line": 459,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 459,
        "column": 16
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "match",
        "line": 459,
        "column": 21
      },
      {
        "id": "==",
        "value": "==",
        "line": 459,
        "column": 26
      },
      {
        "id": "number",
        "value": "0",
        "line": 459,
        "column": 28
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 460,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MM",
        "line": 460,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "MM",
        "line": 460,
        "column": 16
      },
      {
        "id": "*",
        "value": "*",
        "line": 460,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "rd_corr",
        "line": 460,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 461,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "M",
        "line": 461,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "total",
        "line": 461,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "MM",
        "line": 461,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 462,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "S",
        "line": 462,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "M",
        "line": 462,
        "column": 15
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "id_new",
        "line": 462,
        "column": 20
      },
      {
        "id": "==",
        "value": "==",
        "line": 462,
        "column": 27
      },
      {
        "id": "`'",
        "value": "`i'",
        "line": 462,
        "column": 29
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 463,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "NS",
        "line": 463,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "ns",
        "line": 463,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "match",
        "line": 463,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "MM",
        "line": 463,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "M",
        "line": 463,
        "column": 23
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 464,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "i",
        "line": 464,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`i'",
        "line": 464,
        "column": 11
      },
      {
        "id": "+",
        "value": "+",
        "line": 464,
        "column": 14
      },
      {
        "id": "number",
        "value": "1",
        "line": 464,
        "column": 15
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Here the spillover is calculeted using the aggregated R&D expenditure over all SIC the firm is in, in that year.",
    "line": 467,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "egen",
      "line": 468,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "rd_tot",
        "line": 468,
        "column": 7
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "total",
        "line": 468,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "rd_corr",
        "line": 468,
        "column": 22
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 468,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "id_new",
        "line": 468,
        "column": 35
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 469,
      "column": 2
    },
    "if": [
      {
        "id": "identifier",
        "value": "s",
        "line": 469,
        "column": 10
      },
      {
        "id": "==",
        "value": "==",
        "line": 469,
        "column": 12
      },
      {
        "id": "number",
        "value": "1",
        "line": 469,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 470,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "s",
        "line": 470,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "SS",
        "line": 470,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "rd_corr",
        "line": 470,
        "column": 12
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 471,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "m",
        "line": 471,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 471,
        "column": 12
      },
      {
        "id": "-",
        "value": "-",
        "line": 471,
        "column": 14
      },
      {
        "id": "number",
        "value": "1",
        "line": 471,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mkmat",
      "line": 472,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "MS1",
        "line": 472,
        "column": 8
      },
      {
        "id": "-",
        "value": "-",
        "line": 472,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "MS",
        "line": 472,
        "column": 12
      },
      {
        "id": "`'",
        "value": "`m'",
        "line": 472,
        "column": 14
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "matrix",
        "line": 472,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "MM",
        "line": 472,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mkmat",
      "line": 473,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "rd_tot",
        "line": 473,
        "column": 8
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "matrix",
        "line": 473,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "rd",
        "line": 473,
        "column": 23
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "matrix",
      "line": 474,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Sa",
        "line": 474,
        "column": 9
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "MM",
        "line": 474,
        "column": 12
      },
      {
        "id": "*",
        "value": "*",
        "line": 474,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "rd",
        "line": 474,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "svmat",
      "line": 475,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Sa",
        "line": 475,
        "column": 8
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 476,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Sa1",
        "line": 476,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "Sa",
        "line": 476,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 477,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tt",
        "line": 477,
        "column": 7
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 478,
      "column": 2
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\spillover_pool_`z'.dta\"",
        "line": 478,
        "column": 7
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 478,
        "column": 46
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 483,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "z",
        "line": 483,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "86",
        "line": 483,
        "column": 13
      },
      {
        "id": "/",
        "value": "/",
        "line": 483,
        "column": 15
      },
      {
        "id": "number",
        "value": "99",
        "line": 483,
        "column": 16
      },
      {
        "id": "{",
        "value": "{",
        "line": 483,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 484,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\spillover_pool_`z'.dta\"",
        "line": 484,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 484,
        "column": 44
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 485,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "SIC",
        "line": 485,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "S",
        "line": 485,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "Sa",
        "line": 485,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 485,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "T",
        "line": 485,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 485,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "ticker",
        "line": 485,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "numpatentsy",
        "line": 485,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "claimsy",
        "line": 485,
        "column": 47
      },
      {
        "id": "identifier",
        "value": "avclaims",
        "line": 485,
        "column": 55
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 486,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\spillover_pool_`z'_red.dta\"",
        "line": 486,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 486,
        "column": 49
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 489,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\spillover_pool_86_red.dta\"",
        "line": 489,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 489,
        "column": 47
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 490,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "z",
        "line": 490,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "87",
        "line": 490,
        "column": 13
      },
      {
        "id": "/",
        "value": "/",
        "line": 490,
        "column": 15
      },
      {
        "id": "number",
        "value": "99",
        "line": 490,
        "column": 16
      },
      {
        "id": "{",
        "value": "{",
        "line": 490,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "append",
      "line": 491,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "using",
        "line": 491,
        "column": 8
      },
      {
        "id": "string",
        "value": "\"patent files\\spillover_pool_`z'_red.dta\"",
        "line": 491,
        "column": 14
      }
    ]
  },
  {
    "id": "comment",
    "value": "*gen S=.",
    "line": 494,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*forvalues z=86/87 {",
    "line": 495,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*replace S=S`z' if S`z'~=.",
    "line": 496,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*drop S`z'",
    "line": 497,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*}",
    "line": 498,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "label",
      "line": 500,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "var",
        "line": 500,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "S",
        "line": 500,
        "column": 11
      },
      {
        "id": "string",
        "value": "\"spillover variable with sic specific rd, patents\"",
        "line": 500,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "label",
      "line": 501,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "var",
        "line": 501,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "Sa",
        "line": 501,
        "column": 11
      },
      {
        "id": "string",
        "value": "\"spillover variable with aggregated rd, patents\"",
        "line": 501,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "so",
      "line": 504,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ticker",
        "line": 504,
        "column": 4
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 504,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 505,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patent files\\spillover_pool_panel.dta\"",
        "line": 505,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 505,
        "column": 47
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 507,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ticker",
        "line": 507,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 507,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "SIC",
        "line": 507,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "cusip",
        "line": 507,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "S",
        "line": 507,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "Sa",
        "line": 507,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "numpatentsy",
        "line": 507,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "claimsy",
        "line": 507,
        "column": 45
      },
      {
        "id": "identifier",
        "value": "avclaims",
        "line": 507,
        "column": 53
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "so",
      "line": 508,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 508,
        "column": 4
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 508,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "order",
      "line": 509,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cusip",
        "line": 509,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "ticker",
        "line": 509,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "year",
        "line": 509,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "desc",
      "line": 511,
      "column": 1
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 513,
      "column": 1
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"patentvars.dta\"",
        "line": 513,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 513,
        "column": 24
      }
    ]
  },
  {
    "id": "comment",
    "value": "********************************",
    "line": 517,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* This resulting data set contains various data on patents and the new variable S.",
    "line": 518,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* It may now be merged with the whole compustat database.",
    "line": 519,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*******************************",
    "line": 520,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "log",
      "line": 522,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "close",
        "line": 522,
        "column": 5
      }
    ]
  }
]