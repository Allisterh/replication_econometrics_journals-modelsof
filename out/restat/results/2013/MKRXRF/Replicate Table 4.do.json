[
  {
    "id": "comment",
    "value": "* this do file generates the results in Table 4 from Siminski (2013) 'Employment Effects of Army Service and Veterans Compensation: Evidence from the Australian Vietnam-Era Conscription Lotteries' The Review of Economics and Statistics 95(1): 8797",
    "line": 1,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* note: the results in Column 1 are transferred from Table 3",
    "line": 3,
    "column": 1
  },
  {
    "id": "comment",
    "value": "************************************* Column (3) ***************************************************************",
    "line": 5,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 7,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "second_stage_dis_pension",
        "line": 7,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 7,
        "column": 31
      }
    ]
  },
  {
    "id": "comment",
    "value": "* merge on predicted values from 1st stage",
    "line": 8,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 9,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "m",
        "line": 9,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 9,
        "column": 8
      },
      {
        "id": "number",
        "value": "1",
        "line": 9,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "cohort",
        "line": 9,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "ballot",
        "line": 9,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 9,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "predicted_1st_stage",
        "line": 9,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 10,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 10,
        "column": 6
      }
    ]
  },
  {
    "id": "comment",
    "value": "* generate birth cohort dummies ",
    "line": 11,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "tabulate",
      "line": 12,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cohort",
        "line": 12,
        "column": 10
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "gen",
        "line": 12,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "c",
        "line": 12,
        "column": 22
      }
    ]
  },
  {
    "id": "comment",
    "value": "* overidentified IV 2sls (veteran is only endog regressor)",
    "line": 14,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 15,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "years",
        "line": 15,
        "column": 7
      },
      {
        "id": "string",
        "value": "\"90 93 96 99 02 06 09\"",
        "line": 15,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 16,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "year",
        "line": 16,
        "column": 9
      }
    ],
    "in": [
      {
        "id": "`'",
        "value": "`years'",
        "line": 16,
        "column": 17
      },
      {
        "id": "{",
        "value": "{",
        "line": 16,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "reg",
      "line": 17,
      "column": 10
    },
    "meta": {
      "predictors": 4
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "quietly",
          "line": 17,
          "column": 2
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "dpsr",
        "line": 17,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "pvet",
        "line": 17,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "c2",
        "line": 17,
        "column": 24
      },
      {
        "id": "-",
        "value": "-",
        "line": 17,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "c16",
        "line": 17,
        "column": 27
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "fwt",
        "line": 17,
        "column": 35
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 17,
        "column": 38
      },
      {
        "id": "]",
        "value": "]",
        "line": 17,
        "column": 44
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "fw",
        "line": 17,
        "column": 32
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "robust",
        "line": 17,
        "column": 47
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "store",
      "line": 18,
      "column": 6
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "est",
          "line": 18,
          "column": 2
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "dis",
        "line": 18,
        "column": 12
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 18,
        "column": 15
      }
    ]
  },
  {
    "id": "comment",
    "value": "************************************* Column (2) ***************************************************************",
    "line": 21,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* the estimates underlying Column 2 are more complicated - because men who migrated after the age of 20 cannot be excluded from the tax-return 2nd stage database.",
    "line": 22,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* As outlined in the manuscript, this necessitates adjustments to the 1st stage database - to include approximate counts of additional men who migrated to Australia after the ballots.",
    "line": 23,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* The procedure is to identify the proportion of the population that migrated after the age of 20 by 2006 (using the Census) - within each birth cohort/ballot outcome combination",
    "line": 24,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* For analysis of outcomes at 2006, the first stage database is adjusted proportionally - i.e. the number of men is increased accordingly in each ballot-outcome/birth cohort - and they are assumed to have not served in the Australian army in this era",
    "line": 25,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* For analysis of outcomes at other years (1993, 1996, 1999, 2002, 2009) the number of 'recent migrants' was linearly interpolated (extrapolated for 2009). i.e. those migrants were assumed to arrive at a constant",
    "line": 26,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* rate between the year of each ballot and 2009.",
    "line": 27,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Further, the first stage excludes men born on the 1st Jan, 1st July and 10th October of any year - as outlined in the manuscript.",
    "line": 29,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 30,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "first_stage_w_DOB_exclusions",
        "line": 30,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 30,
        "column": 35
      }
    ]
  },
  {
    "id": "comment",
    "value": "* calculations of approx number of migrants to include in first stage database",
    "line": 32,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* collapse into a count of men by ballot outcome and birth cohort",
    "line": 33,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "collapse",
      "line": 34,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "sum",
        "line": 34,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "fweight",
        "line": 34,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 34,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "cohort",
        "line": 34,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "ballot",
        "line": 34,
        "column": 35
      }
    ]
  },
  {
    "id": "comment",
    "value": "* now include data (calculated from restricted access Census data) on proportion of men in each birth cohort/ballot outcome who were born in Aus or arrived before the age of 20 - at 2006",
    "line": 36,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 37,
      "column": 1
    },
    "varlist": [
      {
        "id": "number",
        "value": "1",
        "line": 37,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 37,
        "column": 8
      },
      {
        "id": "number",
        "value": "1",
        "line": 37,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "cohort",
        "line": 37,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "ballot",
        "line": 37,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 37,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "not_recent_migrant",
        "line": 37,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 38,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 38,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 38,
        "column": 16
      },
      {
        "id": "number",
        "value": "3",
        "line": 38,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 39,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 39,
        "column": 6
      }
    ]
  },
  {
    "id": "comment",
    "value": "*calculate number of additional migrants (up to 2006) to add into the data for each cohort and ballot outcome",
    "line": 40,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 41,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "double",
        "line": 41,
        "column": 3
      },
      {
        "id": "identifier",
        "value": "migrants2006",
        "line": 41,
        "column": 10
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "fweight",
        "line": 41,
        "column": 25
      },
      {
        "id": "/",
        "value": "/",
        "line": 41,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "not_recent_migrant",
        "line": 41,
        "column": 33
      },
      {
        "id": "-",
        "value": "-",
        "line": 41,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "fweight",
        "line": 41,
        "column": 54
      }
    ]
  },
  {
    "id": "comment",
    "value": "* now interpolate for the other years",
    "line": 42,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 43,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "ballotyear",
        "line": 43,
        "column": 3
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "floor",
        "line": 43,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "cohort",
        "line": 43,
        "column": 22
      },
      {
        "id": "+",
        "value": "+",
        "line": 43,
        "column": 29
      },
      {
        "id": "number",
        "value": "20",
        "line": 43,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 44,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "yrs",
        "line": 44,
        "column": 7
      },
      {
        "id": "string",
        "value": "\"1993 1996 1999 2002 2009\"",
        "line": 44,
        "column": 11
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 45,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "year",
        "line": 45,
        "column": 9
      }
    ],
    "in": [
      {
        "id": "`'",
        "value": "`yrs'",
        "line": 45,
        "column": 17
      },
      {
        "id": "{",
        "value": "{",
        "line": 45,
        "column": 22
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 46,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "double",
        "line": 46,
        "column": 4
      },
      {
        "id": "identifier",
        "value": "migrants",
        "line": 46,
        "column": 11
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 46,
        "column": 19
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`year'",
        "line": 46,
        "column": 29
      },
      {
        "id": "-",
        "value": "-",
        "line": 46,
        "column": 36
      },
      {
        "id": "identifier",
        "value": "ballotyear",
        "line": 46,
        "column": 38
      },
      {
        "id": "/",
        "value": "/",
        "line": 46,
        "column": 49
      },
      {
        "id": "number",
        "value": "2006",
        "line": 46,
        "column": 51
      },
      {
        "id": "-",
        "value": "-",
        "line": 46,
        "column": 56
      },
      {
        "id": "identifier",
        "value": "ballotyear",
        "line": 46,
        "column": 58
      },
      {
        "id": "*",
        "value": "*",
        "line": 46,
        "column": 70
      },
      {
        "id": "identifier",
        "value": "migrants2006",
        "line": 46,
        "column": 72
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "tempfile",
      "line": 48,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "migrants",
        "line": 48,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 49,
      "column": 1
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`migrants'",
        "line": 49,
        "column": 6
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 51,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "first_stage_w_DOB_exclusions",
        "line": 51,
        "column": 5
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "tab",
      "line": 52,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "cohort",
        "line": 52,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "gen",
        "line": 52,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "c",
        "line": 52,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 53,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "m",
        "line": 53,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 53,
        "column": 8
      },
      {
        "id": "number",
        "value": "1",
        "line": 53,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "cohort",
        "line": 53,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "ballot",
        "line": 53,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 53,
        "column": 25
      },
      {
        "id": "`'",
        "value": "`migrants'",
        "line": 53,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 54,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 54,
        "column": 6
      }
    ]
  },
  {
    "id": "comment",
    "value": "* now add estimated numbers of migrants into the counts of men with no army service",
    "line": 56,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 57,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "years",
        "line": 57,
        "column": 7
      },
      {
        "id": "string",
        "value": "\"1993 1996 1999 2002 2006 2009\"",
        "line": 57,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 58,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "year",
        "line": 58,
        "column": 9
      }
    ],
    "in": [
      {
        "id": "`'",
        "value": "`years'",
        "line": 58,
        "column": 17
      },
      {
        "id": "{",
        "value": "{",
        "line": 58,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "gen",
      "line": 59,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "double",
        "line": 59,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "fwt",
        "line": 59,
        "column": 13
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 59,
        "column": 16
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "fweight",
        "line": 59,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 60,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "fwt",
        "line": 60,
        "column": 10
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 60,
        "column": 13
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "fweight",
        "line": 60,
        "column": 22
      },
      {
        "id": "+",
        "value": "+",
        "line": 60,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "migrants",
        "line": 60,
        "column": 32
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 60,
        "column": 40
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "armserv",
        "line": 60,
        "column": 50
      },
      {
        "id": "==",
        "value": "==",
        "line": 60,
        "column": 58
      },
      {
        "id": "number",
        "value": "0",
        "line": 60,
        "column": 61
      }
    ]
  },
  {
    "id": "comment",
    "value": "* round all fwts to integers",
    "line": 61,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 62,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "fwt",
        "line": 62,
        "column": 10
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 62,
        "column": 13
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "round",
        "line": 62,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "fwt",
        "line": 62,
        "column": 28
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 62,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 64,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "year",
        "line": 64,
        "column": 9
      }
    ],
    "in": [
      {
        "id": "number",
        "value": "93",
        "line": 64,
        "column": 17
      },
      {
        "id": "number",
        "value": "96",
        "line": 64,
        "column": 20
      },
      {
        "id": "number",
        "value": "99",
        "line": 64,
        "column": 23
      },
      {
        "id": "{",
        "value": "{",
        "line": 64,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 65,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "fwt19",
        "line": 65,
        "column": 9
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 65,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "fwt",
        "line": 65,
        "column": 21
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 65,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 67,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "year",
        "line": 67,
        "column": 9
      }
    ],
    "in": [
      {
        "id": "number",
        "value": "02",
        "line": 67,
        "column": 17
      },
      {
        "id": "number",
        "value": "06",
        "line": 67,
        "column": 20
      },
      {
        "id": "number",
        "value": "09",
        "line": 67,
        "column": 23
      },
      {
        "id": "{",
        "value": "{",
        "line": 67,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 68,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "fwt20",
        "line": 68,
        "column": 9
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 68,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "fwt",
        "line": 68,
        "column": 21
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 68,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 70,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "c",
        "line": 70,
        "column": 6
      },
      {
        "id": "*",
        "value": "*",
        "line": 70,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "ballot",
        "line": 70,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "armserv",
        "line": 70,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "vietnam",
        "line": 70,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "fwt",
        "line": 70,
        "column": 32
      },
      {
        "id": "*",
        "value": "*",
        "line": 70,
        "column": 35
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 72,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "first_stage_w_migrants",
        "line": 72,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 72,
        "column": 30
      }
    ]
  },
  {
    "id": "comment",
    "value": "* create birth-cohort specific ballot-outcome IVs",
    "line": 74,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 75,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "bcohort",
        "line": 75,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 75,
        "column": 21
      },
      {
        "id": "/",
        "value": "/",
        "line": 75,
        "column": 22
      },
      {
        "id": "number",
        "value": "16",
        "line": 75,
        "column": 23
      },
      {
        "id": "{",
        "value": "{",
        "line": 75,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "g",
      "line": 76,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "z",
        "line": 76,
        "column": 3
      },
      {
        "id": "`'",
        "value": "`bcohort'",
        "line": 76,
        "column": 4
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "ballot",
        "line": 76,
        "column": 16
      },
      {
        "id": "*",
        "value": "*",
        "line": 76,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "c",
        "line": 76,
        "column": 23
      },
      {
        "id": "`'",
        "value": "`bcohort'",
        "line": 76,
        "column": 24
      }
    ]
  },
  {
    "id": "comment",
    "value": "* now run all the relevant first stage regressions and keep the predicted values",
    "line": 79,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 80,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "years",
        "line": 80,
        "column": 7
      },
      {
        "id": "string",
        "value": "\"93 96 99 02 06 09\"",
        "line": 80,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 81,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "year",
        "line": 81,
        "column": 9
      }
    ],
    "in": [
      {
        "id": "`'",
        "value": "`years'",
        "line": 81,
        "column": 17
      },
      {
        "id": "{",
        "value": "{",
        "line": 81,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "reg",
      "line": 82,
      "column": 2
    },
    "meta": {
      "predictors": 6
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "vietnam",
        "line": 82,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "z1",
        "line": 82,
        "column": 14
      },
      {
        "id": "-",
        "value": "-",
        "line": 82,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "z16",
        "line": 82,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "c2",
        "line": 82,
        "column": 21
      },
      {
        "id": "-",
        "value": "-",
        "line": 82,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "c16",
        "line": 82,
        "column": 24
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "fwt",
        "line": 82,
        "column": 32
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 82,
        "column": 35
      },
      {
        "id": "]",
        "value": "]",
        "line": 82,
        "column": 41
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "fw",
        "line": 82,
        "column": 29
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "robust",
        "line": 82,
        "column": 44
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "predict",
      "line": 83,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "double",
        "line": 83,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "vhat",
        "line": 83,
        "column": 17
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 83,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "reg",
      "line": 84,
      "column": 2
    },
    "meta": {
      "predictors": 6
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "armserv",
        "line": 84,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "z1",
        "line": 84,
        "column": 14
      },
      {
        "id": "-",
        "value": "-",
        "line": 84,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "z16",
        "line": 84,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "c2",
        "line": 84,
        "column": 21
      },
      {
        "id": "-",
        "value": "-",
        "line": 84,
        "column": 23
      },
      {
        "id": "identifier",
        "value": "c16",
        "line": 84,
        "column": 24
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "fwt",
        "line": 84,
        "column": 32
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 84,
        "column": 35
      },
      {
        "id": "]",
        "value": "]",
        "line": 84,
        "column": 41
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "fw",
        "line": 84,
        "column": 29
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "robust",
        "line": 84,
        "column": 44
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "predict",
      "line": 85,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "double",
        "line": 85,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "rhat",
        "line": 85,
        "column": 17
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 85,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "collapse",
      "line": 88,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mean",
        "line": 88,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "vhat93",
        "line": 88,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "vhat96",
        "line": 88,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "vhat99",
        "line": 88,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "vhat02",
        "line": 88,
        "column": 38
      },
      {
        "id": "identifier",
        "value": "vhat06",
        "line": 88,
        "column": 45
      },
      {
        "id": "identifier",
        "value": "vhat09",
        "line": 88,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "rhat93",
        "line": 88,
        "column": 59
      },
      {
        "id": "identifier",
        "value": "rhat96",
        "line": 88,
        "column": 66
      },
      {
        "id": "identifier",
        "value": "rhat99",
        "line": 88,
        "column": 73
      },
      {
        "id": "identifier",
        "value": "rhat02",
        "line": 88,
        "column": 80
      },
      {
        "id": "identifier",
        "value": "rhat06",
        "line": 88,
        "column": 87
      },
      {
        "id": "identifier",
        "value": "rhat09",
        "line": 88,
        "column": 94
      },
      {
        "id": "identifier",
        "value": "c2",
        "line": 88,
        "column": 101
      },
      {
        "id": "-",
        "value": "-",
        "line": 88,
        "column": 103
      },
      {
        "id": "identifier",
        "value": "c16",
        "line": 88,
        "column": 104
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "by",
        "line": 88,
        "column": 109
      },
      {
        "id": "identifier",
        "value": "cohort",
        "line": 88,
        "column": 112
      },
      {
        "id": "identifier",
        "value": "ballot",
        "line": 88,
        "column": 119
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 89,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "predicted_1st_stage_w_migrants",
        "line": 89,
        "column": 6
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 89,
        "column": 38
      }
    ]
  },
  {
    "id": "comment",
    "value": "* open second stage database",
    "line": 91,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 92,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "second_stage_tax_returns.dta",
        "line": 92,
        "column": 5
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 92,
        "column": 35
      }
    ]
  },
  {
    "id": "comment",
    "value": "*merge on predicted values",
    "line": 93,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 94,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "m",
        "line": 94,
        "column": 7
      },
      {
        "id": ":",
        "value": ":",
        "line": 94,
        "column": 8
      },
      {
        "id": "number",
        "value": "1",
        "line": 94,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "cohort",
        "line": 94,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "ballot",
        "line": 94,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 94,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "predicted_1st_stage_w_migrants",
        "line": 94,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 95,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "_merge",
        "line": 95,
        "column": 9
      },
      {
        "id": "==",
        "value": "==",
        "line": 95,
        "column": 16
      },
      {
        "id": "number",
        "value": "3",
        "line": 95,
        "column": 19
      }
    ]
  },
  {
    "id": "comment",
    "value": "* drop last 5 cohorts",
    "line": 96,
    "column": 1
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 97,
      "column": 1
    },
    "if": [
      {
        "id": "identifier",
        "value": "cohort",
        "line": 97,
        "column": 9
      },
      {
        "id": ">",
        "value": ">",
        "line": 97,
        "column": 16
      },
      {
        "id": "number",
        "value": "1950.15",
        "line": 97,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 98,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "year",
        "line": 98,
        "column": 9
      }
    ],
    "in": [
      {
        "id": "`'",
        "value": "`years'",
        "line": 98,
        "column": 17
      },
      {
        "id": "{",
        "value": "{",
        "line": 98,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "reg",
      "line": 99,
      "column": 10
    },
    "meta": {
      "predictors": 5
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "quietly",
          "line": 99,
          "column": 2
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "employed",
        "line": 99,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "vhat",
        "line": 99,
        "column": 23
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 99,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "c2",
        "line": 99,
        "column": 34
      },
      {
        "id": "-",
        "value": "-",
        "line": 99,
        "column": 36
      },
      {
        "id": "identifier",
        "value": "c11",
        "line": 99,
        "column": 37
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "wt",
        "line": 99,
        "column": 45
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 99,
        "column": 47
      },
      {
        "id": "]",
        "value": "]",
        "line": 99,
        "column": 53
      }
    ],
    "weight": [
      {
        "id": "identifier",
        "value": "fw",
        "line": 99,
        "column": 42
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "robust",
        "line": 99,
        "column": 56
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "store",
      "line": 100,
      "column": 6
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "est",
          "line": 100,
          "column": 2
        }
      }
    ],
    "varlist": [
      {
        "id": "identifier",
        "value": "emp",
        "line": 100,
        "column": 12
      },
      {
        "id": "`'",
        "value": "`year'",
        "line": 100,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "esttab",
      "line": 102,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "emp",
        "line": 102,
        "column": 8
      },
      {
        "id": "*",
        "value": "*",
        "line": 102,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 102,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "Table4.rtf",
        "line": 102,
        "column": 19
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "b",
        "line": 102,
        "column": 31
      },
      {
        "id": "%",
        "value": "%",
        "line": 102,
        "column": 33
      },
      {
        "id": "number",
        "value": "8.3f",
        "line": 102,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "se",
        "line": 102,
        "column": 40
      },
      {
        "id": "%",
        "value": "%",
        "line": 102,
        "column": 43
      },
      {
        "id": "number",
        "value": "8.3f",
        "line": 102,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "parentheses",
        "line": 102,
        "column": 50
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 102,
        "column": 63
      },
      {
        "id": "identifier",
        "value": "N",
        "line": 102,
        "column": 70
      },
      {
        "id": "identifier",
        "value": "mtitles",
        "line": 102,
        "column": 73
      },
      {
        "id": "identifier",
        "value": "compress",
        "line": 102,
        "column": 81
      },
      {
        "id": "identifier",
        "value": "replace",
        "line": 102,
        "column": 90
      },
      {
        "id": "identifier",
        "value": "keep",
        "line": 102,
        "column": 98
      },
      {
        "id": "identifier",
        "value": "vhat93",
        "line": 102,
        "column": 103
      },
      {
        "id": "identifier",
        "value": "vhat96",
        "line": 102,
        "column": 110
      },
      {
        "id": "identifier",
        "value": "vhat99",
        "line": 102,
        "column": 117
      },
      {
        "id": "identifier",
        "value": "vhat02",
        "line": 102,
        "column": 124
      },
      {
        "id": "identifier",
        "value": "vhat06",
        "line": 102,
        "column": 131
      },
      {
        "id": "identifier",
        "value": "vhat09",
        "line": 102,
        "column": 138
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "esttab",
      "line": 103,
      "column": 1
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "dis",
        "line": 103,
        "column": 8
      },
      {
        "id": "*",
        "value": "*",
        "line": 103,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 103,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "Table4.rtf",
        "line": 103,
        "column": 19
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "b",
        "line": 103,
        "column": 31
      },
      {
        "id": "%",
        "value": "%",
        "line": 103,
        "column": 33
      },
      {
        "id": "number",
        "value": "8.3f",
        "line": 103,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "se",
        "line": 103,
        "column": 40
      },
      {
        "id": "%",
        "value": "%",
        "line": 103,
        "column": 43
      },
      {
        "id": "number",
        "value": "8.3f",
        "line": 103,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "parentheses",
        "line": 103,
        "column": 50
      },
      {
        "id": "identifier",
        "value": "scalar",
        "line": 103,
        "column": 63
      },
      {
        "id": "identifier",
        "value": "N",
        "line": 103,
        "column": 70
      },
      {
        "id": "identifier",
        "value": "mtitles",
        "line": 103,
        "column": 73
      },
      {
        "id": "identifier",
        "value": "compress",
        "line": 103,
        "column": 81
      },
      {
        "id": "identifier",
        "value": "append",
        "line": 103,
        "column": 90
      },
      {
        "id": "identifier",
        "value": "keep",
        "line": 103,
        "column": 97
      },
      {
        "id": "identifier",
        "value": "pvet",
        "line": 103,
        "column": 102
      }
    ]
  }
]