[
  {
    "id": "comment",
    "value": "**********************************************\t\t",
    "line": 1,
    "column": 1
  },
  {
    "id": "comment",
    "value": "**********************************************",
    "line": 2,
    "column": 1
  },
  {
    "id": "comment",
    "value": "*  OFF SERVER DATA",
    "line": 3,
    "column": 1
  },
  {
    "id": "comment",
    "value": "**********************************************",
    "line": 4,
    "column": 1
  },
  {
    "id": "comment",
    "value": "**********************************************",
    "line": 5,
    "column": 1
  },
  {
    "id": "comment",
    "value": "* Get experimental data",
    "line": 7,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 8,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "DATA",
        "line": 8,
        "column": 6
      },
      {
        "id": "\\",
        "value": "\\",
        "line": 8,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "ExperimentalData",
        "line": 8,
        "column": 11
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 8,
        "column": 29
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Cleanup and reshape lottery data for ease of rank dependent estimation",
    "line": 10,
    "column": 2
  },
  {
    "command": {
      "id": "{",
      "value": "{",
      "line": 11,
      "column": 6
    },
    "pre": [
      {
        "command": {
          "id": "identifier",
          "value": "qui",
          "line": 11,
          "column": 2
        }
      }
    ]
  },
  {
    "id": "comment",
    "value": "* adjust some WEW lotteries that are not rank ordered",
    "line": 12,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 13,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 13,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "number",
        "value": "1",
        "line": 13,
        "column": 16
      },
      {
        "id": "number",
        "value": "2",
        "line": 13,
        "column": 18
      },
      {
        "id": "number",
        "value": "3",
        "line": 13,
        "column": 20
      },
      {
        "id": "number",
        "value": "4",
        "line": 13,
        "column": 22
      },
      {
        "id": "{",
        "value": "{",
        "line": 13,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 14,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "p",
        "line": 14,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "A",
        "line": 14,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "B",
        "line": 14,
        "column": 18
      },
      {
        "id": "{",
        "value": "{",
        "line": 14,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 15,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "prize",
        "line": 15,
        "column": 11
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 15,
        "column": 16
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 15,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "VPRIZE",
        "line": 15,
        "column": 23
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 15,
        "column": 29
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 15,
        "column": 32
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "generate",
      "line": 16,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 16,
        "column": 13
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 16,
        "column": 17
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 16,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "_",
        "line": 16,
        "column": 23
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 16,
        "column": 27
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 16,
        "column": 31
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 16,
        "column": 34
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "generate",
      "line": 17,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZE",
        "line": 17,
        "column": 13
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 17,
        "column": 19
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 17,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "_",
        "line": 17,
        "column": 25
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZE",
        "line": 17,
        "column": 29
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 17,
        "column": 35
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 17,
        "column": 38
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 21,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 21,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "rWEW3",
        "line": 21,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "rWEW7",
        "line": 21,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "rWEW10",
        "line": 21,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "rWEW11",
        "line": 21,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "rWEW14",
        "line": 21,
        "column": 42
      },
      {
        "id": "identifier",
        "value": "rWEW15",
        "line": 21,
        "column": 49
      },
      {
        "id": "{",
        "value": "{",
        "line": 21,
        "column": 56
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 22,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probA1",
        "line": 22,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probA2_",
        "line": 22,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 22,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 22,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 22,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 23,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEA1",
        "line": 23,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEA2_",
        "line": 23,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 23,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 23,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 23,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 24,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probA2",
        "line": 24,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probA1_",
        "line": 24,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 24,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 24,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 24,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 25,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEA2",
        "line": 25,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEA1_",
        "line": 25,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 25,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 25,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 25,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 27,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 27,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "rWEW4",
        "line": 27,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "rWEW8",
        "line": 27,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "rWEW7",
        "line": 27,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "rWEW8",
        "line": 27,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "rWEW12",
        "line": 27,
        "column": 40
      },
      {
        "id": "identifier",
        "value": "rWEW16",
        "line": 27,
        "column": 47
      },
      {
        "id": "identifier",
        "value": "rWEW19",
        "line": 27,
        "column": 54
      },
      {
        "id": "identifier",
        "value": "rWEW20",
        "line": 27,
        "column": 61
      },
      {
        "id": "identifier",
        "value": "rWEW23",
        "line": 27,
        "column": 68
      },
      {
        "id": "identifier",
        "value": "rWEW24",
        "line": 27,
        "column": 75
      },
      {
        "id": "{",
        "value": "{",
        "line": 27,
        "column": 82
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 28,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probA1",
        "line": 28,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probA2_",
        "line": 28,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 28,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 28,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 28,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 29,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEA1",
        "line": 29,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEA2_",
        "line": 29,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 29,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 29,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 29,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 30,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probA2",
        "line": 30,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probA3_",
        "line": 30,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 30,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 30,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 30,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 31,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEA2",
        "line": 31,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEA3_",
        "line": 31,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 31,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 31,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 31,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 32,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probA3",
        "line": 32,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probA1_",
        "line": 32,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 32,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 32,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 32,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 33,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEA3",
        "line": 33,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEA1_",
        "line": 33,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 33,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 33,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 33,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 35,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 35,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "rWEW3",
        "line": 35,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "rWEW7",
        "line": 35,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "rWEW10",
        "line": 35,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "rWEW11",
        "line": 35,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "rWEW14",
        "line": 35,
        "column": 42
      },
      {
        "id": "identifier",
        "value": "rWEW15",
        "line": 35,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "rWEW18",
        "line": 35,
        "column": 56
      },
      {
        "id": "identifier",
        "value": "rWEW22",
        "line": 35,
        "column": 63
      },
      {
        "id": "{",
        "value": "{",
        "line": 35,
        "column": 70
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 36,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probB1",
        "line": 36,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probB2_",
        "line": 36,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 36,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 36,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 36,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 37,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEB1",
        "line": 37,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEB2_",
        "line": 37,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 37,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 37,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 37,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 38,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probB2",
        "line": 38,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probB1_",
        "line": 38,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 38,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 38,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 38,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 39,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEB2",
        "line": 39,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEB1_",
        "line": 39,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 39,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 39,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 39,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 41,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 41,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "rWEW4",
        "line": 41,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "rWEW8",
        "line": 41,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "rWEW12",
        "line": 41,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "rWEW16",
        "line": 41,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "rWEW19",
        "line": 41,
        "column": 42
      },
      {
        "id": "identifier",
        "value": "rWEW20",
        "line": 41,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "rWEW23",
        "line": 41,
        "column": 56
      },
      {
        "id": "identifier",
        "value": "rWEW24",
        "line": 41,
        "column": 63
      },
      {
        "id": "{",
        "value": "{",
        "line": 41,
        "column": 70
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 42,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probB1",
        "line": 42,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probB2_",
        "line": 42,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 42,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 42,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 42,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 43,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEB1",
        "line": 43,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEB2_",
        "line": 43,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 43,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 43,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 43,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 44,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probB2",
        "line": 44,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probB3_",
        "line": 44,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 44,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 44,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 44,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 45,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEB2",
        "line": 45,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEB3_",
        "line": 45,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 45,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 45,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 45,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 46,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "probB3",
        "line": 46,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "probB1_",
        "line": 46,
        "column": 21
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 46,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 46,
        "column": 35
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 46,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 47,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZEB3",
        "line": 47,
        "column": 12
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZEB1_",
        "line": 47,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 47,
        "column": 36
      },
      {
        "id": "==",
        "value": "==",
        "line": 47,
        "column": 39
      },
      {
        "id": "string",
        "value": "\"`q'\"",
        "line": 47,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 50,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 50,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "number",
        "value": "1",
        "line": 50,
        "column": 16
      },
      {
        "id": "number",
        "value": "2",
        "line": 50,
        "column": 18
      },
      {
        "id": "number",
        "value": "3",
        "line": 50,
        "column": 20
      },
      {
        "id": "number",
        "value": "4",
        "line": 50,
        "column": 22
      },
      {
        "id": "{",
        "value": "{",
        "line": 50,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 51,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "p",
        "line": 51,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "A",
        "line": 51,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "B",
        "line": 51,
        "column": 18
      },
      {
        "id": "{",
        "value": "{",
        "line": 51,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 52,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 52,
        "column": 9
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 52,
        "column": 13
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 52,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "_",
        "line": 52,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 53,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZE",
        "line": 53,
        "column": 9
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 53,
        "column": 15
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 53,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "_",
        "line": 53,
        "column": 21
      }
    ]
  },
  {
    "id": "comment",
    "value": "* shift over one ... also including the r lotteries",
    "line": 57,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 58,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "x",
        "line": 58,
        "column": 13
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 58,
        "column": 15
      },
      {
        "id": "/",
        "value": "/",
        "line": 58,
        "column": 16
      },
      {
        "id": "number",
        "value": "61",
        "line": 58,
        "column": 17
      },
      {
        "id": "{",
        "value": "{",
        "line": 58,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 59,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "y",
        "line": 59,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "A",
        "line": 59,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "B",
        "line": 59,
        "column": 18
      },
      {
        "id": "{",
        "value": "{",
        "line": 59,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 60,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "z",
        "line": 60,
        "column": 14
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "3",
        "line": 60,
        "column": 16
      },
      {
        "id": "-",
        "value": "-",
        "line": 60,
        "column": 18
      },
      {
        "id": "number",
        "value": "1",
        "line": 60,
        "column": 19
      },
      {
        "id": "number",
        "value": "1",
        "line": 60,
        "column": 21
      },
      {
        "id": "{",
        "value": "{",
        "line": 60,
        "column": 23
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 61,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "zz",
        "line": 61,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`z'",
        "line": 61,
        "column": 14
      },
      {
        "id": "+",
        "value": "+",
        "line": 61,
        "column": 17
      },
      {
        "id": "number",
        "value": "1",
        "line": 61,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 62,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 62,
        "column": 13
      },
      {
        "id": "`'",
        "value": "`y'",
        "line": 62,
        "column": 17
      },
      {
        "id": "`'",
        "value": "`zz'",
        "line": 62,
        "column": 20
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 62,
        "column": 27
      },
      {
        "id": "`'",
        "value": "`y'",
        "line": 62,
        "column": 31
      },
      {
        "id": "`'",
        "value": "`z'",
        "line": 62,
        "column": 34
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 62,
        "column": 41
      },
      {
        "id": "==",
        "value": "==",
        "line": 62,
        "column": 44
      },
      {
        "id": "string",
        "value": "\"ls`x'\"",
        "line": 62,
        "column": 46
      },
      {
        "id": "|",
        "value": "|",
        "line": 62,
        "column": 54
      },
      {
        "id": "identifier",
        "value": "qid",
        "line": 62,
        "column": 56
      },
      {
        "id": "==",
        "value": "==",
        "line": 62,
        "column": 59
      },
      {
        "id": "string",
        "value": "\"rWEW`x'\"",
        "line": 62,
        "column": 61
      },
      {
        "id": "|",
        "value": "|",
        "line": 62,
        "column": 72
      },
      {
        "id": "identifier",
        "value": "qid",
        "line": 62,
        "column": 74
      },
      {
        "id": "==",
        "value": "==",
        "line": 62,
        "column": 77
      },
      {
        "id": "string",
        "value": "\"r`x'\"",
        "line": 62,
        "column": 79
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 63,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZE",
        "line": 63,
        "column": 13
      },
      {
        "id": "`'",
        "value": "`y'",
        "line": 63,
        "column": 19
      },
      {
        "id": "`'",
        "value": "`zz'",
        "line": 63,
        "column": 22
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "VPRIZE",
        "line": 63,
        "column": 29
      },
      {
        "id": "`'",
        "value": "`y'",
        "line": 63,
        "column": 35
      },
      {
        "id": "`'",
        "value": "`z'",
        "line": 63,
        "column": 38
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 63,
        "column": 45
      },
      {
        "id": "==",
        "value": "==",
        "line": 63,
        "column": 48
      },
      {
        "id": "string",
        "value": "\"ls`x'\"",
        "line": 63,
        "column": 50
      },
      {
        "id": "|",
        "value": "|",
        "line": 63,
        "column": 59
      },
      {
        "id": "identifier",
        "value": "qid",
        "line": 63,
        "column": 61
      },
      {
        "id": "==",
        "value": "==",
        "line": 63,
        "column": 64
      },
      {
        "id": "string",
        "value": "\"rWEW`x'\"",
        "line": 63,
        "column": 66
      },
      {
        "id": "|",
        "value": "|",
        "line": 63,
        "column": 77
      },
      {
        "id": "identifier",
        "value": "qid",
        "line": 63,
        "column": 79
      },
      {
        "id": "==",
        "value": "==",
        "line": 63,
        "column": 82
      },
      {
        "id": "string",
        "value": "\"r`x'\"",
        "line": 63,
        "column": 84
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 65,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 65,
        "column": 12
      },
      {
        "id": "`'",
        "value": "`y'",
        "line": 65,
        "column": 16
      },
      {
        "id": "number",
        "value": "1",
        "line": 65,
        "column": 19
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 65,
        "column": 23
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 65,
        "column": 28
      },
      {
        "id": "==",
        "value": "==",
        "line": 65,
        "column": 31
      },
      {
        "id": "string",
        "value": "\"ls`x'\"",
        "line": 65,
        "column": 33
      },
      {
        "id": "|",
        "value": "|",
        "line": 65,
        "column": 42
      },
      {
        "id": "identifier",
        "value": "qid",
        "line": 65,
        "column": 44
      },
      {
        "id": "==",
        "value": "==",
        "line": 65,
        "column": 47
      },
      {
        "id": "string",
        "value": "\"rWEW`x'\"",
        "line": 65,
        "column": 49
      },
      {
        "id": "|",
        "value": "|",
        "line": 65,
        "column": 59
      },
      {
        "id": "identifier",
        "value": "qid",
        "line": 65,
        "column": 61
      },
      {
        "id": "==",
        "value": "==",
        "line": 65,
        "column": 64
      },
      {
        "id": "string",
        "value": "\"r`x'\"",
        "line": 65,
        "column": 66
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 66,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "VPRIZE",
        "line": 66,
        "column": 12
      },
      {
        "id": "`'",
        "value": "`y'",
        "line": 66,
        "column": 18
      },
      {
        "id": "number",
        "value": "1",
        "line": 66,
        "column": 21
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 66,
        "column": 25
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "qid",
        "line": 66,
        "column": 30
      },
      {
        "id": "==",
        "value": "==",
        "line": 66,
        "column": 33
      },
      {
        "id": "string",
        "value": "\"ls`x'\"",
        "line": 66,
        "column": 35
      },
      {
        "id": "|",
        "value": "|",
        "line": 66,
        "column": 44
      },
      {
        "id": "identifier",
        "value": "qid",
        "line": 66,
        "column": 46
      },
      {
        "id": "==",
        "value": "==",
        "line": 66,
        "column": 49
      },
      {
        "id": "string",
        "value": "\"rWEW`x'\"",
        "line": 66,
        "column": 51
      },
      {
        "id": "|",
        "value": "|",
        "line": 66,
        "column": 61
      },
      {
        "id": "identifier",
        "value": "qid",
        "line": 66,
        "column": 63
      },
      {
        "id": "==",
        "value": "==",
        "line": 66,
        "column": 66
      },
      {
        "id": "string",
        "value": "\"r`x'\"",
        "line": 66,
        "column": 68
      }
    ]
  },
  {
    "id": "comment",
    "value": "* now get the roundings of probabilities right for stata ",
    "line": 71,
    "column": 3
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 72,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 72,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "number",
        "value": "1",
        "line": 72,
        "column": 16
      },
      {
        "id": "number",
        "value": "2",
        "line": 72,
        "column": 18
      },
      {
        "id": "number",
        "value": "3",
        "line": 72,
        "column": 20
      },
      {
        "id": "number",
        "value": "4",
        "line": 72,
        "column": 22
      },
      {
        "id": "{",
        "value": "{",
        "line": 72,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 73,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "p",
        "line": 73,
        "column": 12
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "A",
        "line": 73,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "B",
        "line": 73,
        "column": 19
      },
      {
        "id": "{",
        "value": "{",
        "line": 73,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "generate",
      "line": 74,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 74,
        "column": 14
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 74,
        "column": 18
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 74,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "_",
        "line": 74,
        "column": 24
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": ".",
        "line": 74,
        "column": 28
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "forvalues",
      "line": 78,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "z",
        "line": 78,
        "column": 13
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 78,
        "column": 17
      },
      {
        "id": "number",
        "value": "1",
        "line": 78,
        "column": 19
      },
      {
        "id": "number",
        "value": "100",
        "line": 78,
        "column": 21
      },
      {
        "id": "{",
        "value": "{",
        "line": 78,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 79,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 79,
        "column": 12
      }
    ],
    "in": [
      {
        "id": "number",
        "value": "1",
        "line": 79,
        "column": 17
      },
      {
        "id": "number",
        "value": "2",
        "line": 79,
        "column": 19
      },
      {
        "id": "number",
        "value": "3",
        "line": 79,
        "column": 21
      },
      {
        "id": "number",
        "value": "4",
        "line": 79,
        "column": 23
      },
      {
        "id": "{",
        "value": "{",
        "line": 79,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 80,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "p",
        "line": 80,
        "column": 13
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "A",
        "line": 80,
        "column": 18
      },
      {
        "id": "identifier",
        "value": "B",
        "line": 80,
        "column": 20
      },
      {
        "id": "{",
        "value": "{",
        "line": 80,
        "column": 22
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 81,
      "column": 6
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 81,
        "column": 14
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 81,
        "column": 18
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 81,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "_",
        "line": 81,
        "column": 24
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`z'",
        "line": 81,
        "column": 28
      },
      {
        "id": "/",
        "value": "/",
        "line": 81,
        "column": 31
      },
      {
        "id": "number",
        "value": "100",
        "line": 81,
        "column": 32
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "abs",
        "line": 81,
        "column": 40
      },
      {
        "id": "`'",
        "value": "`z'",
        "line": 81,
        "column": 44
      },
      {
        "id": "/",
        "value": "/",
        "line": 81,
        "column": 47
      },
      {
        "id": "number",
        "value": "100",
        "line": 81,
        "column": 48
      },
      {
        "id": "-",
        "value": "-",
        "line": 81,
        "column": 52
      },
      {
        "id": "identifier",
        "value": "prob",
        "line": 81,
        "column": 54
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 81,
        "column": 58
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 81,
        "column": 61
      },
      {
        "id": "<",
        "value": "<",
        "line": 81,
        "column": 66
      },
      {
        "id": "number",
        "value": "0.0001",
        "line": 81,
        "column": 68
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 85,
      "column": 3
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "q",
        "line": 85,
        "column": 11
      }
    ],
    "in": [
      {
        "id": "number",
        "value": "1",
        "line": 85,
        "column": 16
      },
      {
        "id": "number",
        "value": "2",
        "line": 85,
        "column": 18
      },
      {
        "id": "number",
        "value": "3",
        "line": 85,
        "column": 20
      },
      {
        "id": "number",
        "value": "4",
        "line": 85,
        "column": 22
      },
      {
        "id": "{",
        "value": "{",
        "line": 85,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 86,
      "column": 4
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "p",
        "line": 86,
        "column": 12
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "A",
        "line": 86,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "B",
        "line": 86,
        "column": 19
      },
      {
        "id": "{",
        "value": "{",
        "line": 86,
        "column": 21
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "drop",
      "line": 87,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 87,
        "column": 10
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 87,
        "column": 14
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 87,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 88,
      "column": 5
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "prob",
        "line": 88,
        "column": 12
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 88,
        "column": 16
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 88,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "_",
        "line": 88,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "prob",
        "line": 88,
        "column": 25
      },
      {
        "id": "`'",
        "value": "`p'",
        "line": 88,
        "column": 29
      },
      {
        "id": "`'",
        "value": "`q'",
        "line": 88,
        "column": 32
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Append Additional Experimental Data\t",
    "line": 92,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 93,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "TempData",
        "line": 93,
        "column": 7
      },
      {
        "id": "/",
        "value": "/",
        "line": 93,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "ExperimentData.dta",
        "line": 93,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 93,
        "column": 36
      }
    ]
  },
  {
    "id": "comment",
    "value": "* SIMULATION OF REGISTER DATA",
    "line": 95,
    "column": 2
  },
  {
    "id": "comment",
    "value": "* Generate Sample ID",
    "line": 96,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "generate",
      "line": 97,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "S_1",
        "line": 97,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "sampleIDX",
        "line": 97,
        "column": 19
      },
      {
        "id": "==",
        "value": "==",
        "line": 97,
        "column": 28
      },
      {
        "id": "number",
        "value": "1",
        "line": 97,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "generate",
      "line": 98,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "S_2",
        "line": 98,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "sampleIDX",
        "line": 98,
        "column": 19
      },
      {
        "id": "==",
        "value": "==",
        "line": 98,
        "column": 28
      },
      {
        "id": "number",
        "value": "2",
        "line": 98,
        "column": 30
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "generate",
      "line": 99,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "S_3",
        "line": 99,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "sampleIDX",
        "line": 99,
        "column": 19
      },
      {
        "id": "==",
        "value": "==",
        "line": 99,
        "column": 28
      },
      {
        "id": "number",
        "value": "3",
        "line": 99,
        "column": 30
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Only keep variables of interest",
    "line": 101,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 102,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "pnr",
        "line": 102,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "sampleIDX",
        "line": 102,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "task",
        "line": 102,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "decision",
        "line": 102,
        "column": 26
      },
      {
        "id": "identifier",
        "value": "VPRIZE",
        "line": 102,
        "column": 35
      },
      {
        "id": "*",
        "value": "*",
        "line": 102,
        "column": 41
      },
      {
        "id": "identifier",
        "value": "prob",
        "line": 102,
        "column": 43
      },
      {
        "id": "*",
        "value": "*",
        "line": 102,
        "column": 47
      },
      {
        "id": "identifier",
        "value": "qid",
        "line": 102,
        "column": 49
      },
      {
        "id": "identifier",
        "value": "Totalpay",
        "line": 102,
        "column": 53
      },
      {
        "id": "identifier",
        "value": "RApay",
        "line": 102,
        "column": 62
      },
      {
        "id": "identifier",
        "value": "S_",
        "line": 102,
        "column": 68
      },
      {
        "id": "*",
        "value": "*",
        "line": 102,
        "column": 70
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Save Experimental Data\t",
    "line": 104,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 105,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "TempData",
        "line": 105,
        "column": 7
      },
      {
        "id": "/",
        "value": "/",
        "line": 105,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "ExperimentalData",
        "line": 105,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 105,
        "column": 34
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Now do matrix of covariates on sample treatments and completion of experiment\t",
    "line": 107,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 108,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "TempData",
        "line": 108,
        "column": 6
      },
      {
        "id": "/",
        "value": "/",
        "line": 108,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "ExperimentalData.dta",
        "line": 108,
        "column": 15
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 108,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 109,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "pnr",
        "line": 109,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "S_",
        "line": 109,
        "column": 11
      },
      {
        "id": "*",
        "value": "*",
        "line": 109,
        "column": 13
      },
      {
        "id": "identifier",
        "value": "Totalpay",
        "line": 109,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "RApay",
        "line": 109,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 110,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Totalpay",
        "line": 110,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "totalpay",
        "line": 110,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 111,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "RApay",
        "line": 111,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "riskpay",
        "line": 111,
        "column": 15
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "duplicates",
      "line": 112,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "drop",
        "line": 112,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 113,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "TempData",
        "line": 113,
        "column": 7
      },
      {
        "id": "/",
        "value": "/",
        "line": 113,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "ExperimentalData_X.dta",
        "line": 113,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 113,
        "column": 40
      }
    ]
  },
  {
    "id": "comment",
    "value": "*** READ IN MEAN AND COVARIANCE MATRIXES EXPORTED FROM THE SEVER",
    "line": 115,
    "column": 2
  },
  {
    "id": "comment",
    "value": "* Means",
    "line": 116,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 117,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "DATA",
        "line": 117,
        "column": 6
      },
      {
        "id": "\\",
        "value": "\\",
        "line": 117,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "meanM_E",
        "line": 117,
        "column": 11
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 117,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mkmat",
      "line": 118,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mean_1",
        "line": 118,
        "column": 8
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "matrix",
        "line": 118,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "MMX",
        "line": 118,
        "column": 23
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Covariance",
    "line": 120,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 121,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "DATA",
        "line": 121,
        "column": 6
      },
      {
        "id": "\\",
        "value": "\\",
        "line": 121,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "corrM_E",
        "line": 121,
        "column": 11
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 121,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mkmat",
      "line": 122,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "corr_",
        "line": 122,
        "column": 8
      },
      {
        "id": "*",
        "value": "*",
        "line": 122,
        "column": 13
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "matrix",
        "line": 122,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "CVMX",
        "line": 122,
        "column": 23
      }
    ]
  },
  {
    "id": "comment",
    "value": "* size of correlation matrix",
    "line": 124,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 125,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "CVMXn",
        "line": 125,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "rowsof",
        "line": 125,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "CVMX",
        "line": 125,
        "column": 23
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Set the number of unknows from outside of the server in the matrix ",
    "line": 127,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 128,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "K0",
        "line": 128,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "18",
        "line": 128,
        "column": 13
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Set the start for the knowns",
    "line": 130,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "local",
      "line": 131,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "K1",
        "line": 131,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`K0'",
        "line": 131,
        "column": 13
      },
      {
        "id": "+",
        "value": "+",
        "line": 131,
        "column": 18
      },
      {
        "id": "number",
        "value": "1",
        "line": 131,
        "column": 20
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Define mata program to generate symetric matrizes",
    "line": 133,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "clear",
      "line": 134,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mata",
        "line": 134,
        "column": 8
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mata",
      "line": 135,
      "column": 2
    },
    "varlist": [
      {
        "id": ":",
        "value": ":",
        "line": 135,
        "column": 6
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "real",
      "line": 136,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "matrix",
        "line": 136,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "foo",
        "line": 136,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "{",
      "value": "{",
      "line": 137,
      "column": 2
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "temp",
      "line": 138,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "st_matrix",
        "line": 138,
        "column": 10
      },
      {
        "id": "string",
        "value": "\"V_c\"",
        "line": 138,
        "column": 20
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "temp",
      "line": 139,
      "column": 3
    },
    "=": [
      {
        "id": "identifier",
        "value": "makesymmetric",
        "line": 139,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "temp",
        "line": 139,
        "column": 24
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "st_matrix",
      "line": 140,
      "column": 3
    },
    "varlist": [
      {
        "id": "string",
        "value": "\"V2\"",
        "line": 140,
        "column": 13
      },
      {
        "id": ",",
        "value": ",",
        "line": 140,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "temp",
        "line": 140,
        "column": 19
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "return",
      "line": 141,
      "column": 3
    },
    "varlist": [
      {
        "id": "number",
        "value": "1",
        "line": 141,
        "column": 10
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "end",
      "line": 143,
      "column": 2
    }
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 145,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "TempData",
        "line": 145,
        "column": 6
      },
      {
        "id": "/",
        "value": "/",
        "line": 145,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "ExperimentalData_X.dta",
        "line": 145,
        "column": 15
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "clear",
        "line": 145,
        "column": 39
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Partition the matrix on what is known (22), what is not known (11) and the covariance",
    "line": 147,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 148,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "V11",
        "line": 148,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "CVMX",
        "line": 148,
        "column": 12
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "1..",
        "line": 148,
        "column": 17
      },
      {
        "id": "`'",
        "value": "`K0'",
        "line": 148,
        "column": 20
      }
    ],
    "options": [
      {
        "id": "number",
        "value": "1..",
        "line": 148,
        "column": 25
      },
      {
        "id": "`'",
        "value": "`K0'",
        "line": 148,
        "column": 28
      },
      {
        "id": "]",
        "value": "]",
        "line": 148,
        "column": 32
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 149,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "V22",
        "line": 149,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "CVMX",
        "line": 149,
        "column": 12
      }
    ],
    "weight": [
      {
        "id": "`'",
        "value": "`K1'",
        "line": 149,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "..",
        "line": 149,
        "column": 21
      },
      {
        "id": "`'",
        "value": "`CVMXn'",
        "line": 149,
        "column": 23
      }
    ],
    "options": [
      {
        "id": "`'",
        "value": "`K1'",
        "line": 149,
        "column": 31
      },
      {
        "id": "identifier",
        "value": "..",
        "line": 149,
        "column": 35
      },
      {
        "id": "`'",
        "value": "`CVMXn'",
        "line": 149,
        "column": 37
      },
      {
        "id": "]",
        "value": "]",
        "line": 149,
        "column": 44
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 150,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "V12",
        "line": 150,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "CVMX",
        "line": 150,
        "column": 12
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "1..",
        "line": 150,
        "column": 17
      },
      {
        "id": "`'",
        "value": "`K0'",
        "line": 150,
        "column": 20
      }
    ],
    "options": [
      {
        "id": "`'",
        "value": "`K1'",
        "line": 150,
        "column": 25
      },
      {
        "id": "identifier",
        "value": "..",
        "line": 150,
        "column": 29
      },
      {
        "id": "`'",
        "value": "`CVMXn'",
        "line": 150,
        "column": 31
      },
      {
        "id": "]",
        "value": "]",
        "line": 150,
        "column": 38
      }
    ]
  },
  {
    "id": "comment",
    "value": "* the variance of the conditional distribution is fixed...",
    "line": 152,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 153,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "V_c",
        "line": 153,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "V11",
        "line": 153,
        "column": 12
      },
      {
        "id": "-",
        "value": "-",
        "line": 153,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "V12",
        "line": 153,
        "column": 18
      },
      {
        "id": "*",
        "value": "*",
        "line": 153,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "inv",
        "line": 153,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "V22",
        "line": 153,
        "column": 26
      },
      {
        "id": "*",
        "value": "*",
        "line": 153,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "V12",
        "line": 153,
        "column": 32
      },
      {
        "id": "'",
        "value": "'",
        "line": 153,
        "column": 35
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mata",
      "line": 154,
      "column": 2
    },
    "varlist": [
      {
        "id": ":",
        "value": ":",
        "line": 154,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "V2",
        "line": 154,
        "column": 8
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "foo",
        "line": 154,
        "column": 13
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 155,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "list",
        "line": 155,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "V2",
        "line": 155,
        "column": 11
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Invert the means",
    "line": 157,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 158,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mu1",
        "line": 158,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "MMX",
        "line": 158,
        "column": 12
      }
    ],
    "weight": [
      {
        "id": "number",
        "value": "1..",
        "line": 158,
        "column": 16
      },
      {
        "id": "`'",
        "value": "`K0'",
        "line": 158,
        "column": 19
      }
    ],
    "options": [
      {
        "id": "number",
        "value": "1",
        "line": 158,
        "column": 24
      },
      {
        "id": "]",
        "value": "]",
        "line": 158,
        "column": 25
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 159,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mu2",
        "line": 159,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "MMX",
        "line": 159,
        "column": 12
      }
    ],
    "weight": [
      {
        "id": "`'",
        "value": "`K1'",
        "line": 159,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "..",
        "line": 159,
        "column": 20
      },
      {
        "id": "`'",
        "value": "`CVMXn'",
        "line": 159,
        "column": 22
      }
    ],
    "options": [
      {
        "id": "number",
        "value": "1",
        "line": 159,
        "column": 30
      },
      {
        "id": "]",
        "value": "]",
        "line": 159,
        "column": 31
      }
    ]
  },
  {
    "id": "comment",
    "value": "* ...but the mean changes",
    "line": 161,
    "column": 2
  },
  {
    "id": "comment",
    "value": "* so first take the realizations of what we have out in a matrix",
    "line": 162,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "set",
      "line": 163,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "matsize",
        "line": 163,
        "column": 6
      },
      {
        "id": "number",
        "value": "11000",
        "line": 163,
        "column": 14
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mkmat",
      "line": 164,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "S_1",
        "line": 164,
        "column": 8
      },
      {
        "id": "identifier",
        "value": "S_2",
        "line": 164,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "S_3",
        "line": 164,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "riskpay",
        "line": 164,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "totalpay",
        "line": 164,
        "column": 28
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "matrix",
        "line": 164,
        "column": 39
      },
      {
        "id": "identifier",
        "value": "X",
        "line": 164,
        "column": 46
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 165,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "tX",
        "line": 165,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "X",
        "line": 165,
        "column": 11
      },
      {
        "id": "'",
        "value": "'",
        "line": 165,
        "column": 12
      }
    ]
  },
  {
    "id": "comment",
    "value": "* now compute the mean of the conditional disitribution for each observation",
    "line": 167,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "set",
      "line": 168,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "emptycells",
        "line": 168,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "drop",
        "line": 168,
        "column": 17
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 169,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "mu_c",
        "line": 169,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "mu1#J",
        "line": 169,
        "column": 13
      },
      {
        "id": "number",
        "value": "1",
        "line": 169,
        "column": 19
      },
      {
        "id": ",",
        "value": ",",
        "line": 169,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "_N",
        "line": 169,
        "column": 21
      },
      {
        "id": ",",
        "value": ",",
        "line": 169,
        "column": 23
      },
      {
        "id": "number",
        "value": "1",
        "line": 169,
        "column": 24
      },
      {
        "id": "+",
        "value": "+",
        "line": 169,
        "column": 27
      },
      {
        "id": "identifier",
        "value": "V12",
        "line": 169,
        "column": 29
      },
      {
        "id": "*",
        "value": "*",
        "line": 169,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "inv",
        "line": 169,
        "column": 33
      },
      {
        "id": "identifier",
        "value": "V22",
        "line": 169,
        "column": 37
      },
      {
        "id": "*",
        "value": "*",
        "line": 169,
        "column": 41
      },
      {
        "id": "identifier",
        "value": "tX",
        "line": 169,
        "column": 43
      },
      {
        "id": "-",
        "value": "-",
        "line": 169,
        "column": 46
      },
      {
        "id": "identifier",
        "value": "mu2#J",
        "line": 169,
        "column": 48
      },
      {
        "id": "number",
        "value": "1",
        "line": 169,
        "column": 54
      },
      {
        "id": ",",
        "value": ",",
        "line": 169,
        "column": 55
      },
      {
        "id": "identifier",
        "value": "_N",
        "line": 169,
        "column": 56
      },
      {
        "id": ",",
        "value": ",",
        "line": 169,
        "column": 58
      },
      {
        "id": "number",
        "value": "1",
        "line": 169,
        "column": 59
      }
    ]
  },
  {
    "id": "comment",
    "value": "* make them variables",
    "line": 171,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 172,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "putback",
        "line": 172,
        "column": 6
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "mu_c",
        "line": 172,
        "column": 16
      },
      {
        "id": "'",
        "value": "'",
        "line": 172,
        "column": 20
      }
    ]
  },
  {
    "id": "comment",
    "value": "* get names of variables",
    "line": 176,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "mat",
      "line": 177,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "colnames",
        "line": 177,
        "column": 6
      },
      {
        "id": "identifier",
        "value": "putback",
        "line": 177,
        "column": 15
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "mean_male",
        "line": 178,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_age",
        "line": 179,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_married",
        "line": 180,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_hsize",
        "line": 181,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_income",
        "line": 182,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_assets_total",
        "line": 183,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_assets_realesta",
        "line": 184,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_assets_stocks",
        "line": 185,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_assets_bond",
        "line": 186,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_assets_banks",
        "line": 187,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_assets_pension",
        "line": 188,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_assets_cars",
        "line": 189,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_liab_total",
        "line": 190,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_liab_mortgage",
        "line": 191,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_liab_bankdebt",
        "line": 192,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_wealth_net",
        "line": 193,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_wealth_T",
        "line": 194,
        "column": 2
      },
      {
        "id": "identifier",
        "value": "mean_truncated",
        "line": 195,
        "column": 2
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "svmat",
      "line": 196,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "putback",
        "line": 196,
        "column": 8
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "names",
        "line": 196,
        "column": 17
      },
      {
        "id": "identifier",
        "value": "col",
        "line": 196,
        "column": 23
      }
    ]
  },
  {
    "id": "comment",
    "value": "* now generate the fake variables from the multivariate normal distribution",
    "line": 198,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "drawnorm",
      "line": 201,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "male",
        "line": 201,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "age",
        "line": 201,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "married",
        "line": 201,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "hsize",
        "line": 201,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "income",
        "line": 201,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "assets_total",
        "line": 201,
        "column": 41
      },
      {
        "id": "identifier",
        "value": "assets_realesta",
        "line": 201,
        "column": 54
      },
      {
        "id": "identifier",
        "value": "assets_stocks",
        "line": 201,
        "column": 70
      },
      {
        "id": "identifier",
        "value": "assets_bond",
        "line": 201,
        "column": 84
      },
      {
        "id": "identifier",
        "value": "assets_banks",
        "line": 201,
        "column": 96
      },
      {
        "id": "identifier",
        "value": "assets_pension",
        "line": 201,
        "column": 109
      },
      {
        "id": "identifier",
        "value": "assets_cars",
        "line": 201,
        "column": 124
      },
      {
        "id": "identifier",
        "value": "liab_total",
        "line": 201,
        "column": 136
      },
      {
        "id": "identifier",
        "value": "liab_bankdebt",
        "line": 201,
        "column": 147
      },
      {
        "id": "identifier",
        "value": "liab_mortgage",
        "line": 201,
        "column": 161
      },
      {
        "id": "identifier",
        "value": "wealth_net",
        "line": 201,
        "column": 175
      },
      {
        "id": "identifier",
        "value": "wealth_T",
        "line": 201,
        "column": 186
      },
      {
        "id": "identifier",
        "value": "truncated",
        "line": 201,
        "column": 195
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "cov",
        "line": 201,
        "column": 207
      },
      {
        "id": "identifier",
        "value": "V2",
        "line": 201,
        "column": 211
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 202,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "y",
        "line": 202,
        "column": 10
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "male",
        "line": 202,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "age",
        "line": 202,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "married",
        "line": 202,
        "column": 24
      },
      {
        "id": "identifier",
        "value": "hsize",
        "line": 202,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "income",
        "line": 202,
        "column": 38
      },
      {
        "id": "identifier",
        "value": "assets_total",
        "line": 202,
        "column": 45
      },
      {
        "id": "identifier",
        "value": "assets_realesta",
        "line": 202,
        "column": 58
      },
      {
        "id": "identifier",
        "value": "assets_stocks",
        "line": 202,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "assets_bond",
        "line": 202,
        "column": 88
      },
      {
        "id": "identifier",
        "value": "assets_banks",
        "line": 202,
        "column": 100
      },
      {
        "id": "identifier",
        "value": "assets_pension",
        "line": 202,
        "column": 113
      },
      {
        "id": "identifier",
        "value": "assets_cars",
        "line": 202,
        "column": 128
      },
      {
        "id": "identifier",
        "value": "liab_total",
        "line": 202,
        "column": 140
      },
      {
        "id": "identifier",
        "value": "liab_bankdebt",
        "line": 202,
        "column": 151
      },
      {
        "id": "identifier",
        "value": "liab_mortgage",
        "line": 202,
        "column": 165
      },
      {
        "id": "identifier",
        "value": "wealth_net",
        "line": 202,
        "column": 179
      },
      {
        "id": "identifier",
        "value": "wealth_T",
        "line": 202,
        "column": 190
      },
      {
        "id": "identifier",
        "value": "truncated",
        "line": 202,
        "column": 199
      },
      {
        "id": "{",
        "value": "{",
        "line": 202,
        "column": 210
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 203,
      "column": 3
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`y'",
        "line": 203,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`y'",
        "line": 203,
        "column": 17
      },
      {
        "id": "+",
        "value": "+",
        "line": 203,
        "column": 21
      },
      {
        "id": "identifier",
        "value": "mean_",
        "line": 203,
        "column": 23
      },
      {
        "id": "`'",
        "value": "`y'",
        "line": 203,
        "column": 28
      }
    ]
  },
  {
    "id": "comment",
    "value": "* save data",
    "line": 205,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 206,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "TempData",
        "line": 206,
        "column": 7
      },
      {
        "id": "/",
        "value": "/",
        "line": 206,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "ExperimentalData_XX.dta",
        "line": 206,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 206,
        "column": 41
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "keep",
      "line": 208,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "pnr",
        "line": 208,
        "column": 7
      },
      {
        "id": "identifier",
        "value": "male",
        "line": 208,
        "column": 11
      },
      {
        "id": "identifier",
        "value": "age",
        "line": 208,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "married",
        "line": 208,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "hsize",
        "line": 208,
        "column": 28
      },
      {
        "id": "identifier",
        "value": "income",
        "line": 208,
        "column": 34
      },
      {
        "id": "identifier",
        "value": "assets_total",
        "line": 208,
        "column": 41
      },
      {
        "id": "identifier",
        "value": "assets_realesta",
        "line": 208,
        "column": 54
      },
      {
        "id": "identifier",
        "value": "assets_stocks",
        "line": 208,
        "column": 70
      },
      {
        "id": "identifier",
        "value": "assets_bond",
        "line": 208,
        "column": 84
      },
      {
        "id": "identifier",
        "value": "assets_banks",
        "line": 208,
        "column": 96
      },
      {
        "id": "identifier",
        "value": "assets_pension",
        "line": 208,
        "column": 109
      },
      {
        "id": "identifier",
        "value": "assets_cars",
        "line": 208,
        "column": 124
      },
      {
        "id": "identifier",
        "value": "liab_total",
        "line": 208,
        "column": 136
      },
      {
        "id": "identifier",
        "value": "liab_bankdebt",
        "line": 208,
        "column": 147
      },
      {
        "id": "identifier",
        "value": "liab_mortgage",
        "line": 208,
        "column": 161
      },
      {
        "id": "identifier",
        "value": "wealth_net",
        "line": 208,
        "column": 175
      },
      {
        "id": "identifier",
        "value": "wealth_T",
        "line": 208,
        "column": 186
      },
      {
        "id": "identifier",
        "value": "truncated",
        "line": 208,
        "column": 195
      },
      {
        "id": "identifier",
        "value": "S_",
        "line": 208,
        "column": 205
      },
      {
        "id": "*",
        "value": "*",
        "line": 208,
        "column": 207
      },
      {
        "id": "identifier",
        "value": "riskpay",
        "line": 208,
        "column": 209
      },
      {
        "id": "identifier",
        "value": "totalpay",
        "line": 208,
        "column": 217
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Now add the private liabilities at 0",
    "line": 210,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "generate",
      "line": 211,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "liab_private",
        "line": 211,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 211,
        "column": 27
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Now fix the fake dummies which are dummies.",
    "line": 213,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 214,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "X",
        "line": 214,
        "column": 10
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "male",
        "line": 214,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "married",
        "line": 214,
        "column": 20
      },
      {
        "id": "identifier",
        "value": "truncated",
        "line": 214,
        "column": 28
      },
      {
        "id": "{",
        "value": "{",
        "line": 214,
        "column": 38
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 215,
      "column": 3
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`X'",
        "line": 215,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "1",
        "line": 215,
        "column": 17
      }
    ],
    "if": [
      {
        "id": "`'",
        "value": "`X'",
        "line": 215,
        "column": 22
      },
      {
        "id": ">",
        "value": ">",
        "line": 215,
        "column": 25
      },
      {
        "id": "number",
        "value": "0.5",
        "line": 215,
        "column": 26
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 216,
      "column": 3
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`X'",
        "line": 216,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "number",
        "value": "0",
        "line": 216,
        "column": 17
      }
    ],
    "if": [
      {
        "id": "`'",
        "value": "`X'",
        "line": 216,
        "column": 22
      },
      {
        "id": "~=",
        "value": "~=",
        "line": 216,
        "column": 25
      },
      {
        "id": "number",
        "value": "1",
        "line": 216,
        "column": 27
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Now correct bounded variables ",
    "line": 219,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "foreach",
      "line": 220,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "x",
        "line": 220,
        "column": 10
      }
    ],
    "in": [
      {
        "id": "identifier",
        "value": "income",
        "line": 220,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "assets_total",
        "line": 220,
        "column": 22
      },
      {
        "id": "identifier",
        "value": "assets_realesta",
        "line": 220,
        "column": 35
      },
      {
        "id": "identifier",
        "value": "assets_stocks",
        "line": 220,
        "column": 51
      },
      {
        "id": "identifier",
        "value": "assets_bond",
        "line": 220,
        "column": 65
      },
      {
        "id": "identifier",
        "value": "assets_banks",
        "line": 220,
        "column": 77
      },
      {
        "id": "identifier",
        "value": "assets_pension",
        "line": 220,
        "column": 90
      },
      {
        "id": "identifier",
        "value": "assets_cars",
        "line": 220,
        "column": 105
      },
      {
        "id": "identifier",
        "value": "liab_total",
        "line": 220,
        "column": 117
      },
      {
        "id": "identifier",
        "value": "liab_bankdebt",
        "line": 220,
        "column": 128
      },
      {
        "id": "identifier",
        "value": "liab_mortgage",
        "line": 220,
        "column": 142
      },
      {
        "id": "identifier",
        "value": "wealth_T",
        "line": 220,
        "column": 156
      },
      {
        "id": "{",
        "value": "{",
        "line": 220,
        "column": 165
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 221,
      "column": 3
    },
    "varlist": [
      {
        "id": "`'",
        "value": "`x'",
        "line": 221,
        "column": 11
      }
    ],
    "=": [
      {
        "id": "`'",
        "value": "`x'",
        "line": 221,
        "column": 18
      },
      {
        "id": ">",
        "value": ">",
        "line": 221,
        "column": 21
      },
      {
        "id": "number",
        "value": "0",
        "line": 221,
        "column": 22
      },
      {
        "id": "*",
        "value": "*",
        "line": 221,
        "column": 24
      },
      {
        "id": "`'",
        "value": "`x'",
        "line": 221,
        "column": 25
      },
      {
        "id": "+",
        "value": "+",
        "line": 221,
        "column": 29
      },
      {
        "id": "`'",
        "value": "`x'",
        "line": 221,
        "column": 32
      },
      {
        "id": "<",
        "value": "<",
        "line": 221,
        "column": 35
      },
      {
        "id": "=",
        "value": "=",
        "line": 221,
        "column": 36
      },
      {
        "id": "number",
        "value": "0",
        "line": 221,
        "column": 37
      },
      {
        "id": "*",
        "value": "*",
        "line": 221,
        "column": 39
      },
      {
        "id": "identifier",
        "value": "exp",
        "line": 221,
        "column": 40
      },
      {
        "id": "number",
        "value": "1",
        "line": 221,
        "column": 44
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Truncated the wealth correctly",
    "line": 224,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 225,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "wealth_T",
        "line": 225,
        "column": 10
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "exp",
        "line": 225,
        "column": 22
      },
      {
        "id": "number",
        "value": "1",
        "line": 225,
        "column": 26
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "truncated",
        "line": 225,
        "column": 32
      },
      {
        "id": "==",
        "value": "==",
        "line": 225,
        "column": 41
      },
      {
        "id": "number",
        "value": "1",
        "line": 225,
        "column": 43
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "replace",
      "line": 226,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "wealth_T",
        "line": 226,
        "column": 10
      }
    ],
    "=": [
      {
        "id": "identifier",
        "value": "exp",
        "line": 226,
        "column": 22
      },
      {
        "id": "number",
        "value": "1",
        "line": 226,
        "column": 26
      }
    ],
    "if": [
      {
        "id": "identifier",
        "value": "wealth_net",
        "line": 226,
        "column": 32
      },
      {
        "id": "<",
        "value": "<",
        "line": 226,
        "column": 42
      },
      {
        "id": "number",
        "value": "0",
        "line": 226,
        "column": 43
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Save final simulated covariates",
    "line": 228,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 229,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "TempData",
        "line": 229,
        "column": 7
      },
      {
        "id": "/",
        "value": "/",
        "line": 229,
        "column": 15
      },
      {
        "id": "identifier",
        "value": "ExperimentalDataFake",
        "line": 229,
        "column": 16
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 229,
        "column": 38
      }
    ]
  },
  {
    "id": "comment",
    "value": "* Get the original experimental data",
    "line": 231,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "use",
      "line": 232,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "TempData",
        "line": 232,
        "column": 6
      },
      {
        "id": "/",
        "value": "/",
        "line": 232,
        "column": 14
      },
      {
        "id": "identifier",
        "value": "ExperimentalData.dta",
        "line": 232,
        "column": 15
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 232,
        "column": 37
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "merge",
      "line": 233,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "m",
        "line": 233,
        "column": 8
      },
      {
        "id": ":",
        "value": ":",
        "line": 233,
        "column": 9
      },
      {
        "id": "number",
        "value": "1",
        "line": 233,
        "column": 10
      },
      {
        "id": "identifier",
        "value": "pnr",
        "line": 233,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "using",
        "line": 233,
        "column": 16
      },
      {
        "id": "identifier",
        "value": "TempData",
        "line": 233,
        "column": 22
      },
      {
        "id": "/",
        "value": "/",
        "line": 233,
        "column": 30
      },
      {
        "id": "identifier",
        "value": "ExperimentalDataFake",
        "line": 233,
        "column": 31
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "rename",
      "line": 234,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "decision",
        "line": 234,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "choice",
        "line": 234,
        "column": 18
      }
    ]
  },
  {
    "command": {
      "id": "identifier",
      "value": "save",
      "line": 235,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "Data",
        "line": 235,
        "column": 7
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "replace",
        "line": 235,
        "column": 13
      }
    ]
  },
  {
    "id": "comment",
    "value": "* compare covariance matrices",
    "line": 237,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "correlate",
      "line": 238,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "income",
        "line": 238,
        "column": 12
      },
      {
        "id": "identifier",
        "value": "assets_total",
        "line": 238,
        "column": 19
      },
      {
        "id": "identifier",
        "value": "assets_realesta",
        "line": 238,
        "column": 32
      },
      {
        "id": "identifier",
        "value": "assets_stocks",
        "line": 238,
        "column": 48
      },
      {
        "id": "identifier",
        "value": "assets_bond",
        "line": 238,
        "column": 62
      },
      {
        "id": "identifier",
        "value": "assets_banks",
        "line": 238,
        "column": 74
      },
      {
        "id": "identifier",
        "value": "assets_pension",
        "line": 238,
        "column": 87
      },
      {
        "id": "identifier",
        "value": "assets_cars",
        "line": 238,
        "column": 102
      },
      {
        "id": "identifier",
        "value": "liab_total",
        "line": 238,
        "column": 114
      },
      {
        "id": "identifier",
        "value": "liab_bankdebt",
        "line": 238,
        "column": 125
      },
      {
        "id": "identifier",
        "value": "liab_mortgage",
        "line": 238,
        "column": 139
      },
      {
        "id": "identifier",
        "value": "wealth_T",
        "line": 238,
        "column": 153
      },
      {
        "id": "identifier",
        "value": "S_",
        "line": 238,
        "column": 162
      },
      {
        "id": "*",
        "value": "*",
        "line": 238,
        "column": 164
      },
      {
        "id": "identifier",
        "value": "riskpay",
        "line": 238,
        "column": 166
      },
      {
        "id": "identifier",
        "value": "totalpay",
        "line": 238,
        "column": 174
      }
    ],
    "options": [
      {
        "id": "identifier",
        "value": "cov",
        "line": 238,
        "column": 184
      }
    ]
  },
  {
    "id": "comment",
    "value": "* List the real one",
    "line": 240,
    "column": 2
  },
  {
    "command": {
      "id": "identifier",
      "value": "matrix",
      "line": 241,
      "column": 2
    },
    "varlist": [
      {
        "id": "identifier",
        "value": "list",
        "line": 241,
        "column": 9
      },
      {
        "id": "identifier",
        "value": "CVMX",
        "line": 241,
        "column": 14
      }
    ]
  },
  {
    "id": "comment",
    "value": "/*  ON SERVER DATA GENERATION */",
    "line": 245,
    "column": 1
  },
  {
    "id": "comment",
    "value": "/*\n**************************************************\n*\tGet experimental data from the two 2015 experiments\n***************************************************\n\t\n* Get experimental data from first round of experiments\n\t* use \"$e_data\\2_runde\\risktime_results.dta\", clear\n\tuse DSTdata\n\n* describe data\n\tdes\n\t\n* now keep variables of interest\n\tsave TempData/temp, replace\n\n***************************************************\n* ONLY READ IN INITIAL RISK AVERSION TASKS\n***************************************************\n\n* Now clean up RA tasks\n\tuse TempData/temp, clear\n\tkeep if type == 1\n\tkeep pnr par_single stratum period decision r_l* r_r* qid dato_stempel\n\tsave TempData//tmp, replace\n\tkeep pnr\n\tduplicates drop\n\tgenerate pnrS = pnr\n\tdestring pnr, replace\n\tsave TempData/tmp2, replace\n\tuse TempData/tmp, clear\n\ttostring _all, replace\n\torder pnr stratum  period decision r_l* r_r* qid\n\tforeach y in a p {\n\tforeach z in r l {\n\tforeach x in 1 2 3 4 {\n\t\t\treplace r_`z'`y'`x' = subinstr(r_`z'`y'`x',\",\",\".\",.)\n\t}\n\t}\n\t}\n\tdestring _all, replace\n\tgenerate taskRA= (period>0)\n\trename period task\n\n\t* Remove those which was restarted.\n\tsort pnr dato_stempel\n\tegen seqN = seq(), by(pnr)\n\tegen seqM = max(seqN), by(pnr)\n\tdrop if seqN<3 & seqM==62 \n\tdrop if seqN>60 & seqM==120\n\tdrop seqN seqM\n\trename r_la1 VPRIZEA1\n\trename r_la2 VPRIZEA2\n\trename r_la3 VPRIZEA3\n\trename r_la4 VPRIZEA4\n\t\n\trename r_ra1 VPRIZEB1\n\trename r_ra2 VPRIZEB2\n\trename r_ra3 VPRIZEB3\n\trename r_ra4 VPRIZEB4\n\t\n\trename r_lp1 probA1\n\trename r_lp2 probA2\n\trename r_lp3 probA3\n\trename r_lp4 probA4\n\t\n\trename r_rp1 probB1\n\trename r_rp2 probB2\n\trename r_rp3 probB3\n\trename r_rp4 probB4\n\n\tgenerate testA = probA1 + probA2 + probA3 + probA4\n\tgenerate testB = probB1 + probB2 + probB3 + probB4\n\n* Convert probabilities to 0-1 scale\nforvalues x=1(1)4 {\n\tforvalues y = 1(1)9 {\n\t\treplace probA`x' = probA`x'*10 if probA`x'==`y'\t& testA~=1\n\t\treplace probB`x' = probB`x'*10 if probB`x'==`y'\t& testB~=1\t\n\t}\n}\n\nforvalues x=1(1)4 {\n\t\treplace probA`x' = probA`x'*100 if testA==1\t\n\t\treplace probB`x' = probB`x'*100 if testB==1\t\n}\n\n\ngenerate scaleA = probA1 + probA2 + probA3 + probA4\ngenerate scaleB = probB1 + probB2 + probB3 + probB4\n\nreplace probA1 = probA1 / scaleA\nreplace probA2 = probA2 / scaleA\nreplace probA3 = probA3 / scaleA\nreplace probA4 = probA4 / scaleA\n\nreplace probB1 = probB1 / scaleB\nreplace probB2 = probB2 / scaleB\nreplace probB3 = probB3 / scaleB\nreplace probB4 = probB4 / scaleB\n\n\t* Label variables\n\tlabel variable decision \"Decision in task\"\n\tlabel variable taskRA \t\"Risk Aversion Task\"\n\tlabel variable task \t\"Task number\"\n\tlabel variable VPRIZEA1 \t\"Option A: Amount of the First Prize\"\n\tlabel variable VPRIZEA2 \t\"Option A: Amount of the Second Prize\"\n\tlabel variable VPRIZEA3 \t\"Option A: Amount of the Third Prize\"\n\tlabel variable VPRIZEA4 \t\"Option A: Amount of the Fourth Prize\"\n\tlabel variable VPRIZEA1 \t\"Option B: Amount of the First Prize\"\n\tlabel variable VPRIZEA2 \t\"Option B: Amount of the Second Prize\"\n\tlabel variable VPRIZEA3 \t\"Option B: Amount of the Third Prize\"\n\tlabel variable VPRIZEA4 \t\"Option B: Amount of the Fourth Prize\"\n\tlabel variable probA1 \t\t\"Option A: Probability of the First Prize\"\n\tlabel variable probA2 \t\t\"Option A: Probability of the Second Prize\"\n\tlabel variable probA3 \t\t\"Option A: Probability of the Third Prize\"\n\tlabel variable probA4 \t\t\"Option A: Probability of the Fourth Prize\"\n\tlabel variable probA1 \t\t\"Option B: Probability of the First Prize\"\n\tlabel variable probA2 \t\t\"Option B: Probability of the Second Prize\"\n\tlabel variable probA3 \t\t\"Option B: Probability of the Third Prize\"\n\tlabel variable probA4 \t\t\"Option B: Probability of the Fourth Prize\"\n\t\n\t* Make sure there are no missing values\n\tkeep pnr task decision VPR** prob* qid dato_stempel taskRA stratumid\n\t\n\t* \n\tgenerate choice = 0\n\treplace choice = 1 if decision==1\n\tcompress\n\n* \tMerge back string pnr\t\n\tmerge m:1 pnr using TempData/tmp2\n\n* \tIdentify the dates\n\tgenerate date_ = substr(dato_stempel,1,10)\n\tgenerate date = date(date_, \"YMD\")\n\tformat date %td\n\tgenerate householddecision = (date_==\"2015-03-26\" | date_==\"2015-03-25\" | date_==\"2015-03-24\" ) \n\t\n* \tonly keep right pnr\t\n\tdrop pnr\n\trename pnrS pnr\n\n* Generate year variable\t\n\tgenerate year = year(date)\n\t\n* Identify sample\n\tgenerate sample = 1\n\tgenerate sampleIDX = .\n\treplace sampleIDX = 1 if stratumid==1\n\treplace sampleIDX = 2 if stratumid==2\n\treplace sampleIDX = 3 if stratumid==2 & householddecision==1\n\treplace sampleIDX = 4 if stratumid==3\n\treplace sampleIDX = 5 if stratumid==4\n\t\t\t\n*   Now save the data as risk averions task from the first experiment\n\tsave TempData/RA.dta, replace\n\t\n* Get experimental data from second round of experiments\n\tuse \"$e_data\\3_runde\\risktime_results.dta\", clear\n\t\n* describe data\n\tdes\n\t\n* now keep variables of interest\n\tsave TempData/temp, replace\n\n* Now clean up\n\tuse TempData/temp, clear\n\tkeep if type == \"1\"\n\tkeep pnr par_single stratum period decision r_l* r_r* qid dato_stempel\n\ttostring _all, replace\n\torder pnr stratum  period decision r_l* r_r* qid\n\tforeach y in a p {\n\tforeach z in r l {\n\tforeach x in 1 2 3 4 {\n\t\t\treplace r_`z'`y'`x' = subinstr(r_`z'`y'`x',\",\",\".\",.)\n\t}\n\t}\n\t}\n\tdestring par_single stratum period decision r_l* r_r* qid dato_stempel, replace\n\tgenerate taskRA= (period>0)\n\trename period task\n\n\tduplicates drop\n\tgenerate dateS= substr(dato_stempel, 12, 6)\n\t\n\tkeep if stratumid==1\n\t\n\n\t* Remove those which was restarted.\n\tsort pnr dato_stempel\n\tegen seqN = seq(), by(pnr)\n\tegen seqM = max(seqN), by(pnr)\n\tdrop if seqN<3 & seqM==62 \n\tdrop if seqN>60 & seqM==120\n\tdrop seqN seqM\n\trename r_la1 VPRIZEA1\n\trename r_la2 VPRIZEA2\n\trename r_la3 VPRIZEA3\n\trename r_la4 VPRIZEA4\n\t\n\trename r_ra1 VPRIZEB1\n\trename r_ra2 VPRIZEB2\n\trename r_ra3 VPRIZEB3\n\trename r_ra4 VPRIZEB4\n\t\n\trename r_lp1 probA1\n\trename r_lp2 probA2\n\trename r_lp3 probA3\n\trename r_lp4 probA4\n\t\n\trename r_rp1 probB1\n\trename r_rp2 probB2\n\trename r_rp3 probB3\n\trename r_rp4 probB4\n\n\tgenerate testA = probA1 + probA2 + probA3 + probA4\n\tgenerate testB = probB1 + probB2 + probB3 + probB4\n\n* Convert probabilities to 0-1 scale\nforvalues x=1(1)4 {\n\tforvalues y = 1(1)9 {\n\t\treplace probA`x' = probA`x'*10 if probA`x'==`y'\t& testA~=1\n\t\treplace probB`x' = probB`x'*10 if probB`x'==`y'\t& testB~=1\t\n\t}\n}\n\nforvalues x=1(1)4 {\n\t\treplace probA`x' = probA`x'*100 if testA==1\t\n\t\treplace probB`x' = probB`x'*100 if testB==1\t\n}\n\n\ngenerate scaleA = probA1 + probA2 + probA3 + probA4\ngenerate scaleB = probB1 + probB2 + probB3 + probB4\n\nreplace probA1 = probA1 / scaleA\nreplace probA2 = probA2 / scaleA\nreplace probA3 = probA3 / scaleA\nreplace probA4 = probA4 / scaleA\n\nreplace probB1 = probB1 / scaleB\nreplace probB2 = probB2 / scaleB\nreplace probB3 = probB3 / scaleB\nreplace probB4 = probB4 / scaleB\n\n\t* Label variables\n\tlabel variable decision \"Decision in task\"\n\tlabel variable taskRA \t\"Risk Aversion Task\"\n\tlabel variable task \t\"Task number\"\n\tlabel variable VPRIZEA1 \t\"Option A: Amount of the First Prize\"\n\tlabel variable VPRIZEA2 \t\"Option A: Amount of the Second Prize\"\n\tlabel variable VPRIZEA3 \t\"Option A: Amount of the Third Prize\"\n\tlabel variable VPRIZEA4 \t\"Option A: Amount of the Fourth Prize\"\n\tlabel variable VPRIZEA1 \t\"Option B: Amount of the First Prize\"\n\tlabel variable VPRIZEA2 \t\"Option B: Amount of the Second Prize\"\n\tlabel variable VPRIZEA3 \t\"Option B: Amount of the Third Prize\"\n\tlabel variable VPRIZEA4 \t\"Option B: Amount of the Fourth Prize\"\n\tlabel variable probA1 \t\t\"Option A: Probability of the First Prize\"\n\tlabel variable probA2 \t\t\"Option A: Probability of the Second Prize\"\n\tlabel variable probA3 \t\t\"Option A: Probability of the Third Prize\"\n\tlabel variable probA4 \t\t\"Option A: Probability of the Fourth Prize\"\n\tlabel variable probA1 \t\t\"Option B: Probability of the First Prize\"\n\tlabel variable probA2 \t\t\"Option B: Probability of the Second Prize\"\n\tlabel variable probA3 \t\t\"Option B: Probability of the Third Prize\"\n\tlabel variable probA4 \t\t\"Option B: Probability of the Fourth Prize\"\n\t\n\t* Make sure there are no missing values\n\tkeep pnr task decision VPR** prob* qid dato_stempel taskRA stratumid\n\t\t* \n\tgenerate choice = 0\n\treplace choice = 1 if decision==1\n\tcompress\n\n* \tIdentify the dates\n\tegen maxtask = max(task), by(pnr)\n\treplace task = task -11\n\treplace task = task - 19 if maxtask>71\n\n* Generate year variable\t\n\tgenerate year = 2015\n\t\n* Identify sample\n\tgenerate sample = 2\n\tgenerate sampleIDX = .\n\treplace sampleIDX = 11 if stratumid==1\n\t\n*   Now save the data as risk averions task\n\tsave TempData/RA2.dta, replace\t\t\t\n\t\t\t\n**********************************************************\n* COLLATE INTO ONE BIG FILE AND CLEAN UP EXPERIMENTAL DATA\n**********************************************************\t\n\t\n\tuse TempData/RA, clear\n\tappend using TempData/RA2\n\t\n\t******************************************\n\t* Only keep relevant experimental data\n\tkeep task prob* VPRIZE* qid dato_stempel pnr choice date year sampleIDX\n\tcompress\t\n\t\n\t* Only keep relevant experimental sample (do not iclude criminals and households)\n\tkeep if sampleIDX ==1 |  sampleIDX ==2 | sampleIDX ==11\n\t\n\t* Cleanup and reshape lottery data for ease of rank dependent estimation\n\tqui {\n\t\t* adjust some WEW lotteries that are not rank ordered\n\t\tforeach q in 1 2 3 4 {\n\t\tforeach p in A B {\n\t\t\tgenerate prob`p'`q'_ = prob`p'`q'\n\t\t\tgenerate VPRIZE`p'`q'_ = VPRIZE`p'`q'\n\t\t}\n\t\t}\n\n\t\tforeach q in rWEW3 rWEW7 rWEW10 rWEW11 rWEW14 rWEW15 {\n\t\t\treplace probA1 = probA2_ if qid==\"`q'\"\n\t\t\treplace VPRIZEA1 = VPRIZEA2_ if qid==\"`q'\"\n\t\t\treplace probA2 = probA1_ if qid==\"`q'\"\n\t\t\treplace VPRIZEA2 = VPRIZEA1_ if qid==\"`q'\"\n\t\t}\n\t\tforeach q in rWEW4 rWEW8 rWEW7 rWEW8 rWEW12 rWEW16 rWEW19 rWEW20 rWEW23 rWEW24 {\n\t\t\treplace probA1 = probA2_ if qid==\"`q'\"\n\t\t\treplace VPRIZEA1 = VPRIZEA2_ if qid==\"`q'\"\n\t\t\treplace probA2 = probA3_ if qid==\"`q'\"\n\t\t\treplace VPRIZEA2 = VPRIZEA3_ if qid==\"`q'\"\n\t\t\treplace probA3 = probA1_ if qid==\"`q'\"\n\t\t\treplace VPRIZEA3 = VPRIZEA1_ if qid==\"`q'\"\n\t\t}\n\t\tforeach q in rWEW3 rWEW7 rWEW10 rWEW11 rWEW14 rWEW15 rWEW18 rWEW22 {\n\t\t\treplace probB1 = probB2_ if qid==\"`q'\"\n\t\t\treplace VPRIZEB1 = VPRIZEB2_ if qid==\"`q'\"\n\t\t\treplace probB2 = probB1_ if qid==\"`q'\"\n\t\t\treplace VPRIZEB2 = VPRIZEB1_ if qid==\"`q'\"\n\t\t}\n\t\tforeach q in rWEW4 rWEW8 rWEW12 rWEW16 rWEW19 rWEW20 rWEW23 rWEW24 {\n\t\t\treplace probB1 = probB2_ if qid==\"`q'\"\n\t\t\treplace VPRIZEB1 = VPRIZEB2_ if qid==\"`q'\"\n\t\t\treplace probB2 = probB3_ if qid==\"`q'\"\n\t\t\treplace VPRIZEB2 = VPRIZEB3_ if qid==\"`q'\"\n\t\t\treplace probB3 = probB1_ if qid==\"`q'\"\n\t\t\treplace VPRIZEB3 = VPRIZEB1_ if qid==\"`q'\"\n\t\t}\n\n\t\tforeach q in 1 2 3 4 {\n\t\tforeach p in A B {\n\t\t\tdrop prob`p'`q'_\n\t\t\tdrop VPRIZE`p'`q'_\n\t\t}\n\t\t}\n\n\t\t* shift over one ... also including the r lotteries\n\t\tforvalues x=1/61 {\n\t\tforeach y in A B {\n\t\t\tforvalues z=3(-1)1 {\n\t\t\t\tlocal zz=`z'+1\n\t\t\t\treplace prob`y'`zz' = prob`y'`z' if qid==\"ls`x'\" | qid==\"rWEW`x'\"  | qid==\"r`x'\"\n\t\t\t\treplace VPRIZE`y'`zz' = VPRIZE`y'`z' if qid==\"ls`x'\"  | qid==\"rWEW`x'\"  | qid==\"r`x'\"\n\t\t\t}\n\t\t\treplace prob`y'1 = 0 if qid==\"ls`x'\"  | qid==\"rWEW`x'\" | qid==\"r`x'\"\n\t\t\treplace VPRIZE`y'1 = 0 if qid==\"ls`x'\"  | qid==\"rWEW`x'\" | qid==\"r`x'\"\n\t\t}\n\t\t}\n\t\t}\n\n\t\t* now get the roundings of probabilities right for stata \n\t\tforeach q in 1 2 3 4 {\n\t\t\tforeach p in A B {\n\t\t\t\tgenerate prob`p'`q'_ = .    \n\t\t\t}\n\t\t}\n\n\t\tforvalues z = 0(1)100 {\n\t\t\tforeach q in 1 2 3 4 {\n\t\t\t\tforeach p in A B {\n\t\t\t\t\treplace prob`p'`q'_ = `z'/100 if (abs(`z'/100 - prob`p'`q') < 0.0001 )    \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tforeach q in 1 2 3 4 {\n\t\t\tforeach p in A B {\n\t\t\t\tdrop prob`p'`q'\n\t\t\t\trename prob`p'`q'_  prob`p'`q'\n\t\t\t}\n\t\t}\n\t\n\t* Append Additional Experimental Data\t\n\tsave TempData/ExperimentData.dta, replace\n\t\n**************************************************\n* GET EXPERIMENTAL PAYMENTS FROM PAYMENT RECORDS\n**************************************************\n\t\n* merge financial data with experimental data\n\tuse TempData/ExperimentData, clear\n\tegen record = seq(), by(pnr)\t\n\tkeep if record==1\n\tkeep pnr sampleIDX\n\tduplicates drop\n\tmerge 1:1 pnr using X:\\Rawdata\\703278\\Eksterndata_705060ngl\\Spil_DST\\2_runde\\praemiedb.dta\n\tdrop if _merge == 2\n\tkeep pnr* beloeb pct a1_beloeb a2_beloeb a3a_beloeb a3b_beloeb a4_beloeb a5_beloeb sampleIDX\n\tforeach x in beloeb pct a1_beloeb a2_beloeb a3a_beloeb a3b_beloeb a4_beloeb a5_beloeb {\n\t\trename `x' S1`x'\t\n\t}\n\tmerge 1:1 pnr using X:\\Rawdata\\703278\\Eksterndata_705060ngl\\Spil_DST\\3_runde\\praemiedb.dta\n\tdrop if _merge == 2\n\tkeep pnr S1* a1_beloeb a2_beloeb a3_beloeb a4_beloeb a6_beloeb beloeb pct sampleIDX\n\treplace beloeb = S1beloeb if beloeb==.\n\treplace pct = S1pct if pct==.\n\treplace S1a1_beloeb = a1_beloeb if S1a1_beloeb==.\n\treplace S1a1_beloeb = 0 if S1a1_beloeb ==.\t\n\tgenerate totalpay = S1a1_beloeb+ S1a2_beloeb+ S1a3a_beloeb+ S1a3b_beloeb+ S1a4_beloeb+ S1a5_beloeb if a2_beloeb==.\n\treplace totalpay = a1_beloeb+ a2_beloeb+ a3_beloeb+ a4_beloeb+ a6_beloeb if a6_beloeb~=.\n\treplace totalpay = 0 if totalpay==.\n\t\n\tkeep pnr S1a1_beloeb totalpay\n\tduplicates drop\n\trename S1a1_beloeb riskpay\n\t\n\tla variable riskpay\t\t\t\t\"Payment in risk task\"\n\tla variable totalpay\t\t\t\"Payment in total\"\n\t\t\n\tsave TempData/payments, replace\n\n**********************************************\t\t\n**********************************************\n*  ADMINISTRATIVE REGISTRY DATA\n**********************************************\n**********************************************\n\t\n**********************************************\n* DEMOGRAPHICS FROM CPR REGISTER\t\t     *\n**********************************************\n\t\tclear\n\t\tuse $raw\\bef2015, clear\n\t\t* Male dummy\n\t\trename koen male\n\t\treplace male = 2-male\n\t\t* age \n\t\tgenerate age = 2015- year(foed_dag) -1\n\t\t* married dummy\n\t\tgenerate married = (civst==\"G\")\n\t\t* household size\n\t\tegen hsize = seq(), by(familie_id)\n\t\t\n\t\tkeep pnr male age married hsize kom\n\t\tduplicates drop\n\t\tcompress\n\t\t\n\t\t* Make use individuals are unique\n\t\tegen seqN = seq(), by(pnr)\n\t\ttab seqN\n\t\tegen maxSeq = max(seqN), by(pnr)\n\t\tdrop if maxSeq>1\n\t\tkeep pnr male age married hsize kom\n\t\t\n\t\t* Label demographic variables\n\t\tlabel variable age \"Age in years\"\n\t\tlabel variable married \"Married\"\n\t\tlabel variable male \"Male\"\n\t\tlabel variable hsize \"Household size in count\"\n\t\tlabel variable kom \"Municipality\"\n\t\t\n\t\tsave TempData\\Demog, replace\n\t\n***************************************************************\n*\t\tFINANCIAL WEALTH  AND INCOME DATA FROM TAX REGISTRY   *\n***************************************************************\n\n\t\t* Get family link to link value of cars\n\t\tuse $raw\\bef2014, clear\n\t\tkeep pnr familie_id\n\t\tduplicates drop\n\t\tsave TempData/famlink2014, replace\n\t\t\n\t\t* Now get tax records\n\t\tuse $raw\\ind2014.dta, clear\n\t\tdrop if pnr==\"\"\n\t\tkeep pnr formrest_ny05 qaktivf_ny05 qpassivn koejd perindkialt pantakt bankgaeld oblgaeld pantgaeld bankakt kursakt oblakt \n\t\trename formrest_ny05 \tnetwealth\n\t\trename qaktivf_ny05     assets\n\t\trename qpassivn\t\t\tdebt\n\t\trename koejd\t\t\thousingvalue\t\t\n\t\trename perindkialt\t\tincome\n\t\trename pantakt\t\t \tprivateloan_assets\n\t\trename bankgaeld\t \tbank_debt\n\t\trename oblgaeld\t\t \tbond_debt\n\t\trename pantgaeld\t \tprivateloan_debt\n\t\trename bankakt\t\t \tbank_assets\n\t\trename kursakt\t\t \tstock_assets\n\t\trename oblakt\t\t \tbond_assets\t\t\n\t\t\n\t\tduplicates drop\n\t\tcompress\n\n\t\t* Make sure individuals are unique\n\t\tegen seqN = seq(), by(pnr)\n\t\ttab seqN\n\t\tegen maxSeq = max(seqN), by(pnr)\n\t\tdrop if maxSeq>1\n\t\tdrop seqN maxSeq\n\t\tsave TempData/wealthRec2014, replace\n\t\t\n\t\t* Get value of cars on familie level\n\t\tuse $raw\\formbil2013, clear\n\t\tcollapse (sum) vejledende_salgspris, by(familie_id)\n\t\trename vejledende_salgspris carvalue\n\t\tsave TempData/wealthcar2013, replace\n\t\t\n\t\t* Get value of directly held property\n\t\tuse $raw\\formejer2014, clear\n\t\tdrop if pnr==\"\"\n\t\tcollapse (sum) markedsvaerdi, by(pnr)\n\t\trename markedsvaerdi koejd_market\n\t\tsave TempData/valueproperty2014, replace\n\t\n\t\t* Get value of inderectly hold property\n\t\tuse $raw\\formand2014, clear\n\t\tdrop if pnr==\"\"\n\t\tcollapse (sum) markedsvaerdi, by(pnr)\n\t\trename markedsvaerdi koejdA_market\n\t\tsave TempData/valuepropertyA2014, replace\n\t\n\t\t* Get pension wealth\n\t\tuse $raw\\PENSFORM2014, clear\n\t\tdrop if pnr==\"\"\t\n\t\t* generate pension amount\n\t\tforeach x in andakkrgublb andkolbonusblb andsaebonusblb garanydelsblb pensdepotblb {\n\t\t\treplace `x' = 0 if `x'==.\t\n\t\t}\n\t\t\n\t\tgenerate amount = andakkrgublb + andkolbonusblb + andsaebonusblb + garanydelsblb + pensdepotblb\n\t\tcollapse (sum) amount, by(pnr)\n\t\trename amount pension\n\t\tsave TempData/wealthpension2014, replace\n\t\t\t\n\t\t* Now merge wealth components together together \n\t\tuse TempData/wealthRec2014, clear\n\t\t* get family link for car values\n\t\tmerge 1:1 pnr using TempData/famlink2014\n\t\tkeep if _merge~=2\n\t\tdrop _merge\n\t\tmerge m:1 familie_id using TempData/wealthcar2013\n\t\tdrop if _merge==2\n\t\tdrop _merge\t\n\t\tmerge 1:1 pnr using TempData/valueproperty2014\n\t\tdrop if _merge==2\n\t\tdrop _merge\n\t\tmerge 1:1 pnr using Tempdata/valuepropertyA2014\n\t\tdrop if _merge==2\n\t\tdrop _merge\n\t\tmerge 1:1 pnr using Tempdata/wealthpension2014\n\t\tdrop if _merge==2\n\t\tdrop _merge\n\t\tforeach y in koejd_market koejdA_market carvalue pension {\t\n\t\t\treplace `y' = 0 if `y'==.\t\n\t\t}\n\t\t\n\t\t* define our variables of interest\n\t\tgenerate assets_realestate  = koejd_market + koejdA_market\n\t\tgenerate assets_stocks      = stock_assets\n\t\tgenerate assets_banks\t\t= bank_assets \n\t\tgenerate assets_bonds\t\t= privateloan_assets + bond_assets\n\t\tgenerate assets_pension\t\t= pension\n\t\tgenerate assets_cars\t\t= carvalue\n\t\n\t\tegen assets_total\t\t = rowtotal(assets_*)\n\t\n\t\tgenerate liab_bankdebt \t = bank_debt \n\t\tgenerate liab_mortgage \t = bond_debt \n\t\tgenerate liab_private\t = privateloan_debt  \n\t\n\t\tegen liab_total\t\t\t = rowtotal(liab_*)\n\t\n\t\t* Generate net position\n\t\tgenerate wealth_net \t = assets_total - liab_total  \n\n\t\t* Generate truncated netwealth varialbe\n\t\tgenerate wealth_T = (wealth_net>exp(1))\n\t\tgenerate truncated = (wealth_net<exp(1))\n\t\treplace  wealth_T = wealth_net * wealth_T\n\t\treplace  wealth_T = exp(1) if wealth_T<exp(1)\n\t\n\t\t* Keep relevant variables\n\t\tkeep pnr assets* liab_* wealth_* truncated income\n\t\t\n\t\tduplicates drop\n\t\tcompress\n\t\n\t\t* Make use individuals are unique\n\t\tegen seqN = seq(), by(pnr)\n\t\ttab seqN\n\t\tegen maxSeq = max(seqN), by(pnr)\n\t\tdrop if maxSeq>1\n\t\tkeep pnr assets* liab_* wealth_*  truncated income\n\t\n\t\tla variable income \t\t\t\t\"Income\"\n\t\n\t\tla variable assets_total \t\t\"Total assets\"\n\t\tla variable assets_realestate\t\"Real estate\"\n\t\tla variable assets_stocks\t\t\"Shares and mutual funds\"\n\t\tla variable assets_banks\t\t\"Deposits in banks\"\n\t\tla variable assets_bond\t\t\t\"Bonds and mortgages\"\n\t\tla variable assets_pension\t\t\"Pension\"\n\t\tla variable assets_cars\t\t\t\"Cars\"\n\t\t\n\t\tla variable liab_total \t\t\"Total liabilities\"\n\t\tla variable liab_bankdebt\t\"Non-mortgage debt in financial institution\"\n\t\tla variable liab_mortgage\t\"Mortgage\"\n\t\tla variable liab_private\t\"Privately issued debt\"\n\t\t\n\t\tla variable wealth_net \t\t\"Net wealth\"\n\t\tla variable wealth_T\t\t\"Net wealth truncated to zero\"\n\t\t\n\t\tsave TempData/Wealth, replace\n\t\n***********************************************************\n* COLLATE ALL REGISTER INFORMATION AND EXPERIMENTAL DATA\n***********************************************************\n\n*\t\tRegression in paper run using the olde PNR key. Use missing link to remove subjects\n\t\t* merge financial data with experimental data\n\t\tuse TempData/RA.dta, clear\n\t\tappend using TempData/RA2.dta\n\t\tkeep pnr \n\t\tduplicates drop\n\t\trename pnr pnr_705060\n\t\tmerge m:1 pnr_705060 using X:\\Rawdata\\703278\\PNRNGL_2015\n\t\tdrop if _merge==1\n\t\tkeep pnr_705060\n\t\trename pnr_705060 pnr\n\t\tsave TempData/selection, replace\n\t\t\n\t\tuse TempData/Demog, clear\n\t\tcapture drop _merge\n\t\tmerge 1:1 pnr using TempData/Wealth\n\t\tdrop if _merge~=3\n\t\tdrop _merge\n\t\tsave TempData/DataReg, replace\n\t\t\n\t\tmerge 1:m pnr using TempData/ExperimentData.dta\n\t\t* drop individuals without wealth or income information\n\t\tdrop if _merge ~=3\n\t\tdrop _merge\n\t\tmerge m:1 pnr using TempData/payments.dta\n\t\tdrop if _merge ~=3\n\t\tdrop _merge\n\t\tmerge m:1 pnr using TempData/selection.dta\n\t\tdrop if _merge ~=3\n\t\tdrop _merge\n\t\t\t\t\n* \t\tSave Final data\n\t\tsave Data, replace\t\t\n\t\t\n***************************************************************************************************\n*\t\tGenerate fake covariates to use off the server\n***************************************************************************************************\t\n\t\n\t* drop the non merged\n\tuse Data, replace\n\tkeep pnr riskpay totalpay sampleIDX male age married hsize income assets_total assets_realesta assets_stocks assets_bond assets_banks assets_pension assets_cars liab_total liab_bankdebt liab_mortgage wealth_net wealth_T truncated\n\tduplicates drop\n\t\n\t* Generate Sample ID\n\tgenerate S_1 \t= (sampleIDX==1)\n\tgenerate S_2 \t= (sampleIDX==2)\n\tgenerate S_11 \t= (sampleIDX==3)\n\t\t\n\t* Remove missing values\n\tforeach x in male age married hsize income assets_total assets_realesta assets_stocks assets_bond assets_banks assets_pension assets_cars liab_total liab_bankdebt liab_mortgage wealth_net wealth_T truncated S_1 S_2 S_3 riskpay totalpay {\n\t\t\treplace `x' = 0 if `x' ==.\t\n\t}\n\tkeep pnr male age married hsize income assets_total assets_realesta assets_stocks assets_bond assets_banks assets_pension assets_cars liab_total liab_bankdebt liab_mortgage wealth_net wealth_T truncated S_1 S_2 S_3 riskpay totalpay\n\tsave TempData/dataS, replace\n\t\n\t* generate matrixes for outside of the server\n\tclear all\n\tuse TempData/dataS, clear\n\tqui summ male\n\tmatrix meanM = r(mean)\n\tforeach x in age married hsize income assets_total assets_realesta assets_stocks assets_bond assets_banks assets_pension assets_cars liab_total liab_bankdebt liab_mortgage wealth_net wealth_T truncated S_1 S_2 S_3 riskpay totalpay {\n\t\tqui summ `x'\n\t\tlocal mean = r(mean)\n\t\tmatrix meanM = meanM \\ `mean'\n\t}\n\tmatrix list meanM\n\n\tpreserve\n\tmatrix meanM_E = meanM\n\tclear\n\tsvmat meanM_E, names(mean_)\n\tsave ToMove/meanM_E, replace\n\trestore\t\t\n\t\n\tcorr male age married hsize income assets_total assets_realesta assets_stocks assets_bond assets_banks assets_pension assets_cars liab_total liab_bankdebt liab_mortgage liab_private wealth_net wealth_T S_1 S_2 S_11 riskpay totalpay, covariance \n\tmatrix corrM = r(C)\n\tmatrix list corrM\n\tpreserve\n\tmatrix corrM_E = corrM\n\tclear\n\tsvmat corrM_E, names(corr_)\n\tsave ToMove/corrM_E, replace\n\trestore\t\t\n\t\n\t* generate covariates off server\n\t\n\t*/",
    "line": 247,
    "column": 1
  }
]